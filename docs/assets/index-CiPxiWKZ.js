import{b7 as jn,t as Nn,e as Vn,as as pn,aL as ao,d1 as uo,aq as co,ar as ls,aK as fs,ak as ds,cj as ps,d2 as lo,aI as ni,d3 as hs,cg as vs,d4 as gs}from"./index-B-nbFw5B.js";import{a as xt}from"./dicomParser.min-CYxCOwbh.js";import{i as ys}from"./imageRetrievalPoolManager-CQ2_YfAr.js";import{r as Wn,g as ai}from"./___vite-browser-external_commonjs-proxy-Buz2L0e0.js";import{_ as fo}from"./index-CFxxadld.js";function Si(e,i,o){if(e===void 0)throw new Error("decodeRGB: rgbBuffer must be defined");if(e.length%3!==0)throw new Error(`decodeRGB: rgbBuffer length ${e.length} must be divisible by 3`);const a=e.length/3;let h=0,r=0;if(o){for(let g=0;g<a;g++)i[r++]=e[h++],i[r++]=e[h++],i[r++]=e[h++],i[r++]=255;return}i.set(e)}function po(e,i,o){if(e===void 0)throw new Error("decodeRGB: rgbBuffer must be defined");if(e.length%3!==0)throw new Error(`decodeRGB: rgbBuffer length ${e.length} must be divisible by 3`);const a=e.length/3;let h=0,r=0,g=a,T=a*2;if(o)for(let E=0;E<a;E++)i[h++]=e[r++],i[h++]=e[g++],i[h++]=e[T++],i[h++]=255;else for(let E=0;E<a;E++)i[h++]=e[r++],i[h++]=e[g++],i[h++]=e[T++]}function ho(e,i,o){if(e===void 0)throw new Error("convertYBRFullByPixel: ybrBuffer must be defined");if(e.length%3!==0)throw new Error(`convertYBRFullByPixel: ybrBuffer length ${e.length} must be divisible by 3`);const a=e.length/3;let h=0,r=0;if(o){for(let g=0;g<a;g++){const T=e[h++],E=e[h++],S=e[h++];i[r++]=T+1.402*(S-128),i[r++]=T-.34414*(E-128)-.71414*(S-128),i[r++]=T+1.772*(E-128),i[r++]=255}return}for(let g=0;g<a;g++){const T=e[h++],E=e[h++],S=e[h++];i[r++]=T+1.402*(S-128),i[r++]=T-.34414*(E-128)-.71414*(S-128),i[r++]=T+1.772*(E-128)}}function vo(e,i,o){if(e===void 0)throw new Error("convertYBRFullByPlane: ybrBuffer must be defined");if(e.length%3!==0)throw new Error(`convertYBRFullByPlane: ybrBuffer length ${e.length} must be divisible by 3`);const a=e.length/3;let h=0,r=0,g=a,T=a*2;if(o){for(let E=0;E<a;E++){const S=e[r++],$=e[g++],k=e[T++];i[h++]=S+1.402*(k-128),i[h++]=S-.34414*($-128)-.71414*(k-128),i[h++]=S+1.772*($-128),i[h++]=255}return}for(let E=0;E<a;E++){const S=e[r++],$=e[g++],k=e[T++];i[h++]=S+1.402*(k-128),i[h++]=S-.34414*($-128)-.71414*(k-128),i[h++]=S+1.772*($-128)}}function _s(e,i,o){if(e===void 0)throw new Error("convertYBRFull422ByPixel: ybrBuffer must be defined");if(e.length%2!==0)throw new Error(`convertYBRFull422ByPixel: ybrBuffer length ${e.length} must be divisible by 2`);const a=e.length/2;let h=0,r=0;if(o){for(let g=0;g<a;g+=2){const T=e[h++],E=e[h++],S=e[h++],$=e[h++];i[r++]=T+1.402*($-128),i[r++]=T-.34414*(S-128)-.71414*($-128),i[r++]=T+1.772*(S-128),i[r++]=255,i[r++]=E+1.402*($-128),i[r++]=E-.34414*(S-128)-.71414*($-128),i[r++]=E+1.772*(S-128),i[r++]=255}return}for(let g=0;g<a;g+=2){const T=e[h++],E=e[h++],S=e[h++],$=e[h++];i[r++]=T+1.402*($-128),i[r++]=T-.34414*(S-128)-.71414*($-128),i[r++]=T+1.772*(S-128),i[r++]=E+1.402*($-128),i[r++]=E-.34414*(S-128)-.71414*($-128),i[r++]=E+1.772*(S-128)}}function hi(e,i){const o=e.length,a=new Uint8ClampedArray(o);for(let h=0;h<o;++h)a[h]=e[h]>>i;return a}function vi(e,i,o){const a=e[`${i}PaletteColorLookupTableData`];if(a)return Promise.resolve(a);const h=jn("imagePixelModule",e.imageId);return h&&typeof h.then=="function"?h.then(r=>r?r[`${i}PaletteColorLookupTableData`]:o):Promise.resolve(h?h[`${i}PaletteColorLookupTableData`]:o)}function go(e,i,o){const a=e.columns*e.rows,h=e.pixelData;Promise.all([vi(e,"red",null),vi(e,"green",null),vi(e,"blue",null)]).then(([r,g,T])=>{if(!r||!g||!T)throw new Error("The image does not have a complete color palette. R, G, and B palette data are required.");const E=r.length;let S=0,$=0;const k=e.redPaletteColorLookupTableDescriptor[1],M=e.redPaletteColorLookupTableDescriptor[2]===8?0:8,U=hi(r,M),G=hi(g,M),J=hi(T,M);if(o){for(let X=0;X<a;++X){let Z=h[S++];Z<k?Z=0:Z>k+E-1?Z=E-1:Z-=k,i[$++]=U[Z],i[$++]=G[Z],i[$++]=J[Z],i[$++]=255}return}for(let X=0;X<a;++X){let Z=h[S++];Z<k?Z=0:Z>k+E-1?Z=E-1:Z-=k,i[$++]=U[Z],i[$++]=G[Z],i[$++]=J[Z]}})}function gi(e,i){if(!(!e.elements[i]||e.elements[i].length!==6))return[e.uint16(i,0),e.uint16(i,1),e.uint16(i,2)]}function yi(e,i,o){const a=[],h=e.elements[i];for(let r=0;r<o[0];r++)o[2]===16?a[r]=e.uint16(i,r):a[r]=e.byteArray[r+h.dataOffset];return a}function ms(e,i){i.redPaletteColorLookupTableDescriptor=gi(e,"x00281101"),i.greenPaletteColorLookupTableDescriptor=gi(e,"x00281102"),i.bluePaletteColorLookupTableDescriptor=gi(e,"x00281103"),i.redPaletteColorLookupTableDescriptor[0]===0&&(i.redPaletteColorLookupTableDescriptor[0]=65536,i.greenPaletteColorLookupTableDescriptor[0]=65536,i.bluePaletteColorLookupTableDescriptor[0]=65536);const o=i.redPaletteColorLookupTableDescriptor[0],h=e.elements.x00281201.length===o?8:16;i.redPaletteColorLookupTableDescriptor[2]!==h&&(i.redPaletteColorLookupTableDescriptor[2]=h,i.greenPaletteColorLookupTableDescriptor[2]=h,i.bluePaletteColorLookupTableDescriptor[2]=h),i.redPaletteColorLookupTableData=yi(e,"x00281201",i.redPaletteColorLookupTableDescriptor),i.greenPaletteColorLookupTableData=yi(e,"x00281202",i.greenPaletteColorLookupTableDescriptor),i.bluePaletteColorLookupTableData=yi(e,"x00281203",i.bluePaletteColorLookupTableDescriptor)}function bs(e,i){e.uint16("x00280103")===0?(i.smallestPixelValue=e.uint16("x00280106"),i.largestPixelValue=e.uint16("x00280107")):(i.smallestPixelValue=e.int16("x00280106"),i.largestPixelValue=e.int16("x00280107"))}function yo(e){const i={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return bs(e,i),i.photometricInterpretation==="PALETTE COLOR"&&e.elements.x00281101&&ms(e,i),i}function ws(e,i){let o=i.uint16("x00283002",0);o===0&&(o=65535);let a=0;e===0?a=i.uint16("x00283002",1):a=i.int16("x00283002",1);const h=i.uint16("x00283002",2),r={id:"1",firstValueMapped:a,numBitsPerEntry:h,lut:[]};for(let g=0;g<o;g++)e===0?r.lut[g]=i.uint16("x00283006",g):r.lut[g]=i.int16("x00283006",g);return r}function Pi(e,i){if(!i||!i.items||!i.items.length)return;const o=[];for(let a=0;a<i.items.length;a++){const h=i.items[a].dataSet,r=ws(e,h);r&&o.push(r)}return o}function Ps(e){const i=e.uint16("x00280103"),o=e.uint16("x00280101");return i===0?0:-1<<o-1}function _o(e){const i=e.string("x00080016");if(i==="1.2.840.10008.5.1.4.1.1.2"||i==="1.2.840.10008.5.1.4.1.1.2.1")return 1;const o=e.floatString("x00281052"),a=e.floatString("x00281053");return o!==void 0&&a!==void 0?Ps(e)*a+o<0?1:0:e.elements.x00283000&&e.elements.x00283000.length>0?0:e.uint16("x00280103")}function tr(e,i,o){const a=[],h=e.string(i);if(!h)return;const r=h.split("\\");if(!(o&&r.length<o)){for(let g=0;g<r.length;g++)a.push(parseFloat(r[g]));return a}}function Zn(e){const i=e.indexOf(":");let o=e.substring(i+1);const a=o.indexOf("frame=");let h;if(a!==-1){const T=o.substring(a+6);h=parseInt(T,10),o=o.substring(0,a-1)}const r=e.substring(0,i),g=h!==void 0?h-1:void 0;return{scheme:r,url:o,frame:h,pixelDataFrame:g}}let Ti={open(e,i){e.open("get",i,!0)},beforeSend:async()=>{},beforeProcessing(e){return Promise.resolve(e.response)},imageCreated(){},strict:!1};function mo(e){Ti=Object.assign(Ti,e)}function ei(){return Ti}function ui(e,i,o={},a={}){const h=ei(),r=E=>{if(typeof h.errorInterceptor=="function"){const S=new Error("request failed");S.request=E,S.response=E.response,S.status=E.status,h.errorInterceptor(S)}},g=new XMLHttpRequest,T=new Promise(async(E,S)=>{h.open(g,e,o,a);const $=await h.beforeSend(g,i,o,a);g.responseType="arraybuffer";const k=Object.assign({},o,$);Object.keys(k).forEach(function(M){k[M]!==null&&(M==="Accept"&&e.indexOf("accept=")!==-1||g.setRequestHeader(M,k[M]))}),a.deferred={resolve:E,reject:S},a.url=e,a.imageId=i,g.onloadstart=function(M){h.onloadstart&&h.onloadstart(M,a),Nn(Vn,"cornerstoneimageloadstart",{url:e,imageId:i})},g.onloadend=function(M){h.onloadend&&h.onloadend(M,a),Nn(Vn,"cornerstoneimageloadend",{url:e,imageId:i})},g.onreadystatechange=function(M){h.onreadystatechange&&h.onreadystatechange(M,a),g.readyState===4&&(g.status===200||g.status===206?h.beforeProcessing(g).then(E).catch(()=>{r(g),S(g)}):(r(g),S(g)))},g.onprogress=function(M){const U=M.loaded;let G,J;M.lengthComputable&&(G=M.total,J=Math.round(U/G*100)),Nn(Vn,"cornerstoneimageloadprogress",{url:e,imageId:i,loaded:U,total:G,percentComplete:J}),h.onprogress&&h.onprogress(M,a)},g.onerror=function(){r(g),S(g)},g.onabort=function(){r(g),S(g)},g.send()});return T.xhr=g,T}function Ts(e,i,o){if(o+e.length>i.length)return!1;let a=o;for(let h=0;h<e.length;h++)if(e[h]!==i[a++])return!1;return!0}function Cs(e){const i=new Uint8Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=e.charCodeAt(o);return i}function Ci(e,i,o){o=o||0;const a=Cs(i);for(let h=o;h<e.length;h++)if(a[0]===e[h]&&Ts(a,e,h))return h;return-1}const{ImageQualityStatus:Vi}=pn;function Ii(e,i,o){o||={};const a=new Uint8Array(i),h=!!o?.isPartial;if(e.indexOf("multipart")===-1)return{contentType:e,imageQualityStatus:h?Vi.SUBRESOLUTION:Vi.FULL_RESOLUTION,pixelData:a};let{tokenIndex:r,responseHeaders:g,boundary:T,multipartContentType:E}=o;if(r||=Ci(a,`\r
\r
`),r===-1)throw new Error("invalid response - no multipart mime header");if(!T&&(g=Rs(a,0,r).split(`\r
`),T=Es(g),!T))throw new Error("invalid response - no boundary marker");const S=r+4,$=Ci(a,T,S);if($===-1&&!h)throw new Error("invalid response - terminating boundary not found");return E||=As(g),o.tokenIndex=r,o.boundary=T,o.responseHeaders=g,o.multipartContentType=E,o.isPartial=$===-1,{contentType:E,extractDone:!h||$!==-1,tokenIndex:r,responseHeaders:g,boundary:T,multipartContentType:E,pixelData:i.slice(S,$-2)}}function Es(e){for(let i=0;i<e.length;i++)if(e[i].substr(0,2)==="--")return e[i]}function As(e){for(let i=0;i<e.length;i++)if(e[i].substr(0,13)==="Content-Type:")return e[i].substr(13).trim()}function Rs(e,i,o){i=i||0,o=o||e.length-i;let a="";for(let h=i;h<i+o;h++)a+=String.fromCharCode(e[h]);return a}const{ImageQualityStatus:Gi}=pn;function Di(e,i=!0){return i?e.imageQualityStatus??Gi.FULL_RESOLUTION:Gi.SUBRESOLUTION}const{ProgressiveIterator:xs}=ao;function bo(e,i,o={},a={}){const h=ei(),{retrieveOptions:r={},streamingData:g={}}=a,T=r.minChunkSize||128*1024,E=$=>{if(typeof h.errorInterceptor=="function"){const k=new Error("request failed");h.errorInterceptor(k)}},S=new xs("streamRequest");return S.generate(async($,k)=>{const M=await h.beforeSend?.(null,e,o,{}),U=Object.assign({},o,M);Object.keys(U).forEach(function(G){U[G]===null&&(U[G]=void 0),G==="Accept"&&e.indexOf("accept=")!==-1&&(U[G]=void 0)});try{const G=await fetch(e,{headers:U,signal:void 0});if(G.status!==200)throw new Error(`Couldn't retrieve ${e} got status ${G.status}`);const J=G.body.getReader(),X=G.headers,Z=X.get("content-type"),K=Number(X.get("Content-Length"));let ne=!1,ae=g.encodedData,be=g.lastSize||0;for(g.isPartial=!0;!ne;){const{done:ve,value:Re}=await J.read();if(ae=$s(ae,Re),!ae){if(ne)throw new Error(`Done but no image frame available ${i}`);continue}if(ne=ve||ae.byteLength===K,!ne&&ae.length<be+T)continue;be=ae.length,g.isPartial=!ve;const le=Ii(Z,ae,g),ce=Di(r,ne),he={url:e,imageId:i,...le,percentComplete:ve?100:le.pixelData?.length*100/K,imageQualityStatus:ce,done:ne};$.add(he,ne)}}catch(G){E(),console.error(G),k(G)}}),S.getNextPromise()}function $s(e,i){if(!e)return i;if(!i)return e;const o=new Uint8Array(e.length+i.length);return o.set(e,0),o.set(i,e.length),o}const Ss={xhrRequest:ui,streamRequest:bo,setOptions:mo,getOptions:ei};function Is(e){const i=e.elements.x7fe00010.fragments,o=e.byteArray.length;for(const a of i){const{position:h,length:r}=a;r>o-h&&(console.log(`Truncated fragment, changing fragment length from ${a.length} to ${o-h}`),a.length=o-h)}return e}function Ds(e){let i=xt.parseDicom(e,{untilTag:"x7fe00010"});i.elements.x7fe00010||console.warn("Pixel data not found!");let o;try{o=xt.parseDicom(e)}catch(a){console.error(a),console.log("pixel data dataset:",a.dataSet),o=a.dataSet}return i.elements.x7fe00010=o.elements.x7fe00010,i=Is(i),i}async function wo(e,i,o){const a=Ds(e),{uri:h,imageId:r,fileTotalLength:g}=o;return a.fetchMore=async function(T){const E=Object.assign({uri:h,imageId:r,fetchedLength:e.length,lengthToFetch:g-e.length},T),{fetchedLength:S,lengthToFetch:$}=E,{arrayBuffer:k}=await i(h,r,{byteRange:`${S}-${S+$}`}),M=new Uint8Array(k),U=new Uint8Array(a.byteArray.length+M.length);return U.set(a.byteArray),U.set(M,a.byteArray.length),wo(U,i,o)},a}function Os(e,i){if(!e)return;const{NumberOfFrames:o,PerFrameFunctionalGroupsSequence:a,SharedFunctionalGroupsSequence:h}=To(e);if(a||o>1){const{shared:r,perFrame:g}=Po(a,h,i);return{NumberOfFrames:o,PerFrameFunctionalInformation:g,SharedFunctionalInformation:r}}return{NumberOfFrames:o}}function Po(e,i,o){const a={};(i?Object.values(i.items[0].dataSet.elements):[]).map(r=>a[r.tag]=r);const h={};return(e?Object.values(e.items[o-1].dataSet.elements):[]).map(r=>h[r.tag]=r),{shared:a,perFrame:h}}function To(e){if(!e)return;const{elements:i,...o}=e,{x52009230:a,x52009229:h,...r}=i;return{NumberOfFrames:e.intString("x00280008"),PerFrameFunctionalGroupsSequence:a,SharedFunctionalGroupsSequence:h,otherElements:r,otherAttributtes:o}}function Ls(e,i){if(!i)return;const{NumberOfFrames:o,PerFrameFunctionalGroupsSequence:a,SharedFunctionalGroupsSequence:h,otherElements:r}=To(i);if(a||o>1){const{shared:g,perFrame:T}=Po(a,h,e),E={elements:{...r,...g,...T}},S=Object.create(i);return Object.assign(S,E)}return i}let tt={};const Us=()=>{tt={}};function Oi(e){if(tt[e])return tt[e]}function ks(e){const i=Oi(e);return Co(i)}function Co(e){if(!e)return!1;const i=e.intString("x00280008");return i&&i>1}function Ms(e){return e.indexOf("&frame=")}function Fs(e){const i=Ms(e),o=i===-1?e:e.slice(0,i),a=parseInt(e.slice(i+7),10)||1;let h;return tt[o]?h=tt[o].dataSet:h=void 0,{dataSet:h,frame:a}}function js(e){const i=[],o=Oi(e);if(Co(o)){const a=o.intString("x00280008");for(let h=1;h<=a;h++)i.push(`${e}&frame=${h}`)}else i.push(e);return i}const Eo={_get:Oi,generateMultiframeWADOURIs:js,retrieveMultiframeDataset:Fs,isMultiframeDataset:ks};let zn=0,Fn={};function Ws(e){return tt[e]!==void 0}function Hs(e){let i;if(e.includes("&frame=")){const{frame:o,dataSet:a}=Eo.retrieveMultiframeDataset(e);i=Ls(o,a)}else tt[e]&&(i=tt[e].dataSet);return i}function Ns(e,i){const o=tt[e];if(!o){console.error(`No loaded dataSet for uri ${e}`);return}zn-=o.dataSet.byteArray.length,o.dataSet=i,zn+=i.byteArray.length,Nn(Vn,"datasetscachechanged",{uri:e,action:"updated",cacheInfo:ci()})}function Vs(e,i=ui,o){if(tt[e])return new Promise(r=>{tt[e].cacheCount++,r(tt[e].dataSet)});if(Fn[e])return Fn[e].cacheCount++,Fn[e];const a=i(e,o),h=new Promise((r,g)=>{a.then(async function(T){const E={isPartialContent:!1,fileTotalLength:null};if(!(T instanceof ArrayBuffer)){if(!T.arrayBuffer)return g(new Error("If not returning ArrayBuffer, must return object with `arrayBuffer` parameter"));E.isPartialContent=T.flags.isPartialContent,E.fileTotalLength=T.flags.fileTotalLength,T=T.arrayBuffer}const S=new Uint8Array(T);let $;try{E.isPartialContent?$=await wo(S,i,{uri:e,imageId:o,fileTotalLength:E.fileTotalLength}):$=xt.parseDicom(S)}catch(k){return g(k)}tt[e]={dataSet:$,cacheCount:h.cacheCount},zn+=$.byteArray.length,r($),Nn(Vn,"datasetscachechanged",{uri:e,action:"loaded",cacheInfo:ci()})},g).then(()=>{delete Fn[e]},()=>{delete Fn[e]})});return h.cacheCount=1,Fn[e]=h,h}function Gs(e){tt[e]&&(tt[e].cacheCount--,tt[e].cacheCount===0&&(zn-=tt[e].dataSet.byteArray.length,delete tt[e],Nn(Vn,"datasetscachechanged",{uri:e,action:"unloaded",cacheInfo:ci()})))}function ci(){return{cacheSizeInBytes:zn,numberOfDataSetsCached:Object.keys(tt).length}}function Bs(){Us(),Fn={},zn=0}const Gn={isLoaded:Ws,load:Vs,unload:Gs,getInfo:ci,purge:Bs,get:Hs,update:Ns};function zs(e){const i=[];for(let o=0;o<=30;o+=2){let a=`x60${o.toString(16)}`;a.length===4&&(a=`x600${o.toString(16)}`);const h=e.elements[`${a}3000`];if(!h)continue;const r=[];for(let g=0;g<h.length;g++)for(let T=0;T<8;T++){const E=e.byteArray[h.dataOffset+g];r[g*8+T]=E>>T&1}i.push({rows:e.uint16(`${a}0010`),columns:e.uint16(`${a}0011`),type:e.string(`${a}0040`),x:e.int16(`${a}0050`,1)-1,y:e.int16(`${a}0050`,0)-1,pixelData:r,description:e.string(`${a}0022`),label:e.string(`${a}1500`),roiArea:e.string(`${a}1301`),roiMean:e.string(`${a}1302`),roiStandardDeviation:e.string(`${a}1303`)})}return{overlays:i}}function Jn(e){return e==="RECON TOMO"||e==="RECON GATED TOMO"}function Li(e,i){const o=e.string("x00080008");if(o){const a=o.split("\\");if(a.length>i)return a[i]}}function Js(e){let i;if(e.string("x00080060")?.includes("NM")){const a=Li(e,2);a&&Jn(a)&&e.elements.x00540022&&(i=tr(e.elements.x00540022.items[0].dataSet,"x00200037",6))}return i}function qs(e){let i;if(e.string("x00080060")?.includes("NM")){const a=Li(e,2);a&&Jn(a)&&e.elements.x00540022&&(i=tr(e.elements.x00540022.items[0].dataSet,"x00200032",3))}return i}function Bi(e){let i=tr(e,"x00200037",6);return!i&&e.elements.x00209116?.items?.[0]?.dataSet&&(i=tr(e.elements.x00209116.items[0].dataSet,"x00200037",6)),i||(i=Js(e)),i}function zi(e){let i=tr(e,"x00200032",3);return!i&&e.elements.x00209113?.items?.[0]?.dataSet&&(i=tr(e.elements.x00209113.items[0].dataSet,"x00200032",3)),i||(i=qs(e)),i}function Ji(e){let i=tr(e,"x00280030",2);return!i&&e.elements.x00289110?.items?.[0]?.dataSet&&(i=tr(e.elements.x00289110.items[0].dataSet,"x00280030",2)),i}function qi(e){let i;return e.elements.x00180050?i=e.floatString("x00180050"):e.elements.x00289110&&e.elements.x00289110.items.length&&e.elements.x00289110.items[0].dataSet.elements.x00180050&&(i=e.elements.x00289110.items[0].dataSet.floatString("x00180050")),i}const Ao=["multiframeModule","generalSeriesModule","patientStudyModule","imagePlaneModule","nmMultiframeGeometryModule","imagePixelModule","modalityLutModule","voiLutModule","sopCommonModule","petIsotopeModule","overlayPlaneModule","transferSyntax","petSeriesModule","petImageModule"];function Yi(e){const i=e.elements.x00186011;return!i||!i.items?[]:i.items.map(a=>{const h=a.dataSet.double("x0018602c"),r=a.dataSet.double("x0018602e"),g=a.dataSet.uint16("x00186024"),T=a.dataSet.uint16("x00186026"),E=a.dataSet.uint16("x0018601a"),S=a.dataSet.uint16("x0018601e"),$=a.dataSet.uint16("x00186018"),k=a.dataSet.uint16("x0018601c"),M=a.dataSet.int32("x00186020")||null,U=a.dataSet.int32("x00186022")||null,G=a.dataSet.uint16("x0018602a"),J=a.dataSet.uint16("x00186028"),X=a.dataSet.uint16("x00186012"),Z=a.dataSet.uint16("x00186014"),K=a.dataSet.uint16("x00186016"),ne=a.dataSet.uint16("x00186030");return{regionLocationMinY0:E,regionLocationMaxY1:S,regionLocationMinX0:$,regionLocationMaxX1:k,referencePixelX0:M,referencePixelY0:U,physicalDeltaX:h,physicalDeltaY:r,physicalUnitsXDirection:g,physicalUnitsYDirection:T,referencePhysicalPixelValueY:G,referencePhysicalPixelValueX:J,regionSpatialFormat:X,regionDataType:Z,regionFlags:K,transducerFrequency:ne}})}function Ro(e,i){const{MetadataModules:o}=pn;if(Array.isArray(i))return;const a=Zn(i);if(e===o.MULTIFRAME){const g=Eo.retrieveMultiframeDataset(a.url);return g.dataSet?Os(g.dataSet,g.frame):void 0}let h=a.url;a.frame&&(h=`${h}&frame=${a.frame}`);const r=Gn.get(h);if(r)return xo(e,i,r)}function xo(e,i,o){const{MetadataModules:a}=pn;if(e===a.GENERAL_STUDY)return{studyDescription:o.string("x00081030"),studyDate:xt.parseDA(o.string("x00080020")),studyTime:xt.parseTM(o.string("x00080030")||""),accessionNumber:o.string("x00080050")};if(e===a.GENERAL_SERIES)return{modality:o.string("x00080060"),seriesInstanceUID:o.string("x0020000e"),seriesDescription:o.string("x0008103e"),seriesNumber:o.intString("x00200011"),studyInstanceUID:o.string("x0020000d"),seriesDate:xt.parseDA(o.string("x00080021")),seriesTime:xt.parseTM(o.string("x00080031")||""),acquisitionDate:xt.parseDA(o.string("x00080022")),acquisitionTime:xt.parseTM(o.string("x00080032")||"")};if(e===a.GENERAL_IMAGE)return{sopInstanceUID:o.string("x00080018"),instanceNumber:o.intString("x00200013"),lossyImageCompression:o.string("x00282110"),lossyImageCompressionRatio:o.floatString("x00282112"),lossyImageCompressionMethod:o.string("x00282114")};if(e===a.PATIENT)return{patientID:o.string("x00100020"),patientName:o.string("x00100010")};if(e===a.PATIENT_STUDY)return{patientAge:o.intString("x00101010"),patientSize:o.floatString("x00101020"),patientSex:o.string("x00100040"),patientWeight:o.floatString("x00101030")};if(e===a.NM_MULTIFRAME_GEOMETRY){const h=o.string("x00080060"),r=Li(o,2);return{modality:h,imageType:o.string("x00080008"),imageSubType:r,imageOrientationPatient:Bi(o),imagePositionPatient:zi(o),sliceThickness:qi(o),pixelSpacing:Ji(o),numberOfFrames:o.uint16("x00280008"),isNMReconstructable:Jn(r)&&h.includes("NM")}}if(e===a.IMAGE_PLANE){const h=Bi(o),r=zi(o),g=Ji(o),T=qi(o);let E=null,S=null,$=!1;g?(S=g[0],E=g[1]):($=!0,S=1,E=1);let k=null,M=null;return h&&(k=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])],M=[parseFloat(h[3]),parseFloat(h[4]),parseFloat(h[5])]),{frameOfReferenceUID:o.string("x00200052"),rows:o.uint16("x00280010"),columns:o.uint16("x00280011"),imageOrientationPatient:h,rowCosines:k,columnCosines:M,imagePositionPatient:r,sliceThickness:T,sliceLocation:o.floatString("x00201041"),pixelSpacing:g,rowPixelSpacing:S,columnPixelSpacing:E,usingDefaultValues:$}}if(e===a.CINE)return{frameTime:o.floatString("x00181063")};if(e===a.IMAGE_PIXEL)return yo(o);if(e===a.VOI_LUT){const h=_o(o);return{windowCenter:tr(o,"x00281050",1),windowWidth:tr(o,"x00281051",1),voiLUTSequence:Pi(h,o.elements.x00283010),voiLUTFunction:o.string("x00281056")}}if(e===a.MODALITY_LUT)return{rescaleIntercept:o.floatString("x00281052"),rescaleSlope:o.floatString("x00281053"),rescaleType:o.string("x00281054"),modalityLUTSequence:Pi(o.uint16("x00280103"),o.elements.x00283000)};if(e===a.SOP_COMMON)return{sopClassUID:o.string("x00080016"),sopInstanceUID:o.string("x00080018")};if(e===a.PET_ISOTOPE){const h=o.elements.x00540016;if(h===void 0)return;const r=h.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:xt.parseTM(r.string("x00181072")||""),radionuclideTotalDose:r.floatString("x00181074"),radionuclideHalfLife:r.floatString("x00181075")}}}if(e===a.OVERLAY_PLANE)return zs(o);if(e==="transferSyntax"){let h;try{h=o.string("x00020010")}catch{}return{transferSyntaxUID:h}}if(e===a.PET_SERIES)return{correctedImage:o.string("x00280051"),units:o.string("x00541001"),decayCorrection:o.string("x00541102")};if(e===a.PET_IMAGE)return{frameReferenceTime:o.floatString(o.string("x00541300")||""),actualFrameDuration:o.intString(o.string("x00181242"))};if(e===a.ULTRASOUND_ENHANCED_REGION)return Yi(o);if(e===a.CALIBRATION&&o.string("x00080060")==="US")return{sequenceOfUltrasoundRegions:Yi(o)};if(e==="instance")return uo(i,Ao)}let li=[];function Ys(e){return`dicomfile:${li.push(e)-1}`}function Xs(e){return li[e]}function Qs(e){li[e]=void 0}function Ks(){li=[]}const $o={add:Ys,get:Xs,remove:Qs,purge:Ks};function Zs(e){const i=e.intString("x00280008"),o=e.elements.x7fe00010;return i!==o.fragments.length}function So(e,i){if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return xt.readEncapsulatedImageFrame(e,e.elements.x7fe00010,i);if(Zs(e)){const S=xt.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return xt.readEncapsulatedImageFrame(e,e.elements.x7fe00010,i,S)}const o=e.elements.x7fe00010.fragments,a=new xt.ByteStream(e.byteArrayParser,e.byteArray,e.elements.x7fe00010.dataOffset),h=xt.readSequenceItem(a);if(h.tag!=="xfffee000")throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";a.seek(h.length);const r=a.position;if(i+1>o.length)throw"dicomParser.readEncapsulatedPixelData: frame exceeds number of fragments";const T=r+o[i].offset+8,E=o[i].length;return new Uint8Array(a.byteArray.buffer.slice(a.byteArray.byteOffset+T,a.byteArray.byteOffset+T+E))}function ea(e,i){return e&1<<i}function Io(e,i,o){const a=new Uint8Array(o);for(let h=0;h<o;h++){const r=Math.floor(h/8),g=e[r+i],T=h%8;a[h]=ea(g,T)?1:0}return a}function Do(e,i){const o=e.elements.x7fe00010||e.elements.x7fe00008,a=e.uint16("x00280100"),h=e.uint16("x00280010"),r=e.uint16("x00280011");let g=e.uint16("x00280002");e.string("x00280004")==="YBR_FULL_422"&&(g=2,console.warn(`Using SamplesPerPixel of 2 for YBR_FULL_422 photometric interpretation.
      See http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html for more information.`));const E=o.dataOffset,S=h*r*g;let $;if(a===8){if($=E+i*S,$>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer.slice($,$+S))}else if(a===16){if($=E+i*S*2,$>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer.slice($,$+S*2))}else if(a===1){if($=E+i*S*.125,$>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return Io(e.byteArray,$,S)}else if(a===32){if($=E+i*S*4,$>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer.slice($,$+S*4))}throw new Error("unsupported pixel format")}function Oo(e){const i=Zn(e),o=parseInt(i.url,10),a=$o.get(o);return new Promise((h,r)=>{const g=new FileReader;g.onload=T=>{const E=T.target.result;h(E)},g.onerror=r,g.readAsArrayBuffer(a)})}function Ui(e,i=0){const o=e.elements.x7fe00010||e.elements.x7fe00008;return o?o.encapsulatedPixelData?So(e,i):Do(e,i):null}function fi(e){let i=e[0],o=e[0],a;const h=e.length;for(let r=1;r<h;r++)a=e[r],i=Math.min(i,a),o=Math.max(o,a);return{min:i,max:o}}function ta(e,i,o){e.planarConfiguration===0?Si(e.pixelData,i,o):po(e.pixelData,i,o)}function ra(e,i,o){e.planarConfiguration===0?ho(e.pixelData,i,o):vo(e.pixelData,i,o)}function Lo(e,i,o){const{photometricInterpretation:a}=e;if(e.photometricInterpretation==="RGB")ta(e,i,o);else if(a==="YBR_RCT"||a==="YBR_ICT"||a==="YBR_PARTIAL_420")Si(e.pixelData,i,o);else if(e.photometricInterpretation==="PALETTE COLOR")go(e,i,o);else if(e.photometricInterpretation==="YBR_FULL_422")_s(e.pixelData,i,o);else if(e.photometricInterpretation==="YBR_FULL")ra(e,i,o);else throw new Error(`No color space conversion for photometric interpretation ${e.photometricInterpretation}`)}function na(e){if(e===void 0)return!1;const{rows:i,columns:o,photometricInterpretation:a,pixelDataLength:h,planarConfiguration:r}=e;return h===4*o*i?!1:a==="PALETTE COLOR"?!0:a.endsWith("420")?h===(3*Math.ceil(o/2)+Math.floor(o/2))*i:a.endsWith("422")?h===(3*Math.ceil(o/2)+Math.floor(o/2))*Math.ceil(i/2)+Math.floor(i/2)*o:a!=="RGB"||r===1}function ia(e){return oa(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}function oa(e){let i;try{return decodeURIComponent(escape(e))}catch(o){if(i=o,i instanceof URIError)return e;throw i}}function Uo(e,i,o){const a=new Date().getTime(),h=new Blob([i],{type:"image/jpeg"});return new Promise((r,g)=>{const T=new FileReader;T.readAsBinaryString===void 0?T.readAsArrayBuffer(h):T.readAsBinaryString(h),T.onload=function(){const E=new Image;E.onload=function(){o.height=E.height,o.width=E.width,e.rows=E.height,e.columns=E.width;const S=o.getContext("2d");S.drawImage(this,0,0);const $=S.getImageData(0,0,E.width,E.height),k=new Date().getTime();e.pixelData=new Uint8Array($.data.buffer),e.imageData=$,e.decodeTimeInMS=k-a;const M=fi(e.pixelData);e.smallestPixelValue=M.min,e.largestPixelValue=M.max,e.pixelDataLength=e.pixelData.length,r(e)},E.onerror=function(S){g(S)},T.readAsBinaryString===void 0?E.src=`data:image/jpeg;base64,${window.btoa(ia(T.result))}`:E.src=`data:image/jpeg;base64,${window.btoa(T.result)}`},T.onerror=E=>{g(E)}})}function Dt(e,i,o,a,h){const r={...a};delete r.loader,delete r.streamingData;const g=co(),T=r.priority||void 0;return r.transferPixelData&&o.buffer,g.executeTask("dicomImageLoader","decodeTask",{imageFrame:e,transferSyntax:i,pixelData:o,options:r,decodeConfig:h},{priority:T,requestType:r?.requestType})}function sa(e,i,o,a,h={},r){switch(i){case"1.2.840.10008.1.2":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.1":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.2":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.1.99":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.5":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.50":return e.bitsAllocated===8&&(e.samplesPerPixel===3||e.samplesPerPixel===4)?Uo(e,o,a):Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.51":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.57":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.70":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.80":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.81":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.90":return Dt(e,i,o,h,r);case"1.2.840.10008.1.2.4.91":return Dt(e,i,o,h,r);case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":return Dt(e,i,o,h,r)}return Promise.reject(new Error(`No decoder for transfer syntax ${i}`))}function ko(e){const i=jn("imagePixelModule",e);return{samplesPerPixel:i.samplesPerPixel,photometricInterpretation:i.photometricInterpretation,planarConfiguration:i.planarConfiguration,rows:i.rows,columns:i.columns,bitsAllocated:i.bitsAllocated,bitsStored:i.bitsStored,pixelRepresentation:i.pixelRepresentation,smallestPixelValue:i.smallestPixelValue,largestPixelValue:i.largestPixelValue,redPaletteColorLookupTableDescriptor:i.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:i.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:i.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:i.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:i.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:i.bluePaletteColorLookupTableData,pixelData:void 0,imageId:e}}function aa(e,i){const o=e.get("modalityLutModule",i)||{},a=e.get("generalSeriesModule",i)||{},{modality:h}=a,r={rescaleSlope:o.rescaleSlope,rescaleIntercept:o.rescaleIntercept,modality:h},g=e.get("scalingModule",i)||{};return{...r,...h==="PT"&&{suvbw:g.suvbw},...h==="RTDOSE"&&{doseGridScaling:g.DoseGridScaling,doseSummation:g.DoseSummation,doseType:g.DoseType,doseUnit:g.DoseUnit}}}function ki(e){return e==="RGB"||e==="PALETTE COLOR"||e==="YBR_FULL"||e==="YBR_FULL_422"||e==="YBR_PARTIAL_422"||e==="YBR_PARTIAL_420"||e==="YBR_RCT"||e==="YBR_ICT"}function ua(e,i){const o=e.length/4;let a=0,h=0;for(let r=0;r<o;r++)i[h++]=e[a++],i[h++]=e[a++],i[h++]=e[a++],a++;return i}function ca(e){return e!=="1.2.840.10008.5.1.4.1.1.12.1"&&e!=="1.2.840.10008.5.1.4.1.1.12.2.1"}function Mi(e,i){let o;return Number.isInteger(e)&&Number.isInteger(i)&&(e>=0?i<=255?o=Uint8Array:i<=65535?o=Uint16Array:i<=4294967295&&(o=Uint32Array):e>=-128&&i<=127?o=Int8Array:e>=-32768&&i<=32767&&(o=Int16Array)),o||Float32Array}function la(e,i,o){return Mi(e,i)===o}function fa(e){const i=e.smallestPixelValue,o=e.largestPixelValue,a=Mi(i,o);if(a){const h=new a(e.pixelData);e.pixelData=h}else throw new Error("Could not apply a typed array to the pixel data")}let Xi="";function di(e,i,o,a={}){const h=a.useRGBA;if(a.preScale={enabled:a.preScale&&a.preScale.enabled!==void 0?a.preScale.enabled:!0},!i?.length)return Promise.reject(new Error("The pixel data is missing"));const{MetadataModules:r}=pn,g=document.createElement("canvas"),T=ko(e);if(T.decodeLevel=a.decodeLevel,a.allowFloatRendering=ls(),a.preScale.enabled){const k=aa(fs,e);k&&(a.preScale={...a.preScale,scalingParameters:k})}const{decodeConfig:E}=ei();Object.keys(T).forEach(k=>{(typeof T[k]=="function"||T[k]instanceof Promise)&&delete T[k]});const S=sa(T,o,i,g,a,E),$=ki(T.photometricInterpretation);return new Promise((k,M)=>{S.then(function(U){let G=!1;if(a.targetBuffer&&a.targetBuffer.type&&!$){const{arrayBuffer:ce,type:he,offset:xe=0,length:De}=a.targetBuffer,Ue=U.pixelDataLength,ie=xe,Ce=De??Ue-ie,Ee={Uint8Array,Uint16Array,Int16Array,Float32Array,Uint32Array};if(Ce!==U.pixelDataLength)throw new Error(`target array for image does not have the same length (${Ce}) as the decoded image length (${U.pixelDataLength}).`);const we=Ee[he],$e=ce?new we(ce,ie,Ce):new we(U.pixelData);if(Ce!==U.pixelDataLength)throw new Error("target array for image does not have the same length as the decoded image length.");U.pixelData=$e,G=!0}G||fa(U);const J=jn(r.IMAGE_PLANE,e)||{},X=jn(r.VOI_LUT,e)||{},Z=jn(r.MODALITY_LUT,e)||{},K=jn(r.SOP_COMMON,e)||{},ne=jn(r.CALIBRATION,e)||{},{rows:ae,columns:be}=U;if($){if(na(U)){g.height=U.rows,g.width=U.columns;let xe=g.getContext("2d").createImageData(U.columns,U.rows);h||(xe={...xe,data:new Uint8ClampedArray(3*U.columns*U.rows)}),Lo(U,xe.data,h),U.imageData=xe,U.pixelData=xe.data,U.pixelDataLength=xe.data.length}else if(!h&&U.pixelDataLength===4*ae*be){const he=new Uint8Array(U.pixelData.length/4*3);U.pixelData=ua(U.pixelData,he),U.pixelDataLength=U.pixelData.length}const ce=fi(U.pixelData);U.smallestPixelValue=ce.min,U.largestPixelValue=ce.max}let ve=U.samplesPerPixel;U.photometricInterpretation==="PALETTE COLOR"&&(ve=h?4:3);const Re=ds.createImageVoxelManager({scalarData:U.pixelData,width:U.columns,height:U.rows,numberOfComponents:ve}),le={imageId:e,dataType:U.pixelData.constructor.name,color:$,calibration:ne,columnPixelSpacing:J.columnPixelSpacing,columns:U.columns,height:U.rows,preScale:U.preScale,intercept:Z.rescaleIntercept?Z.rescaleIntercept:0,slope:Z.rescaleSlope?Z.rescaleSlope:1,invert:U.photometricInterpretation==="MONOCHROME1",minPixelValue:U.smallestPixelValue,maxPixelValue:U.largestPixelValue,rowPixelSpacing:J.rowPixelSpacing,rows:U.rows,sizeInBytes:U.pixelData.byteLength,width:U.columns,windowCenter:X.windowCenter?X.windowCenter[0]:void 0,windowWidth:X.windowWidth?X.windowWidth[0]:void 0,voiLUTFunction:X.voiLUTFunction?X.voiLUTFunction:void 0,decodeTimeInMS:U.decodeTimeInMS,floatPixelData:void 0,imageFrame:U,voxelManager:Re,rgba:$&&h,getPixelData:()=>U.pixelData,getCanvas:void 0,numberOfComponents:ve};if(le.color&&(le.getCanvas=function(){if(Xi===e)return g;const ce=le.columns,he=le.rows;g.height=he,g.width=ce;const xe=g.getContext("2d"),De=xe.createImageData(ce,he),Ue=U.pixelData;if(Ue.length===ce*he*4)for(let ie=0;ie<Ue.length;ie++)De.data[ie]=Ue[ie];else if(Ue.length===ce*he*3){let ie=0;for(let Ce=0;Ce<Ue.length;Ce+=3)De.data[ie++]=Ue[Ce],De.data[ie++]=Ue[Ce+1],De.data[ie++]=Ue[Ce+2],De.data[ie++]=255}return U.pixelData=De.data,U.pixelDataLength=De.data.length,U.imageData=De,xe.putImageData(U.imageData,0,0),Xi=e,g}),Z.modalityLUTSequence&&Z.modalityLUTSequence.length>0&&ca(K.sopClassUID)&&(le.modalityLUT=Z.modalityLUTSequence[0]),X.voiLUTSequence&&X.voiLUTSequence.length>0&&(le.voiLUT=X.voiLUTSequence[0]),le.color&&(le.windowWidth=256,le.windowCenter=128),le.windowCenter===void 0||le.windowWidth===void 0){const ce=ps(le.imageFrame.smallestPixelValue,le.imageFrame.largestPixelValue);le.windowWidth=ce.windowWidth,le.windowCenter=ce.windowCenter}k(le)},M)})}const{ImageQualityStatus:Mo}=pn;function da(e,i){e.decache=function(){const o=Zn(i);Gn.unload(o.url)}}function Fo(e,i,o=0,a,h,r){const g=new Date().getTime(),T={cancelFn:void 0,promise:void 0};return T.promise=new Promise((E,S)=>{e.then($=>{const k=Ui($,o),M=$.string("x00020010"),U=new Date().getTime(),G=di(i,k,M,h);da(T,i),G.then(J=>{J=J,J.data=$,J.sharedCacheKey=a;const X=new Date().getTime();J.loadTimeInMS=U-g,J.totalTimeInMS=X-g,J.imageQualityStatus=Mo.FULL_RESOLUTION,r!==void 0&&r.imageDoneCallback!==void 0&&r.imageDoneCallback(J),E(J)},function(J){S({error:J,dataSet:$})})},function($){S({error:$})})}),T}function pa(e,i,o=0,a,h){const r=new Date().getTime();return{promise:new Promise((T,E)=>{const S=new Date().getTime();let $;try{const k=Ui(e,o),M=e.string("x00020010");$=di(i,k,M,h)}catch(k){E({error:k,dataSet:e});return}$.then(k=>{k=k,k.data=e;const M=new Date().getTime();k.loadTimeInMS=S-r,k.totalTimeInMS=M-r,k.imageQualityStatus=Mo.FULL_RESOLUTION,T(k)},E)}),cancelFn:void 0}}function jo(e){if(e==="dicomweb"||e==="wadouri")return ui;if(e==="dicomfile")return Oo}function ii(e,i={}){const o=Zn(e);i=Object.assign({},i),delete i.loader;const a=jo(o.scheme);if(Gn.isLoaded(o.url)){const r=Gn.get(o.url,a,e);return pa(r,e,o.pixelDataFrame,o.url,i)}const h=Gn.load(o.url,a,e);return Fo(h,e,o.frame,o.url,i)}function Wo(){ni("dicomweb",ii),ni("wadouri",ii),ni("dicomfile",ii),lo(Ro)}const ha={getImagePixelModule:yo,getLUTs:Pi,getModalityLUTOutputPixelRepresentation:_o,getNumberValues:tr,metaDataProvider:Ro,metadataForDataset:xo},va={metaData:ha,dataSetCacheManager:Gn,fileManager:$o,getEncapsulatedImageFrame:So,getUncompressedImageFrame:Do,loadFileRequest:Oo,loadImageFromPromise:Fo,getLoaderForScheme:jo,getPixelData:Ui,loadImage:ii,parseImageId:Zn,unpackBinaryFrame:Io,register:Wo};function te(e,i,o){return i=i||0,!e||!e.Value||Array.isArray(e.Value)&&e.Value.length<=i?o:e.Value[i]}function ga(e,i,o){const a=te(e,i,o);if(a!==void 0)return parseFloat(String(a))}function ye(e,i){const o=te(e,i);if(o!==void 0)return parseFloat(o)}function bt(e,i){if(!e||!e.Value||!Array.isArray(e.Value)||i&&e.Value.length<i)return;const o=[];for(let a=0;a<e.Value.length;a++)o.push(parseFloat(e.Value[a]));return o}function ya(e){const i=[];for(let o=0;o<=30;o+=2){let a=`x60${o.toString(16)}`;a.length===4&&(a=`x600${o.toString(16)}`);const h=te(e[`${a}3000`]);if(!h)continue;const r=[];for(let g=0;g<h.length;g++)for(let T=0;T<8;T++){const E=e.Value[h.dataOffset+g];r[g*8+T]=E>>T&1}i.push({rows:ye(e[`${a}0010`]),columns:ye(e[`${a}0011`]),type:te(e[`${a}0040`]),x:ye(e[`${a}0050`],1)-1,y:ye(e[`${a}0050`],0)-1,pixelData:r,description:te(e[`${a}0022`]),label:te(e[`${a}1500`]),roiArea:te(e[`${a}1301`]),roiMean:te(e[`${a}1302`]),roiStandardDeviation:te(e[`${a}1303`])})}return{overlays:i}}function pi(e){const i=e.indexOf(":");return e.substring(i+1)}function Bn(e,i=!0){return e&&e.Value?e.Value[0]&&i?e.Value[0]:e.Value:e}function Ho(e,i,o){const a=(i?Object.values(i[0]):[]).map(r=>r.Value?.[0]).filter(r=>r!==void 0&&typeof r=="object"),h=(e?Object.values(e[o-1]):[]).map(r=>r.Value?.[0]).filter(r=>r!==void 0&&typeof r=="object");return{shared:a,perFrame:h}}function No(e){let{52009230:i,52009229:o,"00280008":a,...h}=e;return i=Bn(i,!1),o=Bn(o,!1),a=Bn(a),{PerFrameFunctionalGroupsSequence:i,SharedFunctionalGroupsSequence:o,NumberOfFrames:a,rest:h}}function _a(e,i){const{PerFrameFunctionalGroupsSequence:o,SharedFunctionalGroupsSequence:a,NumberOfFrames:h,rest:r}=No(i);if(o||h>1){const{shared:g,perFrame:T}=Ho(o,a,e),E=Object.assign(i,{frameNumber:e});return[...g,...T].forEach(S=>{Object.entries(S).forEach(([$,k])=>{E[$]=k})}),Object.assign(r,{"00280008":h},E)}return i}let ti=[],si={};function Vo(e){const i=e.indexOf("/frames/")+8,o=e.slice(0,i),a=parseInt(e.slice(i),10);return{metadata:ti[`${o}1`],frame:a}}function ma(e){const i=pi(e);return Vo(i)}function ba(e){if(e[52009230]!==void 0||e[52009229]!==void 0)return!0;const i=te(e["00280008"]);return i&&i>1}function wa(e,i){const o=pi(e);Object.defineProperty(i,"isMultiframe",{value:ba(i),enumerable:!1}),ti[o]=i}function Pa(e){const i=pi(e),o=ti[i];if(o&&!o?.isMultiframe)return o;const a=si[i];if(a)return a;const h=Vo(i);if(!h||!h.metadata)return;const{metadata:r,frame:g}=h;if(r){const T=_a(g,r);return si[i]=T,T}}function Ta(e){const i=pi(e);ti[i]=void 0,si[i]=void 0}function Ca(){ti=[],si={}}const Fi={add:wa,get:Pa,remove:Ta,purge:Ca};function Go(e){return te(e["00080060"]).includes("NM")}function ji(e,i){const o=Bn(e["00080008"],!1);if(o)return o[i]}function Ea(e){let i;const o=ji(e,2);if(o&&Jn(o)){const a=Bn(e["00540022"]);a&&(i=bt(a["00200037"],6))}return i}function Aa(e){let i;const o=ji(e,2);if(o&&Jn(o)){const a=Bn(e["00540022"]);a&&(i=bt(a["00200032"],3))}return i}function Qi(e){let i=bt(e["00200037"],6);return!i&&Go(e)&&(i=Ea(e)),i}function Ki(e){let i=bt(e["00200032"],3);return!i&&Go(e)&&(i=Aa(e)),i}function mt(e,i){const o=bt(e[i]);return o?o[0]:null}function Ra(e){return e?.Value?.length?Array.isArray(e.Value)?e.Value:typeof e.Value=="object"?(console.warn("Warning: Value should be an array, but an object was found. Encapsulating the object in an array."),[e.Value]):[]:[]}function Zi(e){const i=Ra(e["00186011"]);return!i||!i.length?null:i.map(a=>{const h=mt(a,"0018602C"),r=mt(a,"0018602E"),g=mt(a,"00186024"),T=mt(a,"00186026"),E=mt(a,"0018601A"),S=mt(a,"0018601E"),$=mt(a,"00186018"),k=mt(a,"0018601C"),M=mt(a,"00186020"),U=mt(a,"00186022"),G=mt(a,"0018602A"),J=mt(a,"00186028"),X=mt(a,"00186012"),Z=mt(a,"00186014"),K=mt(a,"00186016"),ne=mt(a,"00186030");return{regionLocationMinY0:E,regionLocationMaxY1:S,regionLocationMinX0:$,regionLocationMaxX1:k,referencePixelX0:M,referencePixelY0:U,physicalDeltaX:h,physicalDeltaY:r,physicalUnitsXDirection:g,physicalUnitsYDirection:T,referencePhysicalPixelValueY:G,referencePhysicalPixelValueX:J,regionSpatialFormat:X,regionDataType:Z,regionFlags:K,transducerFrequency:ne}})}function Bo(e,i){const{MetadataModules:o}=pn;if(e===o.MULTIFRAME){const{metadata:h,frame:r}=ma(i);if(!h)return;const{PerFrameFunctionalGroupsSequence:g,SharedFunctionalGroupsSequence:T,NumberOfFrames:E}=No(h);if(g||E>1){const{shared:S,perFrame:$}=Ho(g,T,r);return{NumberOfFrames:E,PerFrameFunctionalInformation:$,SharedFunctionalInformation:S}}return{NumberOfFrames:E}}const a=Fi.get(i);if(a){if(e===o.GENERAL_STUDY)return{studyDescription:te(a["00081030"]),studyDate:te(a["00080020"]),studyTime:te(a["00080030"]),accessionNumber:te(a["00080050"])};if(e===o.GENERAL_SERIES)return{modality:te(a["00080060"]),seriesInstanceUID:te(a["0020000E"]),seriesDescription:te(a["0008103E"]),seriesNumber:ye(a["00200011"]),studyInstanceUID:te(a["0020000D"]),seriesDate:te(a["00080021"]),seriesTime:te(a["00080031"]),acquisitionDate:te(a["00080022"]),acquisitionTime:te(a["00080032"])};if(e===o.GENERAL_IMAGE)return{sopInstanceUID:te(a["00080018"]),instanceNumber:ye(a["00200013"]),lossyImageCompression:te(a["00282110"]),lossyImageCompressionRatio:ye(a["00282112"]),lossyImageCompressionMethod:te(a["00282114"])};if(e===o.PATIENT)return{patientID:te(a["00100020"]),patientName:te(a["00100010"])};if(e===o.PATIENT_STUDY)return{patientAge:ye(a["00101010"]),patientSize:ye(a["00101020"]),patientSex:te(a["00100040"]),patientWeight:ye(a["00101030"])};if(e===o.NM_MULTIFRAME_GEOMETRY){const h=te(a["00080060"]),r=ji(a,2);return{modality:h,imageType:te(a["00080008"]),imageSubType:r,imageOrientationPatient:Qi(a),imagePositionPatient:Ki(a),sliceThickness:ye(a["00180050"]),spacingBetweenSlices:ye(a["00180088"]),pixelSpacing:bt(a["00280030"],2),numberOfFrames:ye(a["00280008"]),isNMReconstructable:Jn(r)&&h.includes("NM")}}if(e===o.IMAGE_PLANE){let h=Qi(a),r=Ki(a);const g=bt(a["00280030"],2);let T=null,E=null,S=null,$=null,k=!1;return g?(E=g[0],T=g[1]):(k=!0,E=1,T=1),h?(S=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])],$=[parseFloat(h[3]),parseFloat(h[4]),parseFloat(h[5])]):(S=[1,0,0],$=[0,1,0],k=!0,h=[...S,...$]),r||(r=[0,0,0],k=!0),{frameOfReferenceUID:te(a["00200052"]),rows:ye(a["00280010"]),columns:ye(a["00280011"]),imageOrientationPatient:h,rowCosines:S,columnCosines:$,imagePositionPatient:r,sliceThickness:ye(a["00180050"]),sliceLocation:ye(a["00201041"]),pixelSpacing:g,rowPixelSpacing:E,columnPixelSpacing:T,usingDefaultValues:k}}if(e===o.ULTRASOUND_ENHANCED_REGION)return Zi(a);if(e===o.CALIBRATION&&te(a["00080060"])==="US")return{sequenceOfUltrasoundRegions:Zi(a)};if(e===o.IMAGE_URL)return xa(i,a);if(e===o.CINE)return $a(i,a);if(e===o.IMAGE_PIXEL)return{samplesPerPixel:ye(a["00280002"]),photometricInterpretation:te(a["00280004"]),rows:ye(a["00280010"]),columns:ye(a["00280011"]),bitsAllocated:ye(a["00280100"]),bitsStored:ye(a["00280101"]),highBit:te(a["00280102"]),pixelRepresentation:ye(a["00280103"]),planarConfiguration:ye(a["00280006"]),pixelAspectRatio:te(a["00280034"]),smallestPixelValue:ye(a["00280106"]),largestPixelValue:ye(a["00280107"]),redPaletteColorLookupTableDescriptor:bt(a["00281101"]),greenPaletteColorLookupTableDescriptor:bt(a["00281102"]),bluePaletteColorLookupTableDescriptor:bt(a["00281103"]),redPaletteColorLookupTableData:bt(a["00281201"]),greenPaletteColorLookupTableData:bt(a["00281202"]),bluePaletteColorLookupTableData:bt(a["00281203"])};if(e===o.VOI_LUT)return{windowCenter:bt(a["00281050"],1),windowWidth:bt(a["00281051"],1),voiLUTFunction:te(a["00281056"])};if(e===o.MODALITY_LUT)return{rescaleIntercept:ye(a["00281052"]),rescaleSlope:ye(a["00281053"]),rescaleType:te(a["00281054"])};if(e===o.SOP_COMMON)return{sopClassUID:te(a["00080016"]),sopInstanceUID:te(a["00080018"])};if(e===o.PET_ISOTOPE){const h=te(a["00540016"]);return h===void 0?void 0:{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:te(h["00181072"],0,""),radiopharmaceuticalStartDateTime:te(h["00181078"],0,""),radionuclideTotalDose:ye(h["00181074"]),radionuclideHalfLife:ye(h["00181075"])}}}if(e===o.OVERLAY_PLANE)return ya(a);if(e==="transferSyntax")return zo(i,a);if(e===o.PET_SERIES){let h=a["00280051"],r=te(a["00280051"]);return h&&h.Value&&Array.isArray(h.Value)&&(r=h.Value.join("\\")),{correctedImage:r,units:te(a["00541001"]),decayCorrection:te(a["00541102"])}}if(e===o.PET_IMAGE)return{frameReferenceTime:ye(a["00541300"]),actualFrameDuration:ye(a["00181242"])};if(e==="instance")return uo(i,Ao)}}function xa(e,i){const{transferSyntaxUID:o}=zo(e,i),a=hs(o),h=e.substring(7),r=h.replace("/frames/","/thumbnail/");let g=h.replace("/frames/","/rendered/");return a&&(g=g.replace("/rendered/1","/rendered")),{isVideo:a,rendered:g,thumbnail:r}}function $a(e,i){return{cineRate:te(i["00180040"]),numberOfFrames:ye(i["00280008"])}}function zo(e,i){return{transferSyntaxUID:te(i["00020010"])||te(i["00083002"])}}function Sa(e,i,o={},a={}){const h=ei(),{retrieveOptions:r={},streamingData:g}=a,T=g.chunkSize||Da(i,r,"chunkSize")||65536,E=$=>{if(typeof h.errorInterceptor=="function"){const k=new Error("request failed");h.errorInterceptor(k)}else console.warn("rangeRequest:Caught",$)};return new Promise(async($,k)=>{const M=Object.assign({},o);Object.keys(M).forEach(function(U){(M[U]===null||M[U]===void 0)&&delete M[U]});try{g.encodedData||(g.chunkSize=T,g.rangesFetched=0);const U=Oa(g,r),{encodedData:G,responseHeaders:J}=await Ia(e,M,U,g),X=J.get("content-type"),{totalBytes:Z}=g,K=Z===G.byteLength,ne=Ii(X,G,{isPartial:!0}),ae=Di(r,K||ne.extractDone===!0);$({...ne,imageQualityStatus:ae,percentComplete:ne.extractDone?100:G.byteLength*100/Z})}catch(U){E(U),console.error(U),k(U)}})}async function Ia(e,i,o,a){o&&(i=Object.assign(i,{Range:`bytes=${o[0]}-${o[1]}`}));let{encodedData:h}=a;if(o[1]&&h?.byteLength>o[1])return a;const r=await fetch(e,{headers:i,signal:void 0}),g=await r.arrayBuffer(),T=new Uint8Array(g),{status:E}=r;let S;h?(S=new Uint8Array(h.length+T.length),S.set(h,0),S.set(T,h.length),a.rangesFetched=1):(S=new Uint8Array(T.length),S.set(T,0),a.rangesFetched++),a.encodedData=h=S,a.responseHeaders=r.headers;const $=r.headers.get("Content-Range");return $?a.totalBytes=Number($.split("/")[1]):E!==206||!o?a.totalBytes=h?.byteLength:o[1]===""||h?.length<o[1]?a.totalBytes=h.byteLength:a.totalBytes=Number.MAX_SAFE_INTEGER,a}function Da(e,i,o){const a=i[o];if(typeof a!="function")return a;const h=Fi.get(e);return a(h,e)}function Oa(e,i){const{totalBytes:o,encodedData:a,chunkSize:h=65536}=e,{rangeIndex:r=0}=i;return r===-1&&(!o||!a)?[0,""]:r===-1||a?.byteLength>o-h?[a?.byteLength||0,""]:[a?.byteLength||0,h*(r+1)-1]}function Wi(e,i,o="application/octet-stream",a){const{streamingData:h,retrieveOptions:r={}}=a||{},g={Accept:o};let T=r.urlArguments?`${e}${e.indexOf("?")===-1?"?":"&"}${r.urlArguments}`:e;if(r.framesPath&&(T=T.replace("/frames/",r.framesPath)),h?.url!==T&&(a.streamingData={url:T}),r.rangeIndex!==void 0)return Sa(T,i,g,a);if(r.streaming)return bo(T,i,g,a);const E=ui(T,i,g),{xhr:S}=E;return E.then(function($){const k=S.getResponseHeader("Content-Type")||"application/octet-stream",M=Ii(k,new Uint8Array($));return M.imageQualityStatus=Di(r,!0),M})}const{ProgressiveIterator:eo}=ao,{ImageQualityStatus:to}=pn,La=new Set(["3.2.840.10008.1.2.4.96","1.2.840.10008.1.2.4.202","1.2.840.10008.1.2.4.203"]);function Ua(e){const i="1.2.840.10008.1.2";if(!e)return i;const o=e.split(";"),a={};o.forEach(r=>{const g=r.split("=");if(g.length!==2)return;const T=g[1].trim().replace(/"/g,"");a[g[0].trim()]=T});const h={"image/jpeg":"1.2.840.10008.1.2.4.50","image/x-dicom-rle":"1.2.840.10008.1.2.5","image/x-jls":"1.2.840.10008.1.2.4.80","image/jls":"1.2.840.10008.1.2.4.80","image/jll":"1.2.840.10008.1.2.4.70","image/jp2":"1.2.840.10008.1.2.4.90","image/jpx":"1.2.840.10008.1.2.4.92","image/jphc":"3.2.840.10008.1.2.4.96","image/jxl":"1.2.840.10008.1.2.4.140"};return a["transfer-syntax"]?a["transfer-syntax"]:e&&!Object.keys(a).length&&h[e]?h[e]:a.type&&h[a.type]?h[a.type]:h[e]?h[e]:i}function ka(){return ys}const Ma="multipart/related; type=application/octet-stream; transfer-syntax=*";function Jo(e,i={}){const o=ka(),a=new Date().getTime(),h=new eo("decompress");async function r($,k,M){h.generate(async U=>{const G=eo.as(Wi($,k,M,i));let J=10;for await(const X of G){const{pixelData:Z,imageQualityStatus:K=to.FULL_RESOLUTION,percentComplete:ne,done:ae=!0,extractDone:be=!0}=X,ve=Ua(X.contentType);if(!be&&!La.has(ve))continue;const Re=X.decodeLevel??(K===to.FULL_RESOLUTION?0:Fa(ne,i.retrieveOptions?.decodeLevel));if(!(!ae&&J<=Re))try{const le={...i,decodeLevel:Re},ce=await di(k,Z,ve,le),he=new Date().getTime();ce.loadTimeInMS=he-a,ce.transferSyntaxUID=ve,ce.imageQualityStatus=K,U.add(ce,ae),J=Re}catch(le){if(be)throw console.warn("Couldn't decode",le),le}}})}const g=i.requestType||vs.Interaction,T=i.additionalDetails||{imageId:e},E=i.priority===void 0?5:i.priority,S=e.substring(7);return o.addRequest(r.bind(this,S,e,Ma),g,T,E),{promise:h.getDonePromise(),cancelFn:void 0}}function Fa(e,i=4){const o=e/100-.02;return o>1/4?Math.min(i,0):o>1/16?Math.min(i,1):o>1/64?Math.min(i,2):Math.min(i,3)}function qo(){ni("wadors",Jo),lo(Bo)}const ja={getNumberString:ga,getNumberValue:ye,getNumberValues:bt,getValue:te,metaDataProvider:Bo},Wa={metaData:ja,findIndexOfString:Ci,getPixelData:Wi,loadImage:Jo,metaDataManager:Fi,register:qo};function Ha(){qo(),Wo()}const Na=()=>new Worker(new URL("/radiology-ai-viewer/assets/decodeImageFrameWorker-C6Q2UkgP.js",import.meta.url),{type:"module"});function Va(e={}){mo(e),Ha();const i=co(),o=e?.maxWebWorkers||Ga();i.registerWorker("dicomImageLoader",Na,{maxWorkerInstances:o})}function Ga(){return typeof navigator<"u"&&navigator.hardwareConcurrency?Math.max(1,Math.floor(navigator.hardwareConcurrency/2)):1}function Ba(e,i){if(i=i||e.transferSyntax,e.bitsAllocated===8&&i==="1.2.840.10008.1.2.4.50"&&(e.samplesPerPixel===3||e.samplesPerPixel===4))return!0}const za={IMPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2",EXPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2.1",DEFLATED_EXPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2.1.99",EXPLICIT_VR_BIG_ENDIAN:"1.2.840.10008.1.2.2",JPEG_BASELINE_PROCESS_1:"1.2.840.10008.1.2.4.50",JPEG_EXTENDED_PROCESS_2_4:"1.2.840.10008.1.2.4.51",JPEG_EXTENDED_PROCESSES_3_5:"1.2.840.10008.1.2.4.52",JPEG_SPECTRAL_SELECTION_NONHIERARCHICAL_PROCESSES_6_8:"1.2.840.10008.1.2.4.53",JPEG_SPECTRAL_SELECTION_NONHIERARCHICAL_PROCESSES_7_9:"1.2.840.10008.1.2.4.54",JPEG_FULL_PROGRESSION_NONHIERARCHICAL_PROCESSES_10_12:"1.2.840.10008.1.2.4.55",JPEG_FULL_PROGRESSION_NONHIERARCHICAL_PROCESSES_11_13:"1.2.840.10008.1.2.4.56",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_14:"1.2.840.10008.1.2.4.57",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_15:"1.2.840.10008.1.2.4.58",JPEG_EXTENDED_HIERARCHICAL_PROCESSES_16_18:"1.2.840.10008.1.2.4.59",JPEG_EXTENDED_HIERARCHICAL_PROCESSES_17_19:"1.2.840.10008.1.2.4.60",JPEG_SPECTRAL_SELECTION_HIERARCHICAL_PROCESSES_20_22:"1.2.840.10008.1.2.4.61",JPEG_SPECTRAL_SELECTION_HIERARCHICAL_PROCESSES_21_23:"1.2.840.10008.1.2.4.62",JPEG_FULL_PROGRESSION_HIERARCHICAL_PROCESSES_24_26:"1.2.840.10008.1.2.4.63",JPEG_FULL_PROGRESSION_HIERARCHICAL_PROCESSES_25_27:"1.2.840.10008.1.2.4.64",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_28:"1.2.840.10008.1.2.4.65",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_29:"1.2.840.10008.1.2.4.66",JPEG_LOSSLESS_NONHIERARCHICAL_FIRST_ORDER_PREDICTION_PROCESS_14:"1.2.840.10008.1.2.4.70",JPEG_LS_LOSSLESS_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.80",JPEG_LS_LOSSY_NEAR_LOSSLESS_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.81",JPEG_2000_IMAGE_COMPRESSION_LOSSLESS_ONLY:"1.2.840.10008.1.2.4.90",JPEG_2000_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.91",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_LOSSLESS_ONLY:"1.2.840.10008.1.2.4.92",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.93",JPIP_REFERENCED:"1.2.840.10008.1.2.4.94",JPIP_REFERENCED_DEFLATE:"1.2.840.10008.1.2.4.95",MPEG2_MAIN_PROFILE_MAIN_LEVEL:"1.2.840.10008.1.2.4.100",MPEG4_AVC_H264_HIGH_PROFILE_LEVEL_4_1:"1.2.840.10008.1.2.4.101",MPEG4_AVC_H264_BD_COMPATIBLE_HIGH_PROFILE_LEVEL_4_1:"1.2.840.10008.1.2.4.102",MPEG4_AVC_H264_HIGH_PROFILE_FOR_2D_VIDEO:"1.2.840.10008.1.2.4.103",MPEG4_AVC_H264_HIGH_PROFILE_FOR_3D_VIDEO:"1.2.840.10008.1.2.4.104",JPIP_LOSSLESS:"1.2.840.10008.1.2.4.96",JPIP_PART2_MULTICOMPONENT_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.97",RFC_2557_MIME_ENCAPSULATION:"1.2.840.10008.1.2.6.1",JPEG_XR_IMAGE_COMPRESSION:"1.2.840.10008.1.2.6.2",JPEG_2000_IMAGE_COMPRESSION_LOSSLESS_ONLY_RETIRED:"1.2.840.10008.1.2.4.90R",JPEG_2000_IMAGE_COMPRESSION_RETIRED:"1.2.840.10008.1.2.4.91R",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_LOSSLESS_ONLY_RETIRED:"1.2.840.10008.1.2.4.92R",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_RETIRED:"1.2.840.10008.1.2.4.93R"},Ja=Object.freeze(Object.defineProperty({__proto__:null,transferSyntaxes:za},Symbol.toStringTag,{value:"Module"}));function qa(e,i){const{rows:o,columns:a,data:h}=e,{rows:r,columns:g,data:T}=i,E=[],S=[],$=[];for(let k=0;k<g;k++){const M=k*(a-1)/(g-1);E[k]=Math.floor(M),S[k]=Math.min(E[k]+1,a-1),$[k]=M-E[k]}for(let k=0;k<r;k++){const M=k*(o-1)/(r-1),U=Math.floor(M)*a,G=Math.min(U+a,(o-1)*a),J=M-Math.floor(M),X=1-J,Z=k*g;for(let K=0;K<g;K++){const ne=h[U+E[K]],ae=h[U+S[K]],be=h[G+E[K]],ve=h[G+S[K]],Re=1-$[K];T[Z+K]=(ne*Re+ae*$[K])*X+(be*Re+ve*$[K])*J}}return T}function Ya(e,i){const{rows:o,columns:a,pixelData:h,samplesPerPixel:r=1}=e,{rows:g,columns:T,pixelData:E}=i,S=[];for(let $=0;$<T;$++){const k=$*(a-1)/(T-1);S[$]=Math.floor(k)*r}for(let $=0;$<g;$++){const k=$*(o-1)/(g-1),M=Math.floor(k)*a*r,U=$*T;for(let G=0;G<T;G++)for(let J=0;J<r;J++)E[U+G+J]=h[M+S[G]+J]}return E}async function Ei(e,i){let o=i.buffer,a=i.byteOffset;const h=i.length;if(e.bitsAllocated===16)a%2&&(o=o.slice(a),a=0),e.pixelRepresentation===0?e.pixelData=new Uint16Array(o,a,h/2):e.pixelData=new Int16Array(o,a,h/2);else if(e.bitsAllocated===8||e.bitsAllocated===1)e.pixelData=i;else if(e.bitsAllocated===32){if(a%2&&(o=o.slice(a),a=0),e.floatPixelData||e.doubleFloatPixelData)throw new Error("Float pixel data is not supported for parsing into ImageFrame");e.pixelRepresentation===0?e.pixelData=new Uint32Array(o,a,h/4):e.pixelRepresentation===1?e.pixelData=new Int32Array(o,a,h/4):e.pixelData=new Float32Array(o,a,h/4)}return e}function Xa(e){return(e&255)<<8|e>>8&255}async function Yo(e,i){if(e.bitsAllocated===16){let o=i.buffer,a=i.byteOffset;const h=i.length;a%2&&(o=o.slice(a),a=0),e.pixelRepresentation===0?e.pixelData=new Uint16Array(o,a,h/2):e.pixelData=new Int16Array(o,a,h/2);for(let r=0;r<e.pixelData.length;r++)e.pixelData[r]=Xa(e.pixelData[r])}else e.bitsAllocated===8&&(e.pixelData=i);return e}async function Xo(e,i){if(e.bitsAllocated===8)return e.planarConfiguration?Ka(e,i):Qa(e,i);if(e.bitsAllocated===16)return Za(e,i);throw new Error("unsupported pixel format for RLE")}function Qa(e,i){const o=i,a=e.rows*e.columns,h=new ArrayBuffer(a*e.samplesPerPixel),r=new DataView(o.buffer,o.byteOffset),g=new Int8Array(o.buffer,o.byteOffset),T=new Int8Array(h);let E=0;const S=r.getInt32(0,!0);for(let $=0;$<S;++$){E=$;let k=r.getInt32(($+1)*4,!0),M=r.getInt32(($+2)*4,!0);M===0&&(M=o.length);const U=a*S;for(;k<M;){const G=g[k++];if(G>=0&&G<=127)for(let J=0;J<G+1&&E<U;++J)T[E]=g[k++],E+=e.samplesPerPixel;else if(G<=-1&&G>=-127){const J=g[k++];for(let X=0;X<-G+1&&E<U;++X)T[E]=J,E+=e.samplesPerPixel}}}return e.pixelData=new Uint8Array(h),e}function Ka(e,i){const o=i,a=e.rows*e.columns,h=new ArrayBuffer(a*e.samplesPerPixel),r=new DataView(o.buffer,o.byteOffset),g=new Int8Array(o.buffer,o.byteOffset),T=new Int8Array(h);let E=0;const S=r.getInt32(0,!0);for(let $=0;$<S;++$){E=$*a;let k=r.getInt32(($+1)*4,!0),M=r.getInt32(($+2)*4,!0);M===0&&(M=o.length);const U=a*S;for(;k<M;){const G=g[k++];if(G>=0&&G<=127)for(let J=0;J<G+1&&E<U;++J)T[E]=g[k++],E++;else if(G<=-1&&G>=-127){const J=g[k++];for(let X=0;X<-G+1&&E<U;++X)T[E]=J,E++}}}return e.pixelData=new Uint8Array(h),e}function Za(e,i){const o=i,a=e.rows*e.columns,h=new ArrayBuffer(a*e.samplesPerPixel*2),r=new DataView(o.buffer,o.byteOffset),g=new Int8Array(o.buffer,o.byteOffset),T=new Int8Array(h),E=r.getInt32(0,!0);for(let S=0;S<E;++S){let $=0;const k=S===0?1:0;let M=r.getInt32((S+1)*4,!0),U=r.getInt32((S+2)*4,!0);for(U===0&&(U=o.length);M<U;){const G=g[M++];if(G>=0&&G<=127)for(let J=0;J<G+1&&$<a;++J)T[$*2+k]=g[M++],$++;else if(G<=-1&&G>=-127){const J=g[M++];for(let X=0;X<-G+1&&$<a;++X)T[$*2+k]=J,$++}}}return e.pixelRepresentation===0?e.pixelData=new Uint16Array(h):e.pixelData=new Int16Array(h),e}var _i={exports:{}},ro;function eu(){return ro||(ro=1,(function(e,i){var o=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),(function(h){h=h||{};var r=typeof h<"u"?h:{},g,T;r.ready=new Promise(function(t,n){g=t,T=n});var E=Object.assign({},r),S="./this.program",$=(t,n)=>{throw n},k=typeof window=="object",M=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",G="";function J(t){return r.locateFile?r.locateFile(t,G):G+t}var X,Z,K;if(U){var ne=Wn,ae=Wn;M?G=ae.dirname(G)+"/":G=__dirname+"/",X=(t,n)=>(t=Yt(t)?new URL(t):ae.normalize(t),ne.readFileSync(t,n?void 0:"utf8")),K=t=>{var n=X(t,!0);return n.buffer||(n=new Uint8Array(n)),n},Z=(t,n,f)=>{t=Yt(t)?new URL(t):ae.normalize(t),ne.readFile(t,function(v,_){v?f(v):n(_.buffer)})},process.argv.length>1&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof Gr))throw t}),process.on("unhandledRejection",function(t){throw t}),$=(t,n)=>{throw process.exitCode=t,n},r.inspect=function(){return"[Emscripten Module object]"}}else(k||M)&&(M?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),a&&(G=a),G.indexOf("blob:")!==0?G=G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1):G="",X=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(null),n.responseText},M&&(K=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),Z=(t,n,f)=>{var v=new XMLHttpRequest;v.open("GET",t,!0),v.responseType="arraybuffer",v.onload=()=>{if(v.status==200||v.status==0&&v.response){n(v.response);return}f()},v.onerror=f,v.send(null)});var be=r.print||console.log.bind(console),ve=r.printErr||console.warn.bind(console);Object.assign(r,E),E=null,r.arguments&&r.arguments,r.thisProgram&&(S=r.thisProgram),r.quit&&($=r.quit);var Re;r.wasmBinary&&(Re=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Pt("no native wasm support detected");var le,ce=!1;function he(t,n){t||Pt(n)}var xe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function De(t,n,f){for(var v=n+f,_=n;t[_]&&!(_>=v);)++_;if(_-n>16&&t.buffer&&xe)return xe.decode(t.subarray(n,_));for(var b="";n<_;){var w=t[n++];if(!(w&128)){b+=String.fromCharCode(w);continue}var C=t[n++]&63;if((w&224)==192){b+=String.fromCharCode((w&31)<<6|C);continue}var R=t[n++]&63;if((w&240)==224?w=(w&15)<<12|C<<6|R:w=(w&7)<<18|C<<12|R<<6|t[n++]&63,w<65536)b+=String.fromCharCode(w);else{var j=w-65536;b+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return b}function Ue(t,n){return t?De(ge,t,n):""}function ie(t,n,f,v){if(!(v>0))return 0;for(var _=f,b=f+v-1,w=0;w<t.length;++w){var C=t.charCodeAt(w);if(C>=55296&&C<=57343){var R=t.charCodeAt(++w);C=65536+((C&1023)<<10)|R&1023}if(C<=127){if(f>=b)break;n[f++]=C}else if(C<=2047){if(f+1>=b)break;n[f++]=192|C>>6,n[f++]=128|C&63}else if(C<=65535){if(f+2>=b)break;n[f++]=224|C>>12,n[f++]=128|C>>6&63,n[f++]=128|C&63}else{if(f+3>=b)break;n[f++]=240|C>>18,n[f++]=128|C>>12&63,n[f++]=128|C>>6&63,n[f++]=128|C&63}}return n[f]=0,f-_}function Ce(t,n,f){return ie(t,ge,n,f)}function Ee(t){for(var n=0,f=0;f<t.length;++f){var v=t.charCodeAt(f);v<=127?n++:v<=2047?n+=2:v>=55296&&v<=57343?(n+=4,++f):n+=3}return n}var we,$e,ge,fe,Ae,Ge,Pe,rr,nr;function ir(t){we=t,r.HEAP8=$e=new Int8Array(t),r.HEAP16=fe=new Int16Array(t),r.HEAP32=Ge=new Int32Array(t),r.HEAPU8=ge=new Uint8Array(t),r.HEAPU16=Ae=new Uint16Array(t),r.HEAPU32=Pe=new Uint32Array(t),r.HEAPF32=rr=new Float32Array(t),r.HEAPF64=nr=new Float64Array(t)}r.INITIAL_MEMORY;var dt,Ot=[],Fr=[],jr=[];function Wr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)pt(r.preRun.shift());ht(Ot)}function hn(){ht(Fr)}function Hr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Lt(r.postRun.shift());ht(jr)}function pt(t){Ot.unshift(t)}function it(t){Fr.unshift(t)}function Lt(t){jr.unshift(t)}var Ut=0,wt=null;function Ht(t){Ut++,r.monitorRunDependencies&&r.monitorRunDependencies(Ut)}function Nr(t){if(Ut--,r.monitorRunDependencies&&r.monitorRunDependencies(Ut),Ut==0&&wt){var n=wt;wt=null,n()}}function Pt(t){r.onAbort&&r.onAbort(t),t="Aborted("+t+")",ve(t),ce=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw T(n),n}var Fe="data:application/octet-stream;base64,";function ke(t){return t.startsWith(Fe)}function Yt(t){return t.startsWith("file://")}var Be;Be="libjpegturbowasm_decode.wasm",ke(Be)||(Be=J(Be));function Vr(t){try{if(t==Be&&Re)return new Uint8Array(Re);if(K)return K(t);throw"both async and sync fetching of the wasm failed"}catch(n){Pt(n)}}function or(){if(!Re&&(k||M)){if(typeof fetch=="function"&&!Yt(Be))return fetch(Be,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Be+"'";return t.arrayBuffer()}).catch(function(){return Vr(Be)});if(Z)return new Promise(function(t,n){Z(Be,function(f){t(new Uint8Array(f))},n)})}return Promise.resolve().then(function(){return Vr(Be)})}function br(){var t={a:D};function n(w,C){var R=w.exports;r.asm=R,le=r.asm.K,ir(le.buffer),dt=r.asm.M,it(r.asm.L),Nr()}Ht();function f(w){n(w.instance)}function v(w){return or().then(function(C){return WebAssembly.instantiate(C,t)}).then(function(C){return C}).then(w,function(C){ve("failed to asynchronously prepare wasm: "+C),Pt(C)})}function _(){return!Re&&typeof WebAssembly.instantiateStreaming=="function"&&!ke(Be)&&!Yt(Be)&&!U&&typeof fetch=="function"?fetch(Be,{credentials:"same-origin"}).then(function(w){var C=WebAssembly.instantiateStreaming(w,t);return C.then(f,function(R){return ve("wasm streaming compile failed: "+R),ve("falling back to ArrayBuffer instantiation"),v(f)})}):v(f)}if(r.instantiateWasm)try{var b=r.instantiateWasm(t,n);return b}catch(w){ve("Module.instantiateWasm callback failed with error: "+w),T(w)}return _().catch(T),{}}function Gr(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function ht(t){for(;t.length>0;)t.shift()(r)}function sr(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(n){Pe[this.ptr+4>>2]=n},this.get_type=function(){return Pe[this.ptr+4>>2]},this.set_destructor=function(n){Pe[this.ptr+8>>2]=n},this.get_destructor=function(){return Pe[this.ptr+8>>2]},this.set_refcount=function(n){Ge[this.ptr>>2]=n},this.set_caught=function(n){n=n?1:0,$e[this.ptr+12>>0]=n},this.get_caught=function(){return $e[this.ptr+12>>0]!=0},this.set_rethrown=function(n){n=n?1:0,$e[this.ptr+13>>0]=n},this.get_rethrown=function(){return $e[this.ptr+13>>0]!=0},this.init=function(n,f){this.set_adjusted_ptr(0),this.set_type(n),this.set_destructor(f),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var n=Ge[this.ptr>>2];Ge[this.ptr>>2]=n+1},this.release_ref=function(){var n=Ge[this.ptr>>2];return Ge[this.ptr>>2]=n-1,n===1},this.set_adjusted_ptr=function(n){Pe[this.ptr+16>>2]=n},this.get_adjusted_ptr=function(){return Pe[this.ptr+16>>2]},this.get_exception_ptr=function(){var n=P(this.get_type());if(n)return Pe[this.excPtr>>2];var f=this.get_adjusted_ptr();return f!==0?f:this.excPtr}}function Tt(t,n,f){var v=new sr(t);throw v.init(n,f),t}var Oe={};function je(t){for(;t.length;){var n=t.pop(),f=t.pop();f(n)}}function Se(t){return this.fromWireType(Ge[t>>2])}var kt={},vt={},ze={},wr=48,Pr=57;function ar(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var n=t.charCodeAt(0);return n>=wr&&n<=Pr?"_"+t:t}function Mt(t,n){return t=ar(t),new Function("body","return function "+t+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(n)}function Te(t,n){var f=Mt(n,function(v){this.name=n,this.message=v;var _=new Error(v).stack;_!==void 0&&(this.stack=this.toString()+`
`+_.replace(/^Error(:[^\n]*)?\n/,""))});return f.prototype=Object.create(t.prototype),f.prototype.constructor=f,f.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},f}var $t=void 0;function se(t){throw new $t(t)}function Xe(t,n,f){t.forEach(function(C){ze[C]=n});function v(C){var R=f(C);R.length!==t.length&&se("Mismatched type converter count");for(var j=0;j<t.length;++j)Ke(t[j],R[j])}var _=new Array(n.length),b=[],w=0;n.forEach((C,R)=>{vt.hasOwnProperty(C)?_[R]=vt[C]:(b.push(C),kt.hasOwnProperty(C)||(kt[C]=[]),kt[C].push(()=>{_[R]=vt[C],++w,w===b.length&&v(_)}))}),b.length===0&&v(_)}function Ne(t){var n=Oe[t];delete Oe[t];var f=n.rawConstructor,v=n.rawDestructor,_=n.fields,b=_.map(w=>w.getterReturnType).concat(_.map(w=>w.setterArgumentType));Xe([t],b,w=>{var C={};return _.forEach((R,j)=>{var B=R.fieldName,Y=w[j],q=R.getter,oe=R.getterContext,re=w[j+_.length],me=R.setter,Ve=R.setterContext;C[B]={read:Ye=>Y.fromWireType(q(oe,Ye)),write:(Ye,Mn)=>{var qt=[];me(Ve,Ye,re.toWireType(qt,Mn)),je(qt)}}}),[{name:n.name,fromWireType:function(R){var j={};for(var B in C)j[B]=C[B].read(R);return v(R),j},toWireType:function(R,j){for(var B in C)if(!(B in j))throw new TypeError('Missing field:  "'+B+'"');var Y=f();for(B in C)C[B].write(Y,j[B]);return R!==null&&R.push(v,Y),Y},argPackAdvance:8,readValueFromPointer:Se,destructorFunction:v}]})}function Qe(t,n,f,v,_){}function Me(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function Nt(){for(var t=new Array(256),n=0;n<256;++n)t[n]=String.fromCharCode(n);ue=t}var ue=void 0;function _e(t){for(var n="",f=t;ge[f];)n+=ue[ge[f++]];return n}var Ct=void 0;function de(t){throw new Ct(t)}function Ke(t,n,f={}){if(!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");var v=n.name;if(t||de('type "'+v+'" must have a positive integer typeid pointer'),vt.hasOwnProperty(t)){if(f.ignoreDuplicateRegistrations)return;de("Cannot register type '"+v+"' twice")}if(vt[t]=n,delete ze[t],kt.hasOwnProperty(t)){var _=kt[t];delete kt[t],_.forEach(b=>b())}}function gt(t,n,f,v,_){var b=Me(f);n=_e(n),Ke(t,{name:n,fromWireType:function(w){return!!w},toWireType:function(w,C){return C?v:_},argPackAdvance:8,readValueFromPointer:function(w){var C;if(f===1)C=$e;else if(f===2)C=fe;else if(f===4)C=Ge;else throw new TypeError("Unknown boolean type size: "+n);return this.fromWireType(C[w>>b])},destructorFunction:null})}function ur(t){if(!(this instanceof St)||!(t instanceof St))return!1;for(var n=this.$$.ptrType.registeredClass,f=this.$$.ptr,v=t.$$.ptrType.registeredClass,_=t.$$.ptr;n.baseClass;)f=n.upcast(f),n=n.baseClass;for(;v.baseClass;)_=v.upcast(_),v=v.baseClass;return n===v&&f===_}function Br(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function Xt(t){function n(f){return f.$$.ptrType.registeredClass.name}de(n(t)+" instance already deleted")}var cr=!1;function Ft(t){}function He(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function ot(t){t.count.value-=1;var n=t.count.value===0;n&&He(t)}function pe(t,n,f){if(n===f)return t;if(f.baseClass===void 0)return null;var v=pe(t,n,f.baseClass);return v===null?null:f.downcast(v)}var We={};function jt(){return Object.keys(at).length}function Vt(){var t=[];for(var n in at)at.hasOwnProperty(n)&&t.push(at[n]);return t}var Qt=[];function Kt(){for(;Qt.length;){var t=Qt.pop();t.$$.deleteScheduled=!1,t.delete()}}var st=void 0;function zr(t){st=t,Qt.length&&st&&st(Kt)}function vn(){r.getInheritedInstanceCount=jt,r.getLiveInheritedInstances=Vt,r.flushPendingDeletes=Kt,r.setDelayFunction=zr}var at={};function Jr(t,n){for(n===void 0&&de("ptr should not be undefined");t.baseClass;)n=t.upcast(n),t=t.baseClass;return n}function Gt(t,n){return n=Jr(t,n),at[n]}function lr(t,n){(!n.ptrType||!n.ptr)&&se("makeClassHandle requires ptr and ptrType");var f=!!n.smartPtrType,v=!!n.smartPtr;return f!==v&&se("Both smartPtrType and smartPtr must be specified"),n.count={value:1},rt(Object.create(t,{$$:{value:n}}))}function gn(t){var n=this.getPointee(t);if(!n)return this.destructor(t),null;var f=Gt(this.registeredClass,n);if(f!==void 0){if(f.$$.count.value===0)return f.$$.ptr=n,f.$$.smartPtr=t,f.clone();var v=f.clone();return this.destructor(t),v}function _(){return this.isSmartPointer?lr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:n,smartPtrType:this,smartPtr:t}):lr(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var b=this.registeredClass.getActualType(n),w=We[b];if(!w)return _.call(this);var C;this.isConst?C=w.constPointerType:C=w.pointerType;var R=pe(n,this.registeredClass,C.registeredClass);return R===null?_.call(this):this.isSmartPointer?lr(C.registeredClass.instancePrototype,{ptrType:C,ptr:R,smartPtrType:this,smartPtr:t}):lr(C.registeredClass.instancePrototype,{ptrType:C,ptr:R})}function rt(t){return typeof FinalizationRegistry>"u"?(rt=n=>n,t):(cr=new FinalizationRegistry(n=>{ot(n.$$)}),rt=n=>{var f=n.$$,v=!!f.smartPtr;if(v){var _={$$:f};cr.register(n,_,n)}return n},Ft=n=>cr.unregister(n),rt(t))}function Tr(){if(this.$$.ptr||Xt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=rt(Object.create(Object.getPrototypeOf(this),{$$:{value:Br(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Zt(){this.$$.ptr||Xt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&de("Object already scheduled for deletion"),Ft(this),ot(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ut(){return!this.$$.ptr}function Cr(){return this.$$.ptr||Xt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&de("Object already scheduled for deletion"),Qt.push(this),Qt.length===1&&st&&st(Kt),this.$$.deleteScheduled=!0,this}function Wt(){St.prototype.isAliasOf=ur,St.prototype.clone=Tr,St.prototype.delete=Zt,St.prototype.isDeleted=ut,St.prototype.deleteLater=Cr}function St(){}function fr(t,n,f){if(t[n].overloadTable===void 0){var v=t[n];t[n]=function(){return t[n].overloadTable.hasOwnProperty(arguments.length)||de("Function '"+f+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[n].overloadTable+")!"),t[n].overloadTable[arguments.length].apply(this,arguments)},t[n].overloadTable=[],t[n].overloadTable[v.argCount]=v}}function Ze(t,n,f){r.hasOwnProperty(t)?(de("Cannot register public name '"+t+"' twice"),fr(r,t,t),r.hasOwnProperty(f)&&de("Cannot register multiple overloads of a function with the same number of arguments ("+f+")!"),r[t].overloadTable[f]=n):r[t]=n}function yn(t,n,f,v,_,b,w,C){this.name=t,this.constructor=n,this.instancePrototype=f,this.rawDestructor=v,this.baseClass=_,this.getActualType=b,this.upcast=w,this.downcast=C,this.pureVirtualFunctions=[]}function It(t,n,f){for(;n!==f;)n.upcast||de("Expected null or instance of "+f.name+", got an instance of "+n.name),t=n.upcast(t),n=n.baseClass;return t}function qr(t,n){if(n===null)return this.isReference&&de("null is not a valid "+this.name),0;n.$$||de('Cannot pass "'+zt(n)+'" as a '+this.name),n.$$.ptr||de("Cannot pass deleted object as a pointer of type "+this.name);var f=n.$$.ptrType.registeredClass,v=It(n.$$.ptr,f,this.registeredClass);return v}function Er(t,n){var f;if(n===null)return this.isReference&&de("null is not a valid "+this.name),this.isSmartPointer?(f=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,f),f):0;n.$$||de('Cannot pass "'+zt(n)+'" as a '+this.name),n.$$.ptr||de("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&n.$$.ptrType.isConst&&de("Cannot convert argument of type "+(n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name)+" to parameter type "+this.name);var v=n.$$.ptrType.registeredClass;if(f=It(n.$$.ptr,v,this.registeredClass),this.isSmartPointer)switch(n.$$.smartPtr===void 0&&de("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:n.$$.smartPtrType===this?f=n.$$.smartPtr:de("Cannot convert argument of type "+(n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:f=n.$$.smartPtr;break;case 2:if(n.$$.smartPtrType===this)f=n.$$.smartPtr;else{var _=n.clone();f=this.rawShare(f,At.toHandle(function(){_.delete()})),t!==null&&t.push(this.rawDestructor,f)}break;default:de("Unsupporting sharing policy")}return f}function _n(t,n){if(n===null)return this.isReference&&de("null is not a valid "+this.name),0;n.$$||de('Cannot pass "'+zt(n)+'" as a '+this.name),n.$$.ptr||de("Cannot pass deleted object as a pointer of type "+this.name),n.$$.ptrType.isConst&&de("Cannot convert argument of type "+n.$$.ptrType.name+" to parameter type "+this.name);var f=n.$$.ptrType.registeredClass,v=It(n.$$.ptr,f,this.registeredClass);return v}function Yr(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function yt(t){this.rawDestructor&&this.rawDestructor(t)}function _t(t){t!==null&&t.delete()}function Xr(){Je.prototype.getPointee=Yr,Je.prototype.destructor=yt,Je.prototype.argPackAdvance=8,Je.prototype.readValueFromPointer=Se,Je.prototype.deleteObject=_t,Je.prototype.fromWireType=gn}function Je(t,n,f,v,_,b,w,C,R,j,B){this.name=t,this.registeredClass=n,this.isReference=f,this.isConst=v,this.isSmartPointer=_,this.pointeeType=b,this.sharingPolicy=w,this.rawGetPointee=C,this.rawConstructor=R,this.rawShare=j,this.rawDestructor=B,!_&&n.baseClass===void 0?v?(this.toWireType=qr,this.destructorFunction=null):(this.toWireType=_n,this.destructorFunction=null):this.toWireType=Er}function Qr(t,n,f){r.hasOwnProperty(t)||se("Replacing nonexistant public symbol"),r[t].overloadTable!==void 0&&f!==void 0||(r[t]=n,r[t].argCount=f)}function Ar(t,n,f){var v=r["dynCall_"+t];return f&&f.length?v.apply(null,[n].concat(f)):v.call(null,n)}var dr=[];function Le(t){var n=dr[t];return n||(t>=dr.length&&(dr.length=t+1),dr[t]=n=dt.get(t)),n}function Et(t,n,f){if(t.includes("j"))return Ar(t,n,f);var v=Le(n).apply(null,f);return v}function pr(t,n){var f=[];return function(){return f.length=0,Object.assign(f,arguments),Et(t,n,f)}}function et(t,n){t=_e(t);function f(){return t.includes("j")?pr(t,n):Le(n)}var v=f();return typeof v!="function"&&de("unknown function pointer with signature "+t+": "+n),v}var Kr=void 0;function nt(t){var n=Q(t),f=_e(n);return z(n),f}function ct(t,n){var f=[],v={};function _(b){if(!v[b]&&!vt[b]){if(ze[b]){ze[b].forEach(_);return}f.push(b),v[b]=!0}}throw n.forEach(_),new Kr(t+": "+f.map(nt).join([", "]))}function hr(t,n,f,v,_,b,w,C,R,j,B,Y,q){B=_e(B),b=et(_,b),C&&(C=et(w,C)),j&&(j=et(R,j)),q=et(Y,q);var oe=ar(B);Ze(oe,function(){ct("Cannot construct "+B+" due to unbound types",[v])}),Xe([t,n,f],v?[v]:[],function(re){re=re[0];var me,Ve;v?(me=re.registeredClass,Ve=me.instancePrototype):Ve=St.prototype;var Ye=Mt(oe,function(){if(Object.getPrototypeOf(this)!==Mn)throw new Ct("Use 'new' to construct "+B);if(qt.constructor_body===void 0)throw new Ct(B+" has no accessible constructor");var Ni=qt.constructor_body[arguments.length];if(Ni===void 0)throw new Ct("Tried to invoke ctor of "+B+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(qt.constructor_body).toString()+") parameters instead!");return Ni.apply(this,arguments)}),Mn=Object.create(Ve,{constructor:{value:Ye}});Ye.prototype=Mn;var qt=new yn(B,Ye,Mn,q,me,b,C,j),ri=new Je(B,qt,!0,!1,!1),qn=new Je(B+"*",qt,!1,!1,!1),Hi=new Je(B+" const*",qt,!1,!0,!1);return We[t]={pointerType:qn,constPointerType:Hi},Qr(oe,Ye),[ri,qn,Hi]})}function vr(t,n){for(var f=[],v=0;v<t;v++)f.push(Pe[n+v*4>>2]);return f}function mn(t,n){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var f=Mt(t.name||"unknownFunctionName",function(){});f.prototype=t.prototype;var v=new f,_=t.apply(v,n);return _ instanceof Object?_:v}function gr(t,n,f,v,_){var b=n.length;b<2&&de("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var w=n[1]!==null&&f!==null,C=!1,R=1;R<n.length;++R)if(n[R]!==null&&n[R].destructorFunction===void 0){C=!0;break}for(var j=n[0].name!=="void",B="",Y="",R=0;R<b-2;++R)B+=(R!==0?", ":"")+"arg"+R,Y+=(R!==0?", ":"")+"arg"+R+"Wired";var q="return function "+ar(t)+"("+B+`) {
if (arguments.length !== `+(b-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(b-2)+` args!');
}
`;C&&(q+=`var destructors = [];
`);var oe=C?"destructors":"null",re=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],me=[de,v,_,je,n[0],n[1]];w&&(q+="var thisWired = classParam.toWireType("+oe+`, this);
`);for(var R=0;R<b-2;++R)q+="var arg"+R+"Wired = argType"+R+".toWireType("+oe+", arg"+R+"); // "+n[R+2].name+`
`,re.push("argType"+R),me.push(n[R+2]);if(w&&(Y="thisWired"+(Y.length>0?", ":"")+Y),q+=(j?"var rv = ":"")+"invoker(fn"+(Y.length>0?", ":"")+Y+`);
`,C)q+=`runDestructors(destructors);
`;else for(var R=w?1:2;R<n.length;++R){var Ve=R===1?"thisWired":"arg"+(R-2)+"Wired";n[R].destructorFunction!==null&&(q+=Ve+"_dtor("+Ve+"); // "+n[R].name+`
`,re.push(Ve+"_dtor"),me.push(n[R].destructorFunction))}j&&(q+=`var ret = retType.fromWireType(rv);
return ret;
`),q+=`}
`,re.push(q);var Ye=mn(Function,re).apply(null,me);return Ye}function Ie(t,n,f,v,_,b){he(n>0);var w=vr(n,f);_=et(v,_),Xe([],[t],function(C){C=C[0];var R="constructor "+C.name;if(C.registeredClass.constructor_body===void 0&&(C.registeredClass.constructor_body=[]),C.registeredClass.constructor_body[n-1]!==void 0)throw new Ct("Cannot register multiple constructors with identical number of parameters ("+(n-1)+") for class '"+C.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return C.registeredClass.constructor_body[n-1]=()=>{ct("Cannot construct "+C.name+" due to unbound types",w)},Xe([],w,function(j){return j.splice(1,0,null),C.registeredClass.constructor_body[n-1]=gr(R,j,null,_,b),[]}),[]})}function Rr(t,n,f,v,_,b,w,C){var R=vr(f,v);n=_e(n),b=et(_,b),Xe([],[t],function(j){j=j[0];var B=j.name+"."+n;n.startsWith("@@")&&(n=Symbol[n.substring(2)]),C&&j.registeredClass.pureVirtualFunctions.push(n);function Y(){ct("Cannot call "+B+" due to unbound types",R)}var q=j.registeredClass.instancePrototype,oe=q[n];return oe===void 0||oe.overloadTable===void 0&&oe.className!==j.name&&oe.argCount===f-2?(Y.argCount=f-2,Y.className=j.name,q[n]=Y):(fr(q,n,B),q[n].overloadTable[f-2]=Y),Xe([],R,function(re){var me=gr(B,re,j,b,w);return q[n].overloadTable===void 0?(me.argCount=f-2,q[n]=me):q[n].overloadTable[f-2]=me,[]}),[]})}var yr=[],qe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function xr(t){t>4&&--qe[t].refcount===0&&(qe[t]=void 0,yr.push(t))}function lt(){for(var t=0,n=5;n<qe.length;++n)qe[n]!==void 0&&++t;return t}function Zr(){for(var t=5;t<qe.length;++t)if(qe[t]!==void 0)return qe[t];return null}function Bt(){r.count_emval_handles=lt,r.get_first_emval=Zr}var At={toValue:t=>(t||de("Cannot use deleted val. handle = "+t),qe[t].value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var n=yr.length?yr.pop():qe.length;return qe[n]={refcount:1,value:t},n}}}};function bn(t,n){n=_e(n),Ke(t,{name:n,fromWireType:function(f){var v=At.toValue(f);return xr(f),v},toWireType:function(f,v){return At.toHandle(v)},argPackAdvance:8,readValueFromPointer:Se,destructorFunction:null})}function zt(t){if(t===null)return"null";var n=typeof t;return n==="object"||n==="array"||n==="function"?t.toString():""+t}function ft(t,n){switch(n){case 2:return function(f){return this.fromWireType(rr[f>>2])};case 3:return function(f){return this.fromWireType(nr[f>>3])};default:throw new TypeError("Unknown float type: "+t)}}function en(t,n,f){var v=Me(f);n=_e(n),Ke(t,{name:n,fromWireType:function(_){return _},toWireType:function(_,b){return b},argPackAdvance:8,readValueFromPointer:ft(n,v),destructorFunction:null})}function wn(t,n,f){switch(n){case 0:return f?function(_){return $e[_]}:function(_){return ge[_]};case 1:return f?function(_){return fe[_>>1]}:function(_){return Ae[_>>1]};case 2:return f?function(_){return Ge[_>>2]}:function(_){return Pe[_>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Pn(t,n,f,v,_){n=_e(n);var b=Me(f),w=Y=>Y;if(v===0){var C=32-8*f;w=Y=>Y<<C>>>C}var R=n.includes("unsigned"),j=(Y,q)=>{},B;R?B=function(Y,q){return j(q,this.name),q>>>0}:B=function(Y,q){return j(q,this.name),q},Ke(t,{name:n,fromWireType:w,toWireType:B,argPackAdvance:8,readValueFromPointer:wn(n,b,v!==0),destructorFunction:null})}function tn(t,n,f){var v=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],_=v[n];function b(w){w=w>>2;var C=Pe,R=C[w],j=C[w+1];return new _(we,j,R)}f=_e(f),Ke(t,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{ignoreDuplicateRegistrations:!0})}function _r(t,n){n=_e(n);var f=n==="std::string";Ke(t,{name:n,fromWireType:function(v){var _=Pe[v>>2],b=v+4,w;if(f)for(var C=b,R=0;R<=_;++R){var j=b+R;if(R==_||ge[j]==0){var B=j-C,Y=Ue(C,B);w===void 0?w=Y:(w+="\0",w+=Y),C=j+1}}else{for(var q=new Array(_),R=0;R<_;++R)q[R]=String.fromCharCode(ge[b+R]);w=q.join("")}return z(v),w},toWireType:function(v,_){_ instanceof ArrayBuffer&&(_=new Uint8Array(_));var b,w=typeof _=="string";w||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int8Array||de("Cannot pass non-string to std::string"),f&&w?b=Ee(_):b=_.length;var C=W(4+b+1),R=C+4;if(Pe[C>>2]=b,f&&w)Ce(_,R,b+1);else if(w)for(var j=0;j<b;++j){var B=_.charCodeAt(j);B>255&&(z(R),de("String has UTF-16 code units that do not fit in 8 bits")),ge[R+j]=B}else for(var j=0;j<b;++j)ge[R+j]=_[j];return v!==null&&v.push(z,C),C},argPackAdvance:8,readValueFromPointer:Se,destructorFunction:function(v){z(v)}})}var rn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function $r(t,n){for(var f=t,v=f>>1,_=v+n/2;!(v>=_)&&Ae[v];)++v;if(f=v<<1,f-t>32&&rn)return rn.decode(ge.subarray(t,f));for(var b="",w=0;!(w>=n/2);++w){var C=fe[t+w*2>>1];if(C==0)break;b+=String.fromCharCode(C)}return b}function Tn(t,n,f){if(f===void 0&&(f=2147483647),f<2)return 0;f-=2;for(var v=n,_=f<t.length*2?f/2:t.length,b=0;b<_;++b){var w=t.charCodeAt(b);fe[n>>1]=w,n+=2}return fe[n>>1]=0,n-v}function Cn(t){return t.length*2}function En(t,n){for(var f=0,v="";!(f>=n/4);){var _=Ge[t+f*4>>2];if(_==0)break;if(++f,_>=65536){var b=_-65536;v+=String.fromCharCode(55296|b>>10,56320|b&1023)}else v+=String.fromCharCode(_)}return v}function Sr(t,n,f){if(f===void 0&&(f=2147483647),f<4)return 0;for(var v=n,_=v+f-4,b=0;b<t.length;++b){var w=t.charCodeAt(b);if(w>=55296&&w<=57343){var C=t.charCodeAt(++b);w=65536+((w&1023)<<10)|C&1023}if(Ge[n>>2]=w,n+=4,n+4>_)break}return Ge[n>>2]=0,n-v}function An(t){for(var n=0,f=0;f<t.length;++f){var v=t.charCodeAt(f);v>=55296&&v<=57343&&++f,n+=4}return n}function Rn(t,n,f){f=_e(f);var v,_,b,w,C;n===2?(v=$r,_=Tn,w=Cn,b=()=>Ae,C=1):n===4&&(v=En,_=Sr,w=An,b=()=>Pe,C=2),Ke(t,{name:f,fromWireType:function(R){for(var j=Pe[R>>2],B=b(),Y,q=R+4,oe=0;oe<=j;++oe){var re=R+4+oe*n;if(oe==j||B[re>>C]==0){var me=re-q,Ve=v(q,me);Y===void 0?Y=Ve:(Y+="\0",Y+=Ve),q=re+n}}return z(R),Y},toWireType:function(R,j){typeof j!="string"&&de("Cannot pass non-string to C++ string type "+f);var B=w(j),Y=W(4+B+n);return Pe[Y>>2]=B>>C,_(j,Y+4,B+n),R!==null&&R.push(z,Y),Y},argPackAdvance:8,readValueFromPointer:Se,destructorFunction:function(R){z(R)}})}function xn(t,n,f,v,_,b){Oe[t]={name:_e(n),rawConstructor:et(f,v),rawDestructor:et(_,b),fields:[]}}function Ir(t,n,f,v,_,b,w,C,R,j){Oe[t].fields.push({fieldName:_e(n),getterReturnType:f,getter:et(v,_),getterContext:b,setterArgumentType:w,setter:et(C,R),setterContext:j})}function $n(t,n){n=_e(n),Ke(t,{isVoid:!0,name:n,argPackAdvance:0,fromWireType:function(){},toWireType:function(f,v){}})}function nn(){throw 1/0}var on={};function Sn(t){var n=on[t];return n===void 0?_e(t):n}function Dr(){return typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")()}function In(t){return t===0?At.toHandle(Dr()):(t=Sn(t),At.toHandle(Dr()[t]))}function sn(t){t>4&&(qe[t].refcount+=1)}function an(t,n){var f=vt[t];return f===void 0&&de(n+" has unknown type "+nt(t)),f}function un(t){for(var n="",f=0;f<t;++f)n+=(f!==0?", ":"")+"arg"+f;for(var v=()=>Pe,_="return function emval_allocator_"+t+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,f=0;f<t;++f)_+="var argType"+f+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+f+`');
var arg`+f+" = argType"+f+`.readValueFromPointer(args);
args += argType`+f+`['argPackAdvance'];
argTypes += 4;
`;return _+="var obj = new constructor("+n+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",_)(an,r,At.toHandle,v)}var cn={};function Dn(t,n,f,v){t=At.toValue(t);var _=cn[n];return _||(_=un(n),cn[n]=_),_(t,f,v)}function On(t,n){t=an(t,"_emval_take_value");var f=t.readValueFromPointer(n);return At.toHandle(f)}function Ln(){Pt("")}function Or(t,n,f){ge.copyWithin(t,n,n+f)}function Un(){return 2147483648}function er(t){try{return le.grow(t-we.byteLength+65535>>>16),ir(le.buffer),1}catch{}}function kn(t){var n=ge.length;t=t>>>0;var f=Un();if(t>f)return!1;let v=(R,j)=>R+(j-R%j)%j;for(var _=1;_<=4;_*=2){var b=n*(1+.2/_);b=Math.min(b,t+100663296);var w=Math.min(f,v(Math.max(t,b),65536)),C=er(w);if(C)return!0}return!1}var Lr={};function Ur(){return S||"./this.program"}function Jt(){if(!Jt.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Ur()};for(var f in Lr)Lr[f]===void 0?delete n[f]:n[f]=Lr[f];var v=[];for(var f in n)v.push(f+"="+n[f]);Jt.strings=v}return Jt.strings}function Rt(t,n,f){for(var v=0;v<t.length;++v)$e[n++>>0]=t.charCodeAt(v);$e[n>>0]=0}function ln(t,n){var f=0;return Jt().forEach(function(v,_){var b=n+f;Pe[t+_*4>>2]=b,Rt(v,b),f+=v.length+1}),0}function fn(t,n){var f=Jt();Pe[t>>2]=f.length;var v=0;return f.forEach(function(_){v+=_.length+1}),Pe[n>>2]=v,0}function kr(t){$(t,new Gr(t))}function dn(t,n){kr(t)}var mr=dn;function Mr(t){return 52}function d(t,n,f,v,_){return 70}var p=[null,[],[]];function m(t,n){var f=p[t];n===0||n===10?((t===1?be:ve)(De(f,0)),f.length=0):f.push(n)}function A(t,n,f,v){for(var _=0,b=0;b<f;b++){var w=Pe[n>>2],C=Pe[n+4>>2];n+=8;for(var R=0;R<C;R++)m(t,ge[w+R]);_+=C}return Pe[v>>2]=_,0}function I(t){var n=r["_"+t];return n}function H(t,n){$e.set(t,n)}function L(t,n,f,v,_){var b={string:re=>{var me=0;if(re!=null&&re!==0){var Ve=(re.length<<2)+1;me=y(Ve),Ce(re,me,Ve)}return me},array:re=>{var me=y(re.length);return H(re,me),me}};function w(re){return n==="string"?Ue(re):n==="boolean"?!!re:re}var C=I(t),R=[],j=0;if(v)for(var B=0;B<v.length;B++){var Y=b[f[B]];Y?(j===0&&(j=c()),R[B]=Y(v[B])):R[B]=v[B]}var q=C.apply(null,R);function oe(re){return j!==0&&l(j),w(re)}return q=oe(q),q}$t=r.InternalError=Te(Error,"InternalError"),Nt(),Ct=r.BindingError=Te(Error,"BindingError"),Wt(),vn(),Xr(),Kr=r.UnboundTypeError=Te(Error,"UnboundTypeError"),Bt();var D={g:Tt,A:Ne,w:Qe,F:gt,u:hr,t:Ie,c:Rr,E:bn,m:en,b:Pn,a:tn,l:_r,h:Rn,J:xn,d:Ir,G:$n,x:nn,i:xr,r:In,p:sn,q:Dn,s:On,j:Ln,D:Or,y:kn,z:ln,B:fn,I:mr,C:Mr,v:d,k:A,o:F,n:V,H:O,f:x,e:N};br(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.L).apply(null,arguments)};var W=r._malloc=function(){return(W=r._malloc=r.asm.N).apply(null,arguments)},z=r._free=function(){return(z=r._free=r.asm.O).apply(null,arguments)},Q=r.___getTypeName=function(){return(Q=r.___getTypeName=r.asm.P).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.Q).apply(null,arguments)};var ee=r._setThrew=function(){return(ee=r._setThrew=r.asm.R).apply(null,arguments)},c=r.stackSave=function(){return(c=r.stackSave=r.asm.S).apply(null,arguments)},l=r.stackRestore=function(){return(l=r.stackRestore=r.asm.T).apply(null,arguments)},y=r.stackAlloc=function(){return(y=r.stackAlloc=r.asm.U).apply(null,arguments)},P=r.___cxa_is_pointer_type=function(){return(P=r.___cxa_is_pointer_type=r.asm.V).apply(null,arguments)};r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.W).apply(null,arguments)};function x(t,n){var f=c();try{Le(t)(n)}catch(v){if(l(f),v!==v+0)throw v;ee(1,0)}}function F(t,n){var f=c();try{return Le(t)(n)}catch(v){if(l(f),v!==v+0)throw v;ee(1,0)}}function N(t,n,f,v){var _=c();try{Le(t)(n,f,v)}catch(b){if(l(_),b!==b+0)throw b;ee(1,0)}}function O(t,n,f,v){var _=c();try{return Le(t)(n,f,v)}catch(b){if(l(_),b!==b+0)throw b;ee(1,0)}}function V(t,n,f){var v=c();try{return Le(t)(n,f)}catch(_){if(l(v),_!==_+0)throw _;ee(1,0)}}r.ccall=L;var s;wt=function t(){s||u(),s||(wt=t)};function u(t){if(Ut>0||(Wr(),Ut>0))return;function n(){s||(s=!0,r.calledRun=!0,!ce&&(hn(),g(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Hr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),n()},1)):n()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return u(),h.ready})})();e.exports=o})(_i)),_i.exports}var tu=eu();const ru=ai(tu),nu=new URL("/radiology-ai-viewer/assets/libjpegturbowasm_decode-daqMmuVl.wasm",import.meta.url),oi={codec:void 0,decoder:void 0};function Qo(){if(oi.codec)return Promise.resolve();const e=ru({locateFile:i=>i.endsWith(".wasm")?nu.toString():i});return new Promise((i,o)=>{e.then(a=>{oi.codec=a,oi.decoder=new a.JPEGDecoder,i()},o)})}async function Ko(e,i){await Qo();const o=oi.decoder;o.getEncodedBuffer(e.length).set(e),o.decode();const h=o.getFrameInfo(),r=o.getDecodedBuffer(),g={columns:h.width,rows:h.height,bitsPerPixel:h.bitsPerSample,signed:i.signed,bytesPerPixel:i.bytesPerPixel,componentsPerPixel:h.componentCount},T=iu(h,r),E={frameInfo:h};return{...i,pixelData:T,imageInfo:g,encodeOptions:E,...E,...g}}function iu(e,i){return e.isSigned?new Int8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const ou=Qo,Qn={JpegImage:void 0,decodeConfig:{}};function Zo(e){return Qn.decodeConfig=e,Qn.JpegImage?Promise.resolve():new Promise((i,o)=>{fo(()=>import("./jpeg-B-x1txLf.js"),[]).then(a=>{Qn.JpegImage=a.default,i()}).catch(o)})}async function es(e,i){if(await Zo(),typeof Qn.JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");const o=new Qn.JpegImage;if(o.parse(i),o.colorTransform=!1,e.bitsAllocated===8)return e.pixelData=o.getData(e.columns,e.rows),e;if(e.bitsAllocated===16)return e.pixelData=o.getData16(e.columns,e.rows),e}const Kn={DecoderClass:void 0,decodeConfig:{}};function ts(e){return Kn.decodeConfig=e,Kn.DecoderClass?Promise.resolve():new Promise((i,o)=>{fo(async()=>{const{Decoder:a}=await import("./lossless-CyYqoyFe.js");return{Decoder:a}},[]).then(({Decoder:a})=>{Kn.DecoderClass=a,i()},o)})}async function Ai(e,i){if(await ts(),typeof Kn.DecoderClass>"u")throw new Error("No JPEG Lossless decoder loaded");const o=new Kn.DecoderClass,a=e.bitsAllocated<=8?1:2,h=i.buffer,r=o.decode(h,i.byteOffset,i.length,a);return e.pixelRepresentation===0?e.bitsAllocated===16?(e.pixelData=new Uint16Array(r.buffer),e):(e.pixelData=new Uint8Array(r.buffer),e):(e.pixelData=new Int16Array(r.buffer),e)}var mi={exports:{}},no;function su(){return no||(no=1,(function(e,i){var o=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),(function(h){h=h||{};var r=typeof h<"u"?h:{},g,T;r.ready=new Promise(function(d,p){g=d,T=p});var E=Object.assign({},r),S=typeof window=="object",$=typeof importScripts=="function",k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M="";function U(d){return r.locateFile?r.locateFile(d,M):M+d}var G,J,X;if(k){var Z=Wn,K=Wn;$?M=K.dirname(M)+"/":M=__dirname+"/",G=(d,p)=>(d=Pt(d)?new URL(d):K.normalize(d),Z.readFileSync(d,p?void 0:"utf8")),X=d=>{var p=G(d,!0);return p.buffer||(p=new Uint8Array(p)),p},J=(d,p,m)=>{d=Pt(d)?new URL(d):K.normalize(d),Z.readFile(d,function(A,I){A?m(A):p(I.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(d){if(!(d instanceof Vr))throw d}),process.on("unhandledRejection",function(d){throw d}),r.inspect=function(){return"[Emscripten Module object]"}}else(S||$)&&($?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),a&&(M=a),M.indexOf("blob:")!==0?M=M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):M="",G=d=>{var p=new XMLHttpRequest;return p.open("GET",d,!1),p.send(null),p.responseText},$&&(X=d=>{var p=new XMLHttpRequest;return p.open("GET",d,!1),p.responseType="arraybuffer",p.send(null),new Uint8Array(p.response)}),J=(d,p,m)=>{var A=new XMLHttpRequest;A.open("GET",d,!0),A.responseType="arraybuffer",A.onload=()=>{if(A.status==200||A.status==0&&A.response){p(A.response);return}m()},A.onerror=m,A.send(null)});r.print||console.log.bind(console);var ne=r.printErr||console.warn.bind(console);Object.assign(r,E),E=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit;var ae;r.wasmBinary&&(ae=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&wt("no native wasm support detected");var be,ve=!1;function Re(d,p){d||wt(p)}var le=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ce(d,p,m){for(var A=p+m,I=p;d[I]&&!(I>=A);)++I;if(I-p>16&&d.buffer&&le)return le.decode(d.subarray(p,I));for(var H="";p<I;){var L=d[p++];if(!(L&128)){H+=String.fromCharCode(L);continue}var D=d[p++]&63;if((L&224)==192){H+=String.fromCharCode((L&31)<<6|D);continue}var W=d[p++]&63;if((L&240)==224?L=(L&15)<<12|D<<6|W:L=(L&7)<<18|D<<12|W<<6|d[p++]&63,L<65536)H+=String.fromCharCode(L);else{var z=L-65536;H+=String.fromCharCode(55296|z>>10,56320|z&1023)}}return H}function he(d,p){return d?ce(Ee,d,p):""}function xe(d,p,m,A){if(!(A>0))return 0;for(var I=m,H=m+A-1,L=0;L<d.length;++L){var D=d.charCodeAt(L);if(D>=55296&&D<=57343){var W=d.charCodeAt(++L);D=65536+((D&1023)<<10)|W&1023}if(D<=127){if(m>=H)break;p[m++]=D}else if(D<=2047){if(m+1>=H)break;p[m++]=192|D>>6,p[m++]=128|D&63}else if(D<=65535){if(m+2>=H)break;p[m++]=224|D>>12,p[m++]=128|D>>6&63,p[m++]=128|D&63}else{if(m+3>=H)break;p[m++]=240|D>>18,p[m++]=128|D>>12&63,p[m++]=128|D>>6&63,p[m++]=128|D&63}}return p[m]=0,m-I}function De(d,p,m){return xe(d,Ee,p,m)}function Ue(d){for(var p=0,m=0;m<d.length;++m){var A=d.charCodeAt(m);A<=127?p++:A<=2047?p+=2:A>=55296&&A<=57343?(p+=4,++m):p+=3}return p}var ie,Ce,Ee,we,$e,ge,fe,Ae,Ge;function Pe(d){ie=d,r.HEAP8=Ce=new Int8Array(d),r.HEAP16=we=new Int16Array(d),r.HEAP32=ge=new Int32Array(d),r.HEAPU8=Ee=new Uint8Array(d),r.HEAPU16=$e=new Uint16Array(d),r.HEAPU32=fe=new Uint32Array(d),r.HEAPF32=Ae=new Float32Array(d),r.HEAPF64=Ge=new Float64Array(d)}r.INITIAL_MEMORY;var rr,nr=[],ir=[],dt=[];function Ot(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Wr(r.preRun.shift());or(nr)}function Fr(){or(ir)}function jr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Hr(r.postRun.shift());or(dt)}function Wr(d){nr.unshift(d)}function hn(d){ir.unshift(d)}function Hr(d){dt.unshift(d)}var pt=0,it=null;function Lt(d){pt++,r.monitorRunDependencies&&r.monitorRunDependencies(pt)}function Ut(d){if(pt--,r.monitorRunDependencies&&r.monitorRunDependencies(pt),pt==0&&it){var p=it;it=null,p()}}function wt(d){r.onAbort&&r.onAbort(d),d="Aborted("+d+")",ne(d),ve=!0,d+=". Build with -sASSERTIONS for more info.";var p=new WebAssembly.RuntimeError(d);throw T(p),p}var Ht="data:application/octet-stream;base64,";function Nr(d){return d.startsWith(Ht)}function Pt(d){return d.startsWith("file://")}var Fe;Fe="charlswasm_decode.wasm",Nr(Fe)||(Fe=U(Fe));function ke(d){try{if(d==Fe&&ae)return new Uint8Array(ae);if(X)return X(d);throw"both async and sync fetching of the wasm failed"}catch(p){wt(p)}}function Yt(){if(!ae&&(S||$)){if(typeof fetch=="function"&&!Pt(Fe))return fetch(Fe,{credentials:"same-origin"}).then(function(d){if(!d.ok)throw"failed to load wasm binary file at '"+Fe+"'";return d.arrayBuffer()}).catch(function(){return ke(Fe)});if(J)return new Promise(function(d,p){J(Fe,function(m){d(new Uint8Array(m))},p)})}return Promise.resolve().then(function(){return ke(Fe)})}function Be(){var d={a:Lr};function p(L,D){var W=L.exports;r.asm=W,be=r.asm.z,Pe(be.buffer),rr=r.asm.C,hn(r.asm.A),Ut()}Lt();function m(L){p(L.instance)}function A(L){return Yt().then(function(D){return WebAssembly.instantiate(D,d)}).then(function(D){return D}).then(L,function(D){ne("failed to asynchronously prepare wasm: "+D),wt(D)})}function I(){return!ae&&typeof WebAssembly.instantiateStreaming=="function"&&!Nr(Fe)&&!Pt(Fe)&&!k&&typeof fetch=="function"?fetch(Fe,{credentials:"same-origin"}).then(function(L){var D=WebAssembly.instantiateStreaming(L,d);return D.then(m,function(W){return ne("wasm streaming compile failed: "+W),ne("falling back to ArrayBuffer instantiation"),A(m)})}):A(m)}if(r.instantiateWasm)try{var H=r.instantiateWasm(d,p);return H}catch(L){ne("Module.instantiateWasm callback failed with error: "+L),T(L)}return I().catch(T),{}}function Vr(d){this.name="ExitStatus",this.message="Program terminated with exit("+d+")",this.status=d}function or(d){for(;d.length>0;)d.shift()(r)}function br(d){this.excPtr=d,this.ptr=d-24,this.set_type=function(p){fe[this.ptr+4>>2]=p},this.get_type=function(){return fe[this.ptr+4>>2]},this.set_destructor=function(p){fe[this.ptr+8>>2]=p},this.get_destructor=function(){return fe[this.ptr+8>>2]},this.set_refcount=function(p){ge[this.ptr>>2]=p},this.set_caught=function(p){p=p?1:0,Ce[this.ptr+12>>0]=p},this.get_caught=function(){return Ce[this.ptr+12>>0]!=0},this.set_rethrown=function(p){p=p?1:0,Ce[this.ptr+13>>0]=p},this.get_rethrown=function(){return Ce[this.ptr+13>>0]!=0},this.init=function(p,m){this.set_adjusted_ptr(0),this.set_type(p),this.set_destructor(m),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var p=ge[this.ptr>>2];ge[this.ptr>>2]=p+1},this.release_ref=function(){var p=ge[this.ptr>>2];return ge[this.ptr>>2]=p-1,p===1},this.set_adjusted_ptr=function(p){fe[this.ptr+16>>2]=p},this.get_adjusted_ptr=function(){return fe[this.ptr+16>>2]},this.get_exception_ptr=function(){var p=dn(this.get_type());if(p)return fe[this.excPtr>>2];var m=this.get_adjusted_ptr();return m!==0?m:this.excPtr}}function Gr(d,p,m){var A=new br(d);throw A.init(p,m),d}var ht={};function sr(d){for(;d.length;){var p=d.pop(),m=d.pop();m(p)}}function Tt(d){return this.fromWireType(ge[d>>2])}var Oe={},je={},Se={},kt=48,vt=57;function ze(d){if(d===void 0)return"_unknown";d=d.replace(/[^a-zA-Z0-9_]/g,"$");var p=d.charCodeAt(0);return p>=kt&&p<=vt?"_"+d:d}function wr(d,p){return d=ze(d),new Function("body","return function "+d+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(p)}function Pr(d,p){var m=wr(p,function(A){this.name=p,this.message=A;var I=new Error(A).stack;I!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return m.prototype=Object.create(d.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},m}var ar=void 0;function Mt(d){throw new ar(d)}function Te(d,p,m){d.forEach(function(D){Se[D]=p});function A(D){var W=m(D);W.length!==d.length&&Mt("Mismatched type converter count");for(var z=0;z<d.length;++z)_e(d[z],W[z])}var I=new Array(p.length),H=[],L=0;p.forEach((D,W)=>{je.hasOwnProperty(D)?I[W]=je[D]:(H.push(D),Oe.hasOwnProperty(D)||(Oe[D]=[]),Oe[D].push(()=>{I[W]=je[D],++L,L===H.length&&A(I)}))}),H.length===0&&A(I)}function $t(d){var p=ht[d];delete ht[d];var m=p.rawConstructor,A=p.rawDestructor,I=p.fields,H=I.map(L=>L.getterReturnType).concat(I.map(L=>L.setterArgumentType));Te([d],H,L=>{var D={};return I.forEach((W,z)=>{var Q=W.fieldName,ee=L[z],c=W.getter,l=W.getterContext,y=L[z+I.length],P=W.setter,x=W.setterContext;D[Q]={read:F=>ee.fromWireType(c(l,F)),write:(F,N)=>{var O=[];P(x,F,y.toWireType(O,N)),sr(O)}}}),[{name:p.name,fromWireType:function(W){var z={};for(var Q in D)z[Q]=D[Q].read(W);return A(W),z},toWireType:function(W,z){for(var Q in D)if(!(Q in z))throw new TypeError('Missing field:  "'+Q+'"');var ee=m();for(Q in D)D[Q].write(ee,z[Q]);return W!==null&&W.push(A,ee),ee},argPackAdvance:8,readValueFromPointer:Tt,destructorFunction:A}]})}function se(d,p,m,A,I){}function Xe(d){switch(d){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+d)}}function Ne(){for(var d=new Array(256),p=0;p<256;++p)d[p]=String.fromCharCode(p);Qe=d}var Qe=void 0;function Me(d){for(var p="",m=d;Ee[m];)p+=Qe[Ee[m++]];return p}var Nt=void 0;function ue(d){throw new Nt(d)}function _e(d,p,m={}){if(!("argPackAdvance"in p))throw new TypeError("registerType registeredInstance requires argPackAdvance");var A=p.name;if(d||ue('type "'+A+'" must have a positive integer typeid pointer'),je.hasOwnProperty(d)){if(m.ignoreDuplicateRegistrations)return;ue("Cannot register type '"+A+"' twice")}if(je[d]=p,delete Se[d],Oe.hasOwnProperty(d)){var I=Oe[d];delete Oe[d],I.forEach(H=>H())}}function Ct(d,p,m,A,I){var H=Xe(m);p=Me(p),_e(d,{name:p,fromWireType:function(L){return!!L},toWireType:function(L,D){return D?A:I},argPackAdvance:8,readValueFromPointer:function(L){var D;if(m===1)D=Ce;else if(m===2)D=we;else if(m===4)D=ge;else throw new TypeError("Unknown boolean type size: "+p);return this.fromWireType(D[L>>H])},destructorFunction:null})}function de(d){if(!(this instanceof ut)||!(d instanceof ut))return!1;for(var p=this.$$.ptrType.registeredClass,m=this.$$.ptr,A=d.$$.ptrType.registeredClass,I=d.$$.ptr;p.baseClass;)m=p.upcast(m),p=p.baseClass;for(;A.baseClass;)I=A.upcast(I),A=A.baseClass;return p===A&&m===I}function Ke(d){return{count:d.count,deleteScheduled:d.deleteScheduled,preservePointerOnDelete:d.preservePointerOnDelete,ptr:d.ptr,ptrType:d.ptrType,smartPtr:d.smartPtr,smartPtrType:d.smartPtrType}}function gt(d){function p(m){return m.$$.ptrType.registeredClass.name}ue(p(d)+" instance already deleted")}var ur=!1;function Br(d){}function Xt(d){d.smartPtr?d.smartPtrType.rawDestructor(d.smartPtr):d.ptrType.registeredClass.rawDestructor(d.ptr)}function cr(d){d.count.value-=1;var p=d.count.value===0;p&&Xt(d)}function Ft(d,p,m){if(p===m)return d;if(m.baseClass===void 0)return null;var A=Ft(d,p,m.baseClass);return A===null?null:m.downcast(A)}var He={};function ot(){return Object.keys(st).length}function pe(){var d=[];for(var p in st)st.hasOwnProperty(p)&&d.push(st[p]);return d}var We=[];function jt(){for(;We.length;){var d=We.pop();d.$$.deleteScheduled=!1,d.delete()}}var Vt=void 0;function Qt(d){Vt=d,We.length&&Vt&&Vt(jt)}function Kt(){r.getInheritedInstanceCount=ot,r.getLiveInheritedInstances=pe,r.flushPendingDeletes=jt,r.setDelayFunction=Qt}var st={};function zr(d,p){for(p===void 0&&ue("ptr should not be undefined");d.baseClass;)p=d.upcast(p),d=d.baseClass;return p}function vn(d,p){return p=zr(d,p),st[p]}function at(d,p){(!p.ptrType||!p.ptr)&&Mt("makeClassHandle requires ptr and ptrType");var m=!!p.smartPtrType,A=!!p.smartPtr;return m!==A&&Mt("Both smartPtrType and smartPtr must be specified"),p.count={value:1},Gt(Object.create(d,{$$:{value:p}}))}function Jr(d){var p=this.getPointee(d);if(!p)return this.destructor(d),null;var m=vn(this.registeredClass,p);if(m!==void 0){if(m.$$.count.value===0)return m.$$.ptr=p,m.$$.smartPtr=d,m.clone();var A=m.clone();return this.destructor(d),A}function I(){return this.isSmartPointer?at(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:p,smartPtrType:this,smartPtr:d}):at(this.registeredClass.instancePrototype,{ptrType:this,ptr:d})}var H=this.registeredClass.getActualType(p),L=He[H];if(!L)return I.call(this);var D;this.isConst?D=L.constPointerType:D=L.pointerType;var W=Ft(p,this.registeredClass,D.registeredClass);return W===null?I.call(this):this.isSmartPointer?at(D.registeredClass.instancePrototype,{ptrType:D,ptr:W,smartPtrType:this,smartPtr:d}):at(D.registeredClass.instancePrototype,{ptrType:D,ptr:W})}function Gt(d){return typeof FinalizationRegistry>"u"?(Gt=p=>p,d):(ur=new FinalizationRegistry(p=>{cr(p.$$)}),Gt=p=>{var m=p.$$,A=!!m.smartPtr;if(A){var I={$$:m};ur.register(p,I,p)}return p},Br=p=>ur.unregister(p),Gt(d))}function lr(){if(this.$$.ptr||gt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var d=Gt(Object.create(Object.getPrototypeOf(this),{$$:{value:Ke(this.$$)}}));return d.$$.count.value+=1,d.$$.deleteScheduled=!1,d}function gn(){this.$$.ptr||gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ue("Object already scheduled for deletion"),Br(this),cr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function rt(){return!this.$$.ptr}function Tr(){return this.$$.ptr||gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ue("Object already scheduled for deletion"),We.push(this),We.length===1&&Vt&&Vt(jt),this.$$.deleteScheduled=!0,this}function Zt(){ut.prototype.isAliasOf=de,ut.prototype.clone=lr,ut.prototype.delete=gn,ut.prototype.isDeleted=rt,ut.prototype.deleteLater=Tr}function ut(){}function Cr(d,p,m){if(d[p].overloadTable===void 0){var A=d[p];d[p]=function(){return d[p].overloadTable.hasOwnProperty(arguments.length)||ue("Function '"+m+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+d[p].overloadTable+")!"),d[p].overloadTable[arguments.length].apply(this,arguments)},d[p].overloadTable=[],d[p].overloadTable[A.argCount]=A}}function Wt(d,p,m){r.hasOwnProperty(d)?((m===void 0||r[d].overloadTable!==void 0&&r[d].overloadTable[m]!==void 0)&&ue("Cannot register public name '"+d+"' twice"),Cr(r,d,d),r.hasOwnProperty(m)&&ue("Cannot register multiple overloads of a function with the same number of arguments ("+m+")!"),r[d].overloadTable[m]=p):(r[d]=p,m!==void 0&&(r[d].numArguments=m))}function St(d,p,m,A,I,H,L,D){this.name=d,this.constructor=p,this.instancePrototype=m,this.rawDestructor=A,this.baseClass=I,this.getActualType=H,this.upcast=L,this.downcast=D,this.pureVirtualFunctions=[]}function fr(d,p,m){for(;p!==m;)p.upcast||ue("Expected null or instance of "+m.name+", got an instance of "+p.name),d=p.upcast(d),p=p.baseClass;return d}function Ze(d,p){if(p===null)return this.isReference&&ue("null is not a valid "+this.name),0;p.$$||ue('Cannot pass "'+Bt(p)+'" as a '+this.name),p.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name);var m=p.$$.ptrType.registeredClass,A=fr(p.$$.ptr,m,this.registeredClass);return A}function yn(d,p){var m;if(p===null)return this.isReference&&ue("null is not a valid "+this.name),this.isSmartPointer?(m=this.rawConstructor(),d!==null&&d.push(this.rawDestructor,m),m):0;p.$$||ue('Cannot pass "'+Bt(p)+'" as a '+this.name),p.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&p.$$.ptrType.isConst&&ue("Cannot convert argument of type "+(p.$$.smartPtrType?p.$$.smartPtrType.name:p.$$.ptrType.name)+" to parameter type "+this.name);var A=p.$$.ptrType.registeredClass;if(m=fr(p.$$.ptr,A,this.registeredClass),this.isSmartPointer)switch(p.$$.smartPtr===void 0&&ue("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:p.$$.smartPtrType===this?m=p.$$.smartPtr:ue("Cannot convert argument of type "+(p.$$.smartPtrType?p.$$.smartPtrType.name:p.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:m=p.$$.smartPtr;break;case 2:if(p.$$.smartPtrType===this)m=p.$$.smartPtr;else{var I=p.clone();m=this.rawShare(m,lt.toHandle(function(){I.delete()})),d!==null&&d.push(this.rawDestructor,m)}break;default:ue("Unsupporting sharing policy")}return m}function It(d,p){if(p===null)return this.isReference&&ue("null is not a valid "+this.name),0;p.$$||ue('Cannot pass "'+Bt(p)+'" as a '+this.name),p.$$.ptr||ue("Cannot pass deleted object as a pointer of type "+this.name),p.$$.ptrType.isConst&&ue("Cannot convert argument of type "+p.$$.ptrType.name+" to parameter type "+this.name);var m=p.$$.ptrType.registeredClass,A=fr(p.$$.ptr,m,this.registeredClass);return A}function qr(d){return this.rawGetPointee&&(d=this.rawGetPointee(d)),d}function Er(d){this.rawDestructor&&this.rawDestructor(d)}function _n(d){d!==null&&d.delete()}function Yr(){yt.prototype.getPointee=qr,yt.prototype.destructor=Er,yt.prototype.argPackAdvance=8,yt.prototype.readValueFromPointer=Tt,yt.prototype.deleteObject=_n,yt.prototype.fromWireType=Jr}function yt(d,p,m,A,I,H,L,D,W,z,Q){this.name=d,this.registeredClass=p,this.isReference=m,this.isConst=A,this.isSmartPointer=I,this.pointeeType=H,this.sharingPolicy=L,this.rawGetPointee=D,this.rawConstructor=W,this.rawShare=z,this.rawDestructor=Q,!I&&p.baseClass===void 0?A?(this.toWireType=Ze,this.destructorFunction=null):(this.toWireType=It,this.destructorFunction=null):this.toWireType=yn}function _t(d,p,m){r.hasOwnProperty(d)||Mt("Replacing nonexistant public symbol"),r[d].overloadTable!==void 0&&m!==void 0?r[d].overloadTable[m]=p:(r[d]=p,r[d].argCount=m)}function Xr(d,p,m){var A=r["dynCall_"+d];return m&&m.length?A.apply(null,[p].concat(m)):A.call(null,p)}var Je=[];function Qr(d){var p=Je[d];return p||(d>=Je.length&&(Je.length=d+1),Je[d]=p=rr.get(d)),p}function Ar(d,p,m){if(d.includes("j"))return Xr(d,p,m);var A=Qr(p).apply(null,m);return A}function dr(d,p){var m=[];return function(){return m.length=0,Object.assign(m,arguments),Ar(d,p,m)}}function Le(d,p){d=Me(d);function m(){return d.includes("j")?dr(d,p):Qr(p)}var A=m();return typeof A!="function"&&ue("unknown function pointer with signature "+d+": "+p),A}var Et=void 0;function pr(d){var p=Jt(d),m=Me(p);return Rt(p),m}function et(d,p){var m=[],A={};function I(H){if(!A[H]&&!je[H]){if(Se[H]){Se[H].forEach(I);return}m.push(H),A[H]=!0}}throw p.forEach(I),new Et(d+": "+m.map(pr).join([", "]))}function Kr(d,p,m,A,I,H,L,D,W,z,Q,ee,c){Q=Me(Q),H=Le(I,H),D&&(D=Le(L,D)),z&&(z=Le(W,z)),c=Le(ee,c);var l=ze(Q);Wt(l,function(){et("Cannot construct "+Q+" due to unbound types",[A])}),Te([d,p,m],A?[A]:[],function(y){y=y[0];var P,x;A?(P=y.registeredClass,x=P.instancePrototype):x=ut.prototype;var F=wr(l,function(){if(Object.getPrototypeOf(this)!==N)throw new Nt("Use 'new' to construct "+Q);if(O.constructor_body===void 0)throw new Nt(Q+" has no accessible constructor");var t=O.constructor_body[arguments.length];if(t===void 0)throw new Nt("Tried to invoke ctor of "+Q+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(O.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)}),N=Object.create(x,{constructor:{value:F}});F.prototype=N;var O=new St(Q,F,N,c,P,H,D,z),V=new yt(Q,O,!0,!1,!1),s=new yt(Q+"*",O,!1,!1,!1),u=new yt(Q+" const*",O,!1,!0,!1);return He[d]={pointerType:s,constPointerType:u},_t(l,F),[V,s,u]})}function nt(d,p){for(var m=[],A=0;A<d;A++)m.push(fe[p+A*4>>2]);return m}function ct(d,p){if(!(d instanceof Function))throw new TypeError("new_ called with constructor type "+typeof d+" which is not a function");var m=wr(d.name||"unknownFunctionName",function(){});m.prototype=d.prototype;var A=new m,I=d.apply(A,p);return I instanceof Object?I:A}function hr(d,p,m,A,I){var H=p.length;H<2&&ue("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var L=p[1]!==null&&m!==null,D=!1,W=1;W<p.length;++W)if(p[W]!==null&&p[W].destructorFunction===void 0){D=!0;break}for(var z=p[0].name!=="void",Q="",ee="",W=0;W<H-2;++W)Q+=(W!==0?", ":"")+"arg"+W,ee+=(W!==0?", ":"")+"arg"+W+"Wired";var c="return function "+ze(d)+"("+Q+`) {
if (arguments.length !== `+(H-2)+`) {
throwBindingError('function `+d+" called with ' + arguments.length + ' arguments, expected "+(H-2)+` args!');
}
`;D&&(c+=`var destructors = [];
`);var l=D?"destructors":"null",y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],P=[ue,A,I,sr,p[0],p[1]];L&&(c+="var thisWired = classParam.toWireType("+l+`, this);
`);for(var W=0;W<H-2;++W)c+="var arg"+W+"Wired = argType"+W+".toWireType("+l+", arg"+W+"); // "+p[W+2].name+`
`,y.push("argType"+W),P.push(p[W+2]);if(L&&(ee="thisWired"+(ee.length>0?", ":"")+ee),c+=(z?"var rv = ":"")+"invoker(fn"+(ee.length>0?", ":"")+ee+`);
`,D)c+=`runDestructors(destructors);
`;else for(var W=L?1:2;W<p.length;++W){var x=W===1?"thisWired":"arg"+(W-2)+"Wired";p[W].destructorFunction!==null&&(c+=x+"_dtor("+x+"); // "+p[W].name+`
`,y.push(x+"_dtor"),P.push(p[W].destructorFunction))}z&&(c+=`var ret = retType.fromWireType(rv);
return ret;
`),c+=`}
`,y.push(c);var F=ct(Function,y).apply(null,P);return F}function vr(d,p,m,A,I,H){Re(p>0);var L=nt(p,m);I=Le(A,I),Te([],[d],function(D){D=D[0];var W="constructor "+D.name;if(D.registeredClass.constructor_body===void 0&&(D.registeredClass.constructor_body=[]),D.registeredClass.constructor_body[p-1]!==void 0)throw new Nt("Cannot register multiple constructors with identical number of parameters ("+(p-1)+") for class '"+D.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return D.registeredClass.constructor_body[p-1]=()=>{et("Cannot construct "+D.name+" due to unbound types",L)},Te([],L,function(z){return z.splice(1,0,null),D.registeredClass.constructor_body[p-1]=hr(W,z,null,I,H),[]}),[]})}function mn(d,p,m,A,I,H,L,D){var W=nt(m,A);p=Me(p),H=Le(I,H),Te([],[d],function(z){z=z[0];var Q=z.name+"."+p;p.startsWith("@@")&&(p=Symbol[p.substring(2)]),D&&z.registeredClass.pureVirtualFunctions.push(p);function ee(){et("Cannot call "+Q+" due to unbound types",W)}var c=z.registeredClass.instancePrototype,l=c[p];return l===void 0||l.overloadTable===void 0&&l.className!==z.name&&l.argCount===m-2?(ee.argCount=m-2,ee.className=z.name,c[p]=ee):(Cr(c,p,Q),c[p].overloadTable[m-2]=ee),Te([],W,function(y){var P=hr(Q,y,z,H,L);return c[p].overloadTable===void 0?(P.argCount=m-2,c[p]=P):c[p].overloadTable[m-2]=P,[]}),[]})}var gr=[],Ie=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Rr(d){d>4&&--Ie[d].refcount===0&&(Ie[d]=void 0,gr.push(d))}function yr(){for(var d=0,p=5;p<Ie.length;++p)Ie[p]!==void 0&&++d;return d}function qe(){for(var d=5;d<Ie.length;++d)if(Ie[d]!==void 0)return Ie[d];return null}function xr(){r.count_emval_handles=yr,r.get_first_emval=qe}var lt={toValue:d=>(d||ue("Cannot use deleted val. handle = "+d),Ie[d].value),toHandle:d=>{switch(d){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var p=gr.length?gr.pop():Ie.length;return Ie[p]={refcount:1,value:d},p}}}};function Zr(d,p){p=Me(p),_e(d,{name:p,fromWireType:function(m){var A=lt.toValue(m);return Rr(m),A},toWireType:function(m,A){return lt.toHandle(A)},argPackAdvance:8,readValueFromPointer:Tt,destructorFunction:null})}function Bt(d){if(d===null)return"null";var p=typeof d;return p==="object"||p==="array"||p==="function"?d.toString():""+d}function At(d,p){switch(p){case 2:return function(m){return this.fromWireType(Ae[m>>2])};case 3:return function(m){return this.fromWireType(Ge[m>>3])};default:throw new TypeError("Unknown float type: "+d)}}function bn(d,p,m){var A=Xe(m);p=Me(p),_e(d,{name:p,fromWireType:function(I){return I},toWireType:function(I,H){return H},argPackAdvance:8,readValueFromPointer:At(p,A),destructorFunction:null})}function zt(d,p,m,A,I,H){var L=nt(p,m);d=Me(d),I=Le(A,I),Wt(d,function(){et("Cannot call "+d+" due to unbound types",L)},p-1),Te([],L,function(D){var W=[D[0],null].concat(D.slice(1));return _t(d,hr(d,W,null,I,H),p-1),[]})}function ft(d,p,m){switch(p){case 0:return m?function(I){return Ce[I]}:function(I){return Ee[I]};case 1:return m?function(I){return we[I>>1]}:function(I){return $e[I>>1]};case 2:return m?function(I){return ge[I>>2]}:function(I){return fe[I>>2]};default:throw new TypeError("Unknown integer type: "+d)}}function en(d,p,m,A,I){p=Me(p);var H=Xe(m),L=ee=>ee;if(A===0){var D=32-8*m;L=ee=>ee<<D>>>D}var W=p.includes("unsigned"),z=(ee,c)=>{},Q;W?Q=function(ee,c){return z(c,this.name),c>>>0}:Q=function(ee,c){return z(c,this.name),c},_e(d,{name:p,fromWireType:L,toWireType:Q,argPackAdvance:8,readValueFromPointer:ft(p,H,A!==0),destructorFunction:null})}function wn(d,p,m){var A=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],I=A[p];function H(L){L=L>>2;var D=fe,W=D[L],z=D[L+1];return new I(ie,z,W)}m=Me(m),_e(d,{name:m,fromWireType:H,argPackAdvance:8,readValueFromPointer:H},{ignoreDuplicateRegistrations:!0})}function Pn(d,p){p=Me(p);var m=p==="std::string";_e(d,{name:p,fromWireType:function(A){var I=fe[A>>2],H=A+4,L;if(m)for(var D=H,W=0;W<=I;++W){var z=H+W;if(W==I||Ee[z]==0){var Q=z-D,ee=he(D,Q);L===void 0?L=ee:(L+="\0",L+=ee),D=z+1}}else{for(var c=new Array(I),W=0;W<I;++W)c[W]=String.fromCharCode(Ee[H+W]);L=c.join("")}return Rt(A),L},toWireType:function(A,I){I instanceof ArrayBuffer&&(I=new Uint8Array(I));var H,L=typeof I=="string";L||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int8Array||ue("Cannot pass non-string to std::string"),m&&L?H=Ue(I):H=I.length;var D=Ur(4+H+1),W=D+4;if(fe[D>>2]=H,m&&L)De(I,W,H+1);else if(L)for(var z=0;z<H;++z){var Q=I.charCodeAt(z);Q>255&&(Rt(W),ue("String has UTF-16 code units that do not fit in 8 bits")),Ee[W+z]=Q}else for(var z=0;z<H;++z)Ee[W+z]=I[z];return A!==null&&A.push(Rt,D),D},argPackAdvance:8,readValueFromPointer:Tt,destructorFunction:function(A){Rt(A)}})}var tn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function _r(d,p){for(var m=d,A=m>>1,I=A+p/2;!(A>=I)&&$e[A];)++A;if(m=A<<1,m-d>32&&tn)return tn.decode(Ee.subarray(d,m));for(var H="",L=0;!(L>=p/2);++L){var D=we[d+L*2>>1];if(D==0)break;H+=String.fromCharCode(D)}return H}function rn(d,p,m){if(m===void 0&&(m=2147483647),m<2)return 0;m-=2;for(var A=p,I=m<d.length*2?m/2:d.length,H=0;H<I;++H){var L=d.charCodeAt(H);we[p>>1]=L,p+=2}return we[p>>1]=0,p-A}function $r(d){return d.length*2}function Tn(d,p){for(var m=0,A="";!(m>=p/4);){var I=ge[d+m*4>>2];if(I==0)break;if(++m,I>=65536){var H=I-65536;A+=String.fromCharCode(55296|H>>10,56320|H&1023)}else A+=String.fromCharCode(I)}return A}function Cn(d,p,m){if(m===void 0&&(m=2147483647),m<4)return 0;for(var A=p,I=A+m-4,H=0;H<d.length;++H){var L=d.charCodeAt(H);if(L>=55296&&L<=57343){var D=d.charCodeAt(++H);L=65536+((L&1023)<<10)|D&1023}if(ge[p>>2]=L,p+=4,p+4>I)break}return ge[p>>2]=0,p-A}function En(d){for(var p=0,m=0;m<d.length;++m){var A=d.charCodeAt(m);A>=55296&&A<=57343&&++m,p+=4}return p}function Sr(d,p,m){m=Me(m);var A,I,H,L,D;p===2?(A=_r,I=rn,L=$r,H=()=>$e,D=1):p===4&&(A=Tn,I=Cn,L=En,H=()=>fe,D=2),_e(d,{name:m,fromWireType:function(W){for(var z=fe[W>>2],Q=H(),ee,c=W+4,l=0;l<=z;++l){var y=W+4+l*p;if(l==z||Q[y>>D]==0){var P=y-c,x=A(c,P);ee===void 0?ee=x:(ee+="\0",ee+=x),c=y+p}}return Rt(W),ee},toWireType:function(W,z){typeof z!="string"&&ue("Cannot pass non-string to C++ string type "+m);var Q=L(z),ee=Ur(4+Q+p);return fe[ee>>2]=Q>>D,I(z,ee+4,Q+p),W!==null&&W.push(Rt,ee),ee},argPackAdvance:8,readValueFromPointer:Tt,destructorFunction:function(W){Rt(W)}})}function An(d,p,m,A,I,H){ht[d]={name:Me(p),rawConstructor:Le(m,A),rawDestructor:Le(I,H),fields:[]}}function Rn(d,p,m,A,I,H,L,D,W,z){ht[d].fields.push({fieldName:Me(p),getterReturnType:m,getter:Le(A,I),getterContext:H,setterArgumentType:L,setter:Le(D,W),setterContext:z})}function xn(d,p){p=Me(p),_e(d,{isVoid:!0,name:p,argPackAdvance:0,fromWireType:function(){},toWireType:function(m,A){}})}var Ir={};function $n(d){var p=Ir[d];return p===void 0?Me(d):p}function nn(){return typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")()}function on(d){return d===0?lt.toHandle(nn()):(d=$n(d),lt.toHandle(nn()[d]))}function Sn(d){d>4&&(Ie[d].refcount+=1)}function Dr(d,p){var m=je[d];return m===void 0&&ue(p+" has unknown type "+pr(d)),m}function In(d){for(var p="",m=0;m<d;++m)p+=(m!==0?", ":"")+"arg"+m;for(var A=()=>fe,I="return function emval_allocator_"+d+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,m=0;m<d;++m)I+="var argType"+m+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+m+`');
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
argTypes += 4;
`;return I+="var obj = new constructor("+p+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",I)(Dr,r,lt.toHandle,A)}var sn={};function an(d,p,m,A){d=lt.toValue(d);var I=sn[p];return I||(I=In(p),sn[p]=I),I(d,m,A)}function un(d,p){d=Dr(d,"_emval_take_value");var m=d.readValueFromPointer(p);return lt.toHandle(m)}function cn(){wt("")}function Dn(d,p,m){Ee.copyWithin(d,p,p+m)}function On(){return 2147483648}function Ln(d){try{return be.grow(d-ie.byteLength+65535>>>16),Pe(be.buffer),1}catch{}}function Or(d){var p=Ee.length;d=d>>>0;var m=On();if(d>m)return!1;let A=(W,z)=>W+(z-W%z)%z;for(var I=1;I<=4;I*=2){var H=p*(1+.2/I);H=Math.min(H,d+100663296);var L=Math.min(m,A(Math.max(d,H),65536)),D=Ln(L);if(D)return!0}return!1}function Un(d){var p=r["_"+d];return p}function er(d,p){Ce.set(d,p)}function kn(d,p,m,A,I){var H={string:y=>{var P=0;if(y!=null&&y!==0){var x=(y.length<<2)+1;P=kr(x),De(y,P,x)}return P},array:y=>{var P=kr(y.length);return er(y,P),P}};function L(y){return p==="string"?he(y):p==="boolean"?!!y:y}var D=Un(d),W=[],z=0;if(A)for(var Q=0;Q<A.length;Q++){var ee=H[m[Q]];ee?(z===0&&(z=ln()),W[Q]=ee(A[Q])):W[Q]=A[Q]}var c=D.apply(null,W);function l(y){return z!==0&&fn(z),L(y)}return c=l(c),c}ar=r.InternalError=Pr(Error,"InternalError"),Ne(),Nt=r.BindingError=Pr(Error,"BindingError"),Zt(),Kt(),Yr(),Et=r.UnboundTypeError=Pr(Error,"UnboundTypeError"),xr();var Lr={h:Gr,q:$t,r:se,w:Ct,p:Kr,o:vr,c:mn,v:Zr,k:bn,e:zt,b:en,a:wn,j:Pn,g:Sr,u:An,d:Rn,x:xn,i:Rr,m:on,l:Sn,y:an,n:un,f:cn,t:Dn,s:Or};Be(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.A).apply(null,arguments)};var Ur=r._malloc=function(){return(Ur=r._malloc=r.asm.B).apply(null,arguments)},Jt=r.___getTypeName=function(){return(Jt=r.___getTypeName=r.asm.D).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.E).apply(null,arguments)};var Rt=r._free=function(){return(Rt=r._free=r.asm.F).apply(null,arguments)},ln=r.stackSave=function(){return(ln=r.stackSave=r.asm.G).apply(null,arguments)},fn=r.stackRestore=function(){return(fn=r.stackRestore=r.asm.H).apply(null,arguments)},kr=r.stackAlloc=function(){return(kr=r.stackAlloc=r.asm.I).apply(null,arguments)},dn=r.___cxa_is_pointer_type=function(){return(dn=r.___cxa_is_pointer_type=r.asm.J).apply(null,arguments)};r.ccall=kn;var mr;it=function d(){mr||Mr(),mr||(it=d)};function Mr(d){if(pt>0||(Ot(),pt>0))return;function p(){mr||(mr=!0,r.calledRun=!0,!ve&&(Fr(),g(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),jr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),p()},1)):p()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Mr(),h.ready})})();e.exports=o})(mi)),mi.exports}var au=su();const uu=ai(au),cu=new URL("/radiology-ai-viewer/assets/charlswasm_decode-484ovEoR.wasm",import.meta.url),Hn={codec:void 0,decoder:void 0,decodeConfig:{}};function lu(e){return typeof e=="number"?Hn.codec.getExceptionMessage(e):e}function rs(e){if(Hn.decodeConfig=e,Hn.codec)return Promise.resolve();const i=uu({locateFile:o=>o.endsWith(".wasm")?cu.toString():o});return new Promise((o,a)=>{i.then(h=>{Hn.codec=h,Hn.decoder=new h.JpegLSDecoder,o()},a)})}async function Ri(e,i){try{await rs();const o=Hn.decoder;o.getEncodedBuffer(e.length).set(e),o.decode();const h=o.getFrameInfo(),r=o.getInterleaveMode(),g=o.getNearLossless(),T=o.getDecodedBuffer(),E={columns:h.width,rows:h.height,bitsPerPixel:h.bitsPerSample,signed:i.signed,bytesPerPixel:i.bytesPerPixel,componentsPerPixel:h.componentCount},S=fu(h,T,i.signed),$={nearLossless:g,interleaveMode:r,frameInfo:h};return{...i,pixelData:S,imageInfo:E,encodeOptions:$,...$,...E}}catch(o){throw lu(o)}}function fu(e,i,o){return e.bitsPerSample>8?o?new Int16Array(i.buffer,i.byteOffset,i.byteLength/2):new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2):o?new Int8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var bi={exports:{}},io;function du(){return io||(io=1,(function(e,i){var o=(()=>{var a=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(a=a||__filename),(function(h={}){var r,g=h,T,E,S=new Promise((c,l)=>{T=c,E=l}),$=typeof window=="object",k=typeof WorkerGlobalScope<"u",M=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",U=Object.assign({},g),G="./this.program",J="";function X(c){return g.locateFile?g.locateFile(c,J):J+c}var Z,K;if(M){var ne=Wn;J=__dirname+"/",K=c=>{c=pt(c)?new URL(c):c;var l=ne.readFileSync(c);return l},Z=async(c,l=!0)=>{c=pt(c)?new URL(c):c;var y=ne.readFileSync(c,l?void 0:"utf8");return y},!g.thisProgram&&process.argv.length>1&&(G=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else($||k)&&(k?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),a&&(J=a),J.startsWith("blob:")?J="":J=J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1),k&&(K=c=>{var l=new XMLHttpRequest;return l.open("GET",c,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),Z=async c=>{if(pt(c))return new Promise((y,P)=>{var x=new XMLHttpRequest;x.open("GET",c,!0),x.responseType="arraybuffer",x.onload=()=>{if(x.status==200||x.status==0&&x.response){y(x.response);return}P(x.status)},x.onerror=P,x.send(null)});var l=await fetch(c,{credentials:"same-origin"});if(l.ok)return l.arrayBuffer();throw new Error(l.status+" : "+l.url)});var ae=g.print||console.log.bind(console),be=g.printErr||console.error.bind(console);Object.assign(g,U),U=null,g.arguments&&g.arguments,g.thisProgram&&(G=g.thisProgram);var ve=g.wasmBinary,Re,le=!1,ce,he,xe,De,Ue,ie,Ce,Ee;function we(){var c=Re.buffer;g.HEAP8=ce=new Int8Array(c),g.HEAP16=xe=new Int16Array(c),g.HEAPU8=he=new Uint8Array(c),g.HEAPU16=De=new Uint16Array(c),g.HEAP32=Ue=new Int32Array(c),g.HEAPU32=ie=new Uint32Array(c),g.HEAPF32=Ce=new Float32Array(c),g.HEAPF64=Ee=new Float64Array(c)}var $e=[],ge=[],fe=[];function Ae(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)rr(g.preRun.shift());ke($e)}function Ge(){ke(ge)}function Pe(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)ir(g.postRun.shift());ke(fe)}function rr(c){$e.unshift(c)}function nr(c){ge.unshift(c)}function ir(c){fe.unshift(c)}var dt=0,Ot=null;function Fr(c){dt++,g.monitorRunDependencies?.(dt)}function jr(c){if(dt--,g.monitorRunDependencies?.(dt),dt==0&&Ot){var l=Ot;Ot=null,l()}}function Wr(c){g.onAbort?.(c),c="Aborted("+c+")",be(c),le=!0,c+=". Build with -sASSERTIONS for more info.";var l=new WebAssembly.RuntimeError(c);throw E(l),l}var hn="data:application/octet-stream;base64,",Hr=c=>c.startsWith(hn),pt=c=>c.startsWith("file://");function it(){var c="openjpegwasm_decode.wasm";return Hr(c)?c:X(c)}var Lt;function Ut(c){if(c==Lt&&ve)return new Uint8Array(ve);if(K)return K(c);throw"both async and sync fetching of the wasm failed"}async function wt(c){if(!ve)try{var l=await Z(c);return new Uint8Array(l)}catch{}return Ut(c)}async function Ht(c,l){try{var y=await wt(c),P=await WebAssembly.instantiate(y,l);return P}catch(x){be(`failed to asynchronously prepare wasm: ${x}`),Wr(x)}}async function Nr(c,l,y){if(!c&&typeof WebAssembly.instantiateStreaming=="function"&&!Hr(l)&&!pt(l)&&!M&&typeof fetch=="function")try{var P=fetch(l,{credentials:"same-origin"}),x=await WebAssembly.instantiateStreaming(P,y);return x}catch(F){be(`wasm streaming compile failed: ${F}`),be("falling back to ArrayBuffer instantiation")}return Ht(l,y)}function Pt(){return{a:m}}async function Fe(){function c(x,F){return A=x.exports,Re=A.F,we(),Cr=A.I,nr(A.G),jr(),A}Fr();function l(x){c(x.instance)}var y=Pt();if(g.instantiateWasm)try{return g.instantiateWasm(y,c)}catch(x){be(`Module.instantiateWasm callback failed with error: ${x}`),E(x)}Lt??=it();try{var P=await Nr(ve,Lt,y);return l(P),P}catch(x){E(x);return}}var ke=c=>{for(;c.length>0;)c.shift()(g)};g.noExitRuntime;var Yt=c=>D(c),Be=()=>z();class Vr{constructor(l){this.excPtr=l,this.ptr=l-24}set_type(l){ie[this.ptr+4>>2]=l}get_type(){return ie[this.ptr+4>>2]}set_destructor(l){ie[this.ptr+8>>2]=l}get_destructor(){return ie[this.ptr+8>>2]}set_caught(l){l=l?1:0,ce[this.ptr+12]=l}get_caught(){return ce[this.ptr+12]!=0}set_rethrown(l){l=l?1:0,ce[this.ptr+13]=l}get_rethrown(){return ce[this.ptr+13]!=0}init(l,y){this.set_adjusted_ptr(0),this.set_type(l),this.set_destructor(y)}set_adjusted_ptr(l){ie[this.ptr+16>>2]=l}get_adjusted_ptr(){return ie[this.ptr+16>>2]}}var or=0,br=(c,l,y)=>{var P=new Vr(c);throw P.init(l,y),or=c,or},Gr=()=>Wr(""),ht={},sr=c=>{for(;c.length;){var l=c.pop(),y=c.pop();y(l)}};function Tt(c){return this.fromWireType(ie[c>>2])}var Oe={},je={},Se={},kt,vt=c=>{throw new kt(c)},ze=(c,l,y)=>{c.forEach(O=>Se[O]=l);function P(O){var V=y(O);V.length!==c.length&&vt("Mismatched type converter count");for(var s=0;s<c.length;++s)Ne(c[s],V[s])}var x=new Array(l.length),F=[],N=0;l.forEach((O,V)=>{je.hasOwnProperty(O)?x[V]=je[O]:(F.push(O),Oe.hasOwnProperty(O)||(Oe[O]=[]),Oe[O].push(()=>{x[V]=je[O],++N,N===F.length&&P(x)}))}),F.length===0&&P(x)},wr=c=>{var l=ht[c];delete ht[c];var y=l.rawConstructor,P=l.rawDestructor,x=l.fields,F=x.map(N=>N.getterReturnType).concat(x.map(N=>N.setterArgumentType));ze([c],F,N=>{var O={};return x.forEach((V,s)=>{var u=V.fieldName,t=N[s],n=V.getter,f=V.getterContext,v=N[s+x.length],_=V.setter,b=V.setterContext;O[u]={read:w=>t.fromWireType(n(f,w)),write:(w,C)=>{var R=[];_(b,w,v.toWireType(R,C)),sr(R)}}}),[{name:l.name,fromWireType:V=>{var s={};for(var u in O)s[u]=O[u].read(V);return P(V),s},toWireType:(V,s)=>{for(var u in O)if(!(u in s))throw new TypeError(`Missing field: "${u}"`);var t=y();for(u in O)O[u].write(t,s[u]);return V!==null&&V.push(P,t),t},argPackAdvance:Qe,readValueFromPointer:Tt,destructorFunction:P}]})},Pr=(c,l,y,P,x)=>{},ar=()=>{for(var c=new Array(256),l=0;l<256;++l)c[l]=String.fromCharCode(l);Mt=c},Mt,Te=c=>{for(var l="",y=c;he[y];)l+=Mt[he[y++]];return l},$t,se=c=>{throw new $t(c)};function Xe(c,l,y={}){var P=l.name;if(c||se(`type "${P}" must have a positive integer typeid pointer`),je.hasOwnProperty(c)){if(y.ignoreDuplicateRegistrations)return;se(`Cannot register type '${P}' twice`)}if(je[c]=l,delete Se[c],Oe.hasOwnProperty(c)){var x=Oe[c];delete Oe[c],x.forEach(F=>F())}}function Ne(c,l,y={}){return Xe(c,l,y)}var Qe=8,Me=(c,l,y,P)=>{l=Te(l),Ne(c,{name:l,fromWireType:function(x){return!!x},toWireType:function(x,F){return F?y:P},argPackAdvance:Qe,readValueFromPointer:function(x){return this.fromWireType(he[x])},destructorFunction:null})},Nt=c=>({count:c.count,deleteScheduled:c.deleteScheduled,preservePointerOnDelete:c.preservePointerOnDelete,ptr:c.ptr,ptrType:c.ptrType,smartPtr:c.smartPtr,smartPtrType:c.smartPtrType}),ue=c=>{function l(y){return y.$$.ptrType.registeredClass.name}se(l(c)+" instance already deleted")},_e=!1,Ct=c=>{},de=c=>{c.smartPtr?c.smartPtrType.rawDestructor(c.smartPtr):c.ptrType.registeredClass.rawDestructor(c.ptr)},Ke=c=>{c.count.value-=1;var l=c.count.value===0;l&&de(c)},gt=(c,l,y)=>{if(l===y)return c;if(y.baseClass===void 0)return null;var P=gt(c,l,y.baseClass);return P===null?null:y.downcast(P)},ur={},Br={},Xt=(c,l)=>{for(l===void 0&&se("ptr should not be undefined");c.baseClass;)l=c.upcast(l),c=c.baseClass;return l},cr=(c,l)=>(l=Xt(c,l),Br[l]),Ft=(c,l)=>{(!l.ptrType||!l.ptr)&&vt("makeClassHandle requires ptr and ptrType");var y=!!l.smartPtrType,P=!!l.smartPtr;return y!==P&&vt("Both smartPtrType and smartPtr must be specified"),l.count={value:1},ot(Object.create(c,{$$:{value:l,writable:!0}}))};function He(c){var l=this.getPointee(c);if(!l)return this.destructor(c),null;var y=cr(this.registeredClass,l);if(y!==void 0){if(y.$$.count.value===0)return y.$$.ptr=l,y.$$.smartPtr=c,y.clone();var P=y.clone();return this.destructor(c),P}function x(){return this.isSmartPointer?Ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:l,smartPtrType:this,smartPtr:c}):Ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:c})}var F=this.registeredClass.getActualType(l),N=ur[F];if(!N)return x.call(this);var O;this.isConst?O=N.constPointerType:O=N.pointerType;var V=gt(l,this.registeredClass,O.registeredClass);return V===null?x.call(this):this.isSmartPointer?Ft(O.registeredClass.instancePrototype,{ptrType:O,ptr:V,smartPtrType:this,smartPtr:c}):Ft(O.registeredClass.instancePrototype,{ptrType:O,ptr:V})}var ot=c=>typeof FinalizationRegistry>"u"?(ot=l=>l,c):(_e=new FinalizationRegistry(l=>{Ke(l.$$)}),ot=l=>{var y=l.$$,P=!!y.smartPtr;if(P){var x={$$:y};_e.register(l,x,l)}return l},Ct=l=>_e.unregister(l),ot(c)),pe=()=>{Object.assign(We.prototype,{isAliasOf(c){if(!(this instanceof We)||!(c instanceof We))return!1;var l=this.$$.ptrType.registeredClass,y=this.$$.ptr;c.$$=c.$$;for(var P=c.$$.ptrType.registeredClass,x=c.$$.ptr;l.baseClass;)y=l.upcast(y),l=l.baseClass;for(;P.baseClass;)x=P.upcast(x),P=P.baseClass;return l===P&&y===x},clone(){if(this.$$.ptr||ue(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var c=ot(Object.create(Object.getPrototypeOf(this),{$$:{value:Nt(this.$$)}}));return c.$$.count.value+=1,c.$$.deleteScheduled=!1,c},delete(){this.$$.ptr||ue(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&se("Object already scheduled for deletion"),Ct(this),Ke(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ue(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&se("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function We(){}var jt=(c,l)=>Object.defineProperty(l,"name",{value:c}),Vt=(c,l,y)=>{if(c[l].overloadTable===void 0){var P=c[l];c[l]=function(...x){return c[l].overloadTable.hasOwnProperty(x.length)||se(`Function '${y}' called with an invalid number of arguments (${x.length}) - expects one of (${c[l].overloadTable})!`),c[l].overloadTable[x.length].apply(this,x)},c[l].overloadTable=[],c[l].overloadTable[P.argCount]=P}},Qt=(c,l,y)=>{g.hasOwnProperty(c)?(se(`Cannot register public name '${c}' twice`),Vt(g,c,c),g[c].overloadTable.hasOwnProperty(y)&&se(`Cannot register multiple overloads of a function with the same number of arguments (${y})!`),g[c].overloadTable[y]=l):(g[c]=l,g[c].argCount=y)},Kt=48,st=57,zr=c=>{c=c.replace(/[^a-zA-Z0-9_]/g,"$");var l=c.charCodeAt(0);return l>=Kt&&l<=st?`_${c}`:c};function vn(c,l,y,P,x,F,N,O){this.name=c,this.constructor=l,this.instancePrototype=y,this.rawDestructor=P,this.baseClass=x,this.getActualType=F,this.upcast=N,this.downcast=O,this.pureVirtualFunctions=[]}var at=(c,l,y)=>{for(;l!==y;)l.upcast||se(`Expected null or instance of ${y.name}, got an instance of ${l.name}`),c=l.upcast(c),l=l.baseClass;return c};function Jr(c,l){if(l===null)return this.isReference&&se(`null is not a valid ${this.name}`),0;l.$$||se(`Cannot pass "${vr(l)}" as a ${this.name}`),l.$$.ptr||se(`Cannot pass deleted object as a pointer of type ${this.name}`);var y=l.$$.ptrType.registeredClass,P=at(l.$$.ptr,y,this.registeredClass);return P}function Gt(c,l){var y;if(l===null)return this.isReference&&se(`null is not a valid ${this.name}`),this.isSmartPointer?(y=this.rawConstructor(),c!==null&&c.push(this.rawDestructor,y),y):0;(!l||!l.$$)&&se(`Cannot pass "${vr(l)}" as a ${this.name}`),l.$$.ptr||se(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&l.$$.ptrType.isConst&&se(`Cannot convert argument of type ${l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name} to parameter type ${this.name}`);var P=l.$$.ptrType.registeredClass;if(y=at(l.$$.ptr,P,this.registeredClass),this.isSmartPointer)switch(l.$$.smartPtr===void 0&&se("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:l.$$.smartPtrType===this?y=l.$$.smartPtr:se(`Cannot convert argument of type ${l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:y=l.$$.smartPtr;break;case 2:if(l.$$.smartPtrType===this)y=l.$$.smartPtr;else{var x=l.clone();y=this.rawShare(y,nt.toHandle(()=>x.delete())),c!==null&&c.push(this.rawDestructor,y)}break;default:se("Unsupporting sharing policy")}return y}function lr(c,l){if(l===null)return this.isReference&&se(`null is not a valid ${this.name}`),0;l.$$||se(`Cannot pass "${vr(l)}" as a ${this.name}`),l.$$.ptr||se(`Cannot pass deleted object as a pointer of type ${this.name}`),l.$$.ptrType.isConst&&se(`Cannot convert argument of type ${l.$$.ptrType.name} to parameter type ${this.name}`);var y=l.$$.ptrType.registeredClass,P=at(l.$$.ptr,y,this.registeredClass);return P}var gn=()=>{Object.assign(rt.prototype,{getPointee(c){return this.rawGetPointee&&(c=this.rawGetPointee(c)),c},destructor(c){this.rawDestructor?.(c)},argPackAdvance:Qe,readValueFromPointer:Tt,fromWireType:He})};function rt(c,l,y,P,x,F,N,O,V,s,u){this.name=c,this.registeredClass=l,this.isReference=y,this.isConst=P,this.isSmartPointer=x,this.pointeeType=F,this.sharingPolicy=N,this.rawGetPointee=O,this.rawConstructor=V,this.rawShare=s,this.rawDestructor=u,!x&&l.baseClass===void 0?P?(this.toWireType=Jr,this.destructorFunction=null):(this.toWireType=lr,this.destructorFunction=null):this.toWireType=Gt}var Tr=(c,l,y)=>{g.hasOwnProperty(c)||vt("Replacing nonexistent public symbol"),g[c].overloadTable!==void 0&&y!==void 0||(g[c]=l,g[c].argCount=y)},Zt=(c,l,y)=>{c=c.replace(/p/g,"i");var P=g["dynCall_"+c];return P(l,...y)},ut=[],Cr,Wt=c=>{var l=ut[c];return l||(c>=ut.length&&(ut.length=c+1),ut[c]=l=Cr.get(c)),l},St=(c,l,y=[])=>{if(c.includes("j"))return Zt(c,l,y);var P=Wt(l)(...y);return P},fr=(c,l)=>(...y)=>St(c,l,y),Ze=(c,l)=>{c=Te(c);function y(){return c.includes("j")?fr(c,l):Wt(l)}var P=y();return typeof P!="function"&&se(`unknown function pointer with signature ${c}: ${l}`),P},yn=(c,l)=>{var y=jt(l,function(P){this.name=l,this.message=P;var x=new Error(P).stack;x!==void 0&&(this.stack=this.toString()+`
`+x.replace(/^Error(:[^\n]*)?\n/,""))});return y.prototype=Object.create(c.prototype),y.prototype.constructor=y,y.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},y},It,qr=c=>{var l=I(c),y=Te(l);return L(l),y},Er=(c,l)=>{var y=[],P={};function x(F){if(!P[F]&&!je[F]){if(Se[F]){Se[F].forEach(x);return}y.push(F),P[F]=!0}}throw l.forEach(x),new It(`${c}: `+y.map(qr).join([", "]))},_n=(c,l,y,P,x,F,N,O,V,s,u,t,n)=>{u=Te(u),F=Ze(x,F),O&&=Ze(N,O),s&&=Ze(V,s),n=Ze(t,n);var f=zr(u);Qt(f,function(){Er(`Cannot construct ${u} due to unbound types`,[P])}),ze([c,l,y],P?[P]:[],v=>{v=v[0];var _,b;P?(_=v.registeredClass,b=_.instancePrototype):b=We.prototype;var w=jt(u,function(...q){if(Object.getPrototypeOf(this)!==C)throw new $t("Use 'new' to construct "+u);if(R.constructor_body===void 0)throw new $t(u+" has no accessible constructor");var oe=R.constructor_body[q.length];if(oe===void 0)throw new $t(`Tried to invoke ctor of ${u} with invalid number of parameters (${q.length}) - expected (${Object.keys(R.constructor_body).toString()}) parameters instead!`);return oe.apply(this,q)}),C=Object.create(b,{constructor:{value:w}});w.prototype=C;var R=new vn(u,w,C,n,_,F,O,s);R.baseClass&&(R.baseClass.__derivedClasses??=[],R.baseClass.__derivedClasses.push(R));var j=new rt(u,R,!0,!1,!1),B=new rt(u+"*",R,!1,!1,!1),Y=new rt(u+" const*",R,!1,!0,!1);return ur[c]={pointerType:B,constPointerType:Y},Tr(f,w),[j,B,Y]})},Yr=(c,l)=>{for(var y=[],P=0;P<c;P++)y.push(ie[l+P*4>>2]);return y};function yt(c){for(var l=1;l<c.length;++l)if(c[l]!==null&&c[l].destructorFunction===void 0)return!0;return!1}function _t(c,l){if(!(c instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof c} which is not a function`);var y=jt(c.name||"unknownFunctionName",function(){});y.prototype=c.prototype;var P=new y,x=c.apply(P,l);return x instanceof Object?x:P}function Xr(c,l,y,P){var x=yt(c),F=c.length-2,N=[],O=["fn"];l&&O.push("thisWired");for(var V=0;V<F;++V)N.push(`arg${V}`),O.push(`arg${V}Wired`);N=N.join(","),O=O.join(",");var s=`return function (${N}) {
`;x&&(s+=`var destructors = [];
`);var u=x?"destructors":"null",t=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];l&&(s+=`var thisWired = classParam['toWireType'](${u}, this);
`);for(var V=0;V<F;++V)s+=`var arg${V}Wired = argType${V}['toWireType'](${u}, arg${V});
`,t.push(`argType${V}`);if(s+=(y||P?"var rv = ":"")+`invoker(${O});
`,x)s+=`runDestructors(destructors);
`;else for(var V=l?1:2;V<c.length;++V){var n=V===1?"thisWired":"arg"+(V-2)+"Wired";c[V].destructorFunction!==null&&(s+=`${n}_dtor(${n});
`,t.push(`${n}_dtor`))}return y&&(s+=`var ret = retType['fromWireType'](rv);
return ret;
`),s+=`}
`,[t,s]}function Je(c,l,y,P,x,F){var N=l.length;N<2&&se("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=l[1]!==null&&y!==null,V=yt(l),s=l[0].name!=="void",u=[c,se,P,x,sr,l[0],l[1]],t=0;t<N-2;++t)u.push(l[t+2]);if(!V)for(var t=O?1:2;t<l.length;++t)l[t].destructorFunction!==null&&u.push(l[t].destructorFunction);let[n,f]=Xr(l,O,s,F);n.push(f);var v=_t(Function,n)(...u);return jt(c,v)}var Qr=(c,l,y,P,x,F)=>{var N=Yr(l,y);x=Ze(P,x),ze([],[c],O=>{O=O[0];var V=`constructor ${O.name}`;if(O.registeredClass.constructor_body===void 0&&(O.registeredClass.constructor_body=[]),O.registeredClass.constructor_body[l-1]!==void 0)throw new $t(`Cannot register multiple constructors with identical number of parameters (${l-1}) for class '${O.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return O.registeredClass.constructor_body[l-1]=()=>{Er(`Cannot construct ${O.name} due to unbound types`,N)},ze([],N,s=>(s.splice(1,0,null),O.registeredClass.constructor_body[l-1]=Je(V,s,null,x,F),[])),[]})},Ar=c=>{c=c.trim();const l=c.indexOf("(");return l!==-1?c.substr(0,l):c},dr=(c,l,y,P,x,F,N,O,V,s)=>{var u=Yr(y,P);l=Te(l),l=Ar(l),F=Ze(x,F),ze([],[c],t=>{t=t[0];var n=`${t.name}.${l}`;l.startsWith("@@")&&(l=Symbol[l.substring(2)]),O&&t.registeredClass.pureVirtualFunctions.push(l);function f(){Er(`Cannot call ${n} due to unbound types`,u)}var v=t.registeredClass.instancePrototype,_=v[l];return _===void 0||_.overloadTable===void 0&&_.className!==t.name&&_.argCount===y-2?(f.argCount=y-2,f.className=t.name,v[l]=f):(Vt(v,l,n),v[l].overloadTable[y-2]=f),ze([],u,b=>{var w=Je(n,b,t,F,N,V);return v[l].overloadTable===void 0?(w.argCount=y-2,v[l]=w):v[l].overloadTable[y-2]=w,[]}),[]})},Le=[],Et=[],pr=c=>{c>9&&--Et[c+1]===0&&(Et[c]=void 0,Le.push(c))},et=()=>Et.length/2-5-Le.length,Kr=()=>{Et.push(0,1,void 0,1,null,1,!0,1,!1,1),g.count_emval_handles=et},nt={toValue:c=>(c||se("Cannot use deleted val. handle = "+c),Et[c]),toHandle:c=>{switch(c){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const l=Le.pop()||Et.length;return Et[l]=c,Et[l+1]=1,l}}}},ct={name:"emscripten::val",fromWireType:c=>{var l=nt.toValue(c);return pr(c),l},toWireType:(c,l)=>nt.toHandle(l),argPackAdvance:Qe,readValueFromPointer:Tt,destructorFunction:null},hr=c=>Ne(c,ct),vr=c=>{if(c===null)return"null";var l=typeof c;return l==="object"||l==="array"||l==="function"?c.toString():""+c},mn=(c,l)=>{switch(l){case 4:return function(y){return this.fromWireType(Ce[y>>2])};case 8:return function(y){return this.fromWireType(Ee[y>>3])};default:throw new TypeError(`invalid float width (${l}): ${c}`)}},gr=(c,l,y)=>{l=Te(l),Ne(c,{name:l,fromWireType:P=>P,toWireType:(P,x)=>x,argPackAdvance:Qe,readValueFromPointer:mn(l,y),destructorFunction:null})},Ie=(c,l,y)=>{switch(l){case 1:return y?P=>ce[P]:P=>he[P];case 2:return y?P=>xe[P>>1]:P=>De[P>>1];case 4:return y?P=>Ue[P>>2]:P=>ie[P>>2];default:throw new TypeError(`invalid integer width (${l}): ${c}`)}},Rr=(c,l,y,P,x)=>{l=Te(l);var F=u=>u;if(P===0){var N=32-8*y;F=u=>u<<N>>>N}var O=l.includes("unsigned"),V=(u,t)=>{},s;O?s=function(u,t){return V(t,this.name),t>>>0}:s=function(u,t){return V(t,this.name),t},Ne(c,{name:l,fromWireType:F,toWireType:s,argPackAdvance:Qe,readValueFromPointer:Ie(l,y,P!==0),destructorFunction:null})},yr=(c,l,y)=>{var P=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],x=P[l];function F(N){var O=ie[N>>2],V=ie[N+4>>2];return new x(ce.buffer,V,O)}y=Te(y),Ne(c,{name:y,fromWireType:F,argPackAdvance:Qe,readValueFromPointer:F},{ignoreDuplicateRegistrations:!0})},qe=(c,l,y,P)=>{if(!(P>0))return 0;for(var x=y,F=y+P-1,N=0;N<c.length;++N){var O=c.charCodeAt(N);if(O>=55296&&O<=57343){var V=c.charCodeAt(++N);O=65536+((O&1023)<<10)|V&1023}if(O<=127){if(y>=F)break;l[y++]=O}else if(O<=2047){if(y+1>=F)break;l[y++]=192|O>>6,l[y++]=128|O&63}else if(O<=65535){if(y+2>=F)break;l[y++]=224|O>>12,l[y++]=128|O>>6&63,l[y++]=128|O&63}else{if(y+3>=F)break;l[y++]=240|O>>18,l[y++]=128|O>>12&63,l[y++]=128|O>>6&63,l[y++]=128|O&63}}return l[y]=0,y-x},xr=(c,l,y)=>qe(c,he,l,y),lt=c=>{for(var l=0,y=0;y<c.length;++y){var P=c.charCodeAt(y);P<=127?l++:P<=2047?l+=2:P>=55296&&P<=57343?(l+=4,++y):l+=3}return l},Zr=typeof TextDecoder<"u"?new TextDecoder:void 0,Bt=(c,l=0,y=NaN)=>{for(var P=l+y,x=l;c[x]&&!(x>=P);)++x;if(x-l>16&&c.buffer&&Zr)return Zr.decode(c.subarray(l,x));for(var F="";l<x;){var N=c[l++];if(!(N&128)){F+=String.fromCharCode(N);continue}var O=c[l++]&63;if((N&224)==192){F+=String.fromCharCode((N&31)<<6|O);continue}var V=c[l++]&63;if((N&240)==224?N=(N&15)<<12|O<<6|V:N=(N&7)<<18|O<<12|V<<6|c[l++]&63,N<65536)F+=String.fromCharCode(N);else{var s=N-65536;F+=String.fromCharCode(55296|s>>10,56320|s&1023)}}return F},At=(c,l)=>c?Bt(he,c,l):"",bn=(c,l)=>{l=Te(l),Ne(c,{name:l,fromWireType(y){for(var P=ie[y>>2],x=y+4,F,N,O=x,N=0;N<=P;++N){var V=x+N;if(N==P||he[V]==0){var s=V-O,u=At(O,s);F===void 0?F=u:(F+="\0",F+=u),O=V+1}}return L(y),F},toWireType(y,P){P instanceof ArrayBuffer&&(P=new Uint8Array(P));var x,F=typeof P=="string";F||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int8Array||se("Cannot pass non-string to std::string"),F?x=lt(P):x=P.length;var N=H(4+x+1),O=N+4;if(ie[N>>2]=x,F)xr(P,O,x+1);else if(F)for(var V=0;V<x;++V){var s=P.charCodeAt(V);s>255&&(L(O),se("String has UTF-16 code units that do not fit in 8 bits")),he[O+V]=s}else for(var V=0;V<x;++V)he[O+V]=P[V];return y!==null&&y.push(L,N),N},argPackAdvance:Qe,readValueFromPointer:Tt,destructorFunction(y){L(y)}})},zt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ft=(c,l)=>{for(var y=c,P=y>>1,x=P+l/2;!(P>=x)&&De[P];)++P;if(y=P<<1,y-c>32&&zt)return zt.decode(he.subarray(c,y));for(var F="",N=0;!(N>=l/2);++N){var O=xe[c+N*2>>1];if(O==0)break;F+=String.fromCharCode(O)}return F},en=(c,l,y)=>{if(y??=2147483647,y<2)return 0;y-=2;for(var P=l,x=y<c.length*2?y/2:c.length,F=0;F<x;++F){var N=c.charCodeAt(F);xe[l>>1]=N,l+=2}return xe[l>>1]=0,l-P},wn=c=>c.length*2,Pn=(c,l)=>{for(var y=0,P="";!(y>=l/4);){var x=Ue[c+y*4>>2];if(x==0)break;if(++y,x>=65536){var F=x-65536;P+=String.fromCharCode(55296|F>>10,56320|F&1023)}else P+=String.fromCharCode(x)}return P},tn=(c,l,y)=>{if(y??=2147483647,y<4)return 0;for(var P=l,x=P+y-4,F=0;F<c.length;++F){var N=c.charCodeAt(F);if(N>=55296&&N<=57343){var O=c.charCodeAt(++F);N=65536+((N&1023)<<10)|O&1023}if(Ue[l>>2]=N,l+=4,l+4>x)break}return Ue[l>>2]=0,l-P},_r=c=>{for(var l=0,y=0;y<c.length;++y){var P=c.charCodeAt(y);P>=55296&&P<=57343&&++y,l+=4}return l},rn=(c,l,y)=>{y=Te(y);var P,x,F,N;l===2?(P=ft,x=en,N=wn,F=O=>De[O>>1]):l===4&&(P=Pn,x=tn,N=_r,F=O=>ie[O>>2]),Ne(c,{name:y,fromWireType:O=>{for(var V=ie[O>>2],s,u=O+4,t=0;t<=V;++t){var n=O+4+t*l;if(t==V||F(n)==0){var f=n-u,v=P(u,f);s===void 0?s=v:(s+="\0",s+=v),u=n+l}}return L(O),s},toWireType:(O,V)=>{typeof V!="string"&&se(`Cannot pass non-string to C++ string type ${y}`);var s=N(V),u=H(4+s+l);return ie[u>>2]=s/l,x(V,u+4,s+l),O!==null&&O.push(L,u),u},argPackAdvance:Qe,readValueFromPointer:Tt,destructorFunction(O){L(O)}})},$r=(c,l,y,P,x,F)=>{ht[c]={name:Te(l),rawConstructor:Ze(y,P),rawDestructor:Ze(x,F),fields:[]}},Tn=(c,l,y,P,x,F,N,O,V,s)=>{ht[c].fields.push({fieldName:Te(l),getterReturnType:y,getter:Ze(P,x),getterContext:F,setterArgumentType:N,setter:Ze(O,V),setterContext:s})},Cn=(c,l)=>{l=Te(l),Ne(c,{isVoid:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:(y,P)=>{}})},En=(c,l,y)=>he.copyWithin(c,l,l+y),Sr=[],An=(c,l,y,P)=>(c=Sr[c],l=nt.toValue(l),c(null,l,y,P)),Rn={},xn=c=>{var l=Rn[c];return l===void 0?Te(c):l},Ir=()=>typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")(),$n=c=>c===0?nt.toHandle(Ir()):(c=xn(c),nt.toHandle(Ir()[c])),nn=c=>{var l=Sr.length;return Sr.push(c),l},on=(c,l)=>{var y=je[c];return y===void 0&&se(`${l} has unknown type ${qr(c)}`),y},Sn=(c,l)=>{for(var y=new Array(c),P=0;P<c;++P)y[P]=on(ie[l+P*4>>2],"parameter "+P);return y},Dr=(c,l,y)=>{var P=[],x=c.toWireType(P,y);return P.length&&(ie[l>>2]=nt.toHandle(P)),x},In=(c,l,y)=>{var P=Sn(c,l),x=P.shift();c--;var F=`return function (obj, func, destructorsRef, args) {
`,N=0,O=[];y===0&&O.push("obj");for(var V=["retType"],s=[x],u=0;u<c;++u)O.push("arg"+u),V.push("argType"+u),s.push(P[u]),F+=`  var arg${u} = argType${u}.readValueFromPointer(args${N?"+"+N:""});
`,N+=P[u].argPackAdvance;var t=y===1?"new func":"func.call";F+=`  var rv = ${t}(${O.join(", ")});
`,x.isVoid||(V.push("emval_returnValue"),s.push(Dr),F+=`  return emval_returnValue(retType, destructorsRef, rv);
`),F+=`};
`,V.push(F);var n=_t(Function,V)(...s),f=`methodCaller<(${P.map(v=>v.name).join(", ")}) => ${x.name}>`;return nn(jt(f,n))},sn=c=>{var l=nt.toValue(c);sr(l),pr(c)},an=(c,l)=>{c=on(c,"_emval_take_value");var y=c.readValueFromPointer(l);return nt.toHandle(y)},un=()=>2147483648,cn=()=>un(),Dn=(c,l)=>Math.ceil(c/l)*l,On=c=>{var l=Re.buffer,y=(c-l.byteLength+65535)/65536|0;try{return Re.grow(y),we(),1}catch{}},Ln=c=>{var l=he.length;c>>>=0;var y=un();if(c>y)return!1;for(var P=1;P<=4;P*=2){var x=l*(1+.2/P);x=Math.min(x,c+100663296);var F=Math.min(y,Dn(Math.max(c,x),65536)),N=On(F);if(N)return!0}return!1},Or={},Un=()=>G||"./this.program",er=()=>{if(!er.strings){var c=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",l={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:c,_:Un()};for(var y in Or)Or[y]===void 0?delete l[y]:l[y]=Or[y];var P=[];for(var y in l)P.push(`${y}=${l[y]}`);er.strings=P}return er.strings},kn=(c,l)=>{for(var y=0;y<c.length;++y)ce[l++]=c.charCodeAt(y);ce[l]=0},Lr=(c,l)=>{var y=0;return er().forEach((P,x)=>{var F=l+y;ie[c+x*4>>2]=F,kn(P,F),y+=P.length+1}),0},Ur=(c,l)=>{var y=er();ie[c>>2]=y.length;var P=0;return y.forEach(x=>P+=x.length+1),ie[l>>2]=P,0},Jt=c=>52;function Rt(c,l,y,P,x){return 70}var ln=[null,[],[]],fn=(c,l)=>{var y=ln[c];l===0||l===10?((c===1?ae:be)(Bt(y)),y.length=0):y.push(l)},kr=(c,l,y,P)=>{for(var x=0,F=0;F<y;F++){var N=ie[l>>2],O=ie[l+4>>2];l+=8;for(var V=0;V<O;V++)fn(c,he[N+V]);x+=O}return ie[P>>2]=x,0},dn=c=>{var l=g["_"+c];return l},mr=(c,l)=>{ce.set(c,l)},Mr=c=>W(c),d=c=>{var l=lt(c)+1,y=Mr(l);return xr(c,y,l),y},p=(c,l,y,P,x)=>{var F={string:v=>{var _=0;return v!=null&&v!==0&&(_=d(v)),_},array:v=>{var _=Mr(v.length);return mr(v,_),_}};function N(v){return l==="string"?At(v):l==="boolean"?!!v:v}var O=dn(c),V=[],s=0;if(P)for(var u=0;u<P.length;u++){var t=F[y[u]];t?(s===0&&(s=Be()),V[u]=t(P[u])):V[u]=P[u]}var n=O(...V);function f(v){return s!==0&&Yt(s),N(v)}return n=f(n),n};kt=g.InternalError=class extends Error{constructor(l){super(l),this.name="InternalError"}},ar(),$t=g.BindingError=class extends Error{constructor(l){super(l),this.name="BindingError"}},pe(),gn(),It=g.UnboundTypeError=yn(Error,"UnboundTypeError"),Kr();var m={A:br,p:Gr,e:wr,o:Pr,y:Me,m:_n,l:Qr,b:dr,w:hr,i:gr,d:Rr,a:yr,x:bn,g:rn,f:$r,c:Tn,z:Cn,v:En,C:An,D:pr,E:$n,j:In,B:sn,k:an,r:cn,q:Ln,s:Lr,t:Ur,u:Jt,n:Rt,h:kr},A;Fe();var I=c=>(I=A.H)(c),H=c=>(H=A.J)(c),L=c=>(L=A.K)(c),D=c=>(D=A.L)(c),W=c=>(W=A.M)(c),z=()=>(z=A.N)();g.dynCall_iji=(c,l,y,P)=>(g.dynCall_iji=A.O)(c,l,y,P),g.dynCall_jji=(c,l,y,P)=>(g.dynCall_jji=A.P)(c,l,y,P),g.dynCall_iiji=(c,l,y,P,x)=>(g.dynCall_iiji=A.Q)(c,l,y,P,x),g.dynCall_jiji=(c,l,y,P,x)=>(g.dynCall_jiji=A.R)(c,l,y,P,x),g.ccall=p;var Q;Ot=function c(){Q||ee(),Q||(Ot=c)};function ee(){if(dt>0||(Ae(),dt>0))return;function c(){Q||(Q=!0,g.calledRun=!0,!le&&(Ge(),T(g),g.onRuntimeInitialized?.(),Pe()))}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),c()},1)):c()}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();return ee(),r=S,r})})();e.exports=o,e.exports.default=o})(bi)),bi.exports}var pu=du();const hu=ai(pu),vu=new URL("/radiology-ai-viewer/assets/openjpegwasm_decode-B3gWTHpv.wasm",import.meta.url),Yn={codec:void 0,decoder:void 0,decodeConfig:{}};function ns(e){if(Yn.decodeConfig=e,Yn.codec)return Promise.resolve();const i=hu({locateFile:o=>o.endsWith(".wasm")?vu.toString():o});return new Promise((o,a)=>{i.then(h=>{Yn.codec=h,Yn.decoder=new h.J2KDecoder,o()},a)})}async function xi(e,i){await ns();const o=Yn.decoder,a=o.getEncodedBuffer(e.length);a.set(e),o.decode();const h=o.getFrameInfo(),r=o.getDecodedBuffer();new Uint8Array(r.length).set(r);const T=`x: ${o.getImageOffset().x}, y: ${o.getImageOffset().y}`,E=o.getNumDecompositions(),S=o.getNumLayers(),$=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][o.getProgressionOrder()+1],k=o.getIsReversible(),M=`${o.getBlockDimensions().width} x ${o.getBlockDimensions().height}`,U=`${o.getTileSize().width} x ${o.getTileSize().height}`,G=`${o.getTileOffset().x}, ${o.getTileOffset().y}`,J=o.getColorSpace(),X=`${r.length.toLocaleString()} bytes`,Z=`${(r.length/a.length).toFixed(2)}:1`,K={columns:h.width,rows:h.height,bitsPerPixel:h.bitsPerSample,signed:h.isSigned,bytesPerPixel:i.bytesPerPixel,componentsPerPixel:h.componentCount},ne=gu(h,r),ae={imageOffset:T,numDecompositions:E,numLayers:S,progessionOrder:$,reversible:k,blockDimensions:M,tileSize:U,tileOffset:G,colorTransform:J,decodedSize:X,compressionRatio:Z};return{...i,pixelData:ne,imageInfo:K,encodeOptions:ae,...ae,...K}}function gu(e,i){return e.bitsPerSample>8?e.isSigned?new Int16Array(i.buffer,i.byteOffset,i.byteLength/2):new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2):e.isSigned?new Int8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var wi={exports:{}},oo;function yu(){return oo||(oo=1,(function(e,i){var o=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),(function(r){r=r||{};var r=typeof r<"u"?r:{},g,T;r.ready=new Promise(function(s,u){g=s,T=u});var E=Object.assign({},r),S=typeof window=="object",$=typeof importScripts=="function",k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M="";function U(s){return r.locateFile?r.locateFile(s,M):M+s}var G,J,X;if(k){var Z=Wn,K=Wn;$?M=K.dirname(M)+"/":M=__dirname+"/",G=(s,u)=>(s=Fe(s)?new URL(s):K.normalize(s),Z.readFileSync(s,u?void 0:"utf8")),X=s=>{var u=G(s,!0);return u.buffer||(u=new Uint8Array(u)),u},J=(s,u,t)=>{s=Fe(s)?new URL(s):K.normalize(s),Z.readFile(s,function(n,f){n?t(n):u(f.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(s){if(!(s instanceof or))throw s}),process.on("unhandledRejection",function(s){throw s}),r.inspect=function(){return"[Emscripten Module object]"}}else(S||$)&&($?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),a&&(M=a),M.indexOf("blob:")!==0?M=M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):M="",G=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.send(null),u.responseText},$&&(X=s=>{var u=new XMLHttpRequest;return u.open("GET",s,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),J=(s,u,t)=>{var n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){u(n.response);return}t()},n.onerror=t,n.send(null)});var ne=r.print||console.log.bind(console),ae=r.printErr||console.warn.bind(console);Object.assign(r,E),E=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit;var be;r.wasmBinary&&(be=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Ht("no native wasm support detected");var ve,Re=!1;function le(s,u){s||Ht(u)}var ce=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function he(s,u,t){for(var n=u+t,f=u;s[f]&&!(f>=n);)++f;if(f-u>16&&s.buffer&&ce)return ce.decode(s.subarray(u,f));for(var v="";u<f;){var _=s[u++];if(!(_&128)){v+=String.fromCharCode(_);continue}var b=s[u++]&63;if((_&224)==192){v+=String.fromCharCode((_&31)<<6|b);continue}var w=s[u++]&63;if((_&240)==224?_=(_&15)<<12|b<<6|w:_=(_&7)<<18|b<<12|w<<6|s[u++]&63,_<65536)v+=String.fromCharCode(_);else{var C=_-65536;v+=String.fromCharCode(55296|C>>10,56320|C&1023)}}return v}function xe(s,u){return s?he(we,s,u):""}function De(s,u,t,n){if(!(n>0))return 0;for(var f=t,v=t+n-1,_=0;_<s.length;++_){var b=s.charCodeAt(_);if(b>=55296&&b<=57343){var w=s.charCodeAt(++_);b=65536+((b&1023)<<10)|w&1023}if(b<=127){if(t>=v)break;u[t++]=b}else if(b<=2047){if(t+1>=v)break;u[t++]=192|b>>6,u[t++]=128|b&63}else if(b<=65535){if(t+2>=v)break;u[t++]=224|b>>12,u[t++]=128|b>>6&63,u[t++]=128|b&63}else{if(t+3>=v)break;u[t++]=240|b>>18,u[t++]=128|b>>12&63,u[t++]=128|b>>6&63,u[t++]=128|b&63}}return u[t]=0,t-f}function Ue(s,u,t){return De(s,we,u,t)}function ie(s){for(var u=0,t=0;t<s.length;++t){var n=s.charCodeAt(t);n<=127?u++:n<=2047?u+=2:n>=55296&&n<=57343?(u+=4,++t):u+=3}return u}var Ce,Ee,we,$e,ge,fe,Ae,Ge,Pe;function rr(s){Ce=s,r.HEAP8=Ee=new Int8Array(s),r.HEAP16=$e=new Int16Array(s),r.HEAP32=fe=new Int32Array(s),r.HEAPU8=we=new Uint8Array(s),r.HEAPU16=ge=new Uint16Array(s),r.HEAPU32=Ae=new Uint32Array(s),r.HEAPF32=Ge=new Float32Array(s),r.HEAPF64=Pe=new Float64Array(s)}r.INITIAL_MEMORY;var nr,ir=[],dt=[],Ot=[];function Fr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)hn(r.preRun.shift());br(ir)}function jr(){br(dt)}function Wr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)pt(r.postRun.shift());br(Ot)}function hn(s){ir.unshift(s)}function Hr(s){dt.unshift(s)}function pt(s){Ot.unshift(s)}var it=0,Lt=null;function Ut(s){it++,r.monitorRunDependencies&&r.monitorRunDependencies(it)}function wt(s){if(it--,r.monitorRunDependencies&&r.monitorRunDependencies(it),it==0&&Lt){var u=Lt;Lt=null,u()}}function Ht(s){r.onAbort&&r.onAbort(s),s="Aborted("+s+")",ae(s),Re=!0,s+=". Build with -sASSERTIONS for more info.";var u=new WebAssembly.RuntimeError(s);throw T(u),u}var Nr="data:application/octet-stream;base64,";function Pt(s){return s.startsWith(Nr)}function Fe(s){return s.startsWith("file://")}var ke;ke="openjphjs.wasm",Pt(ke)||(ke=U(ke));function Yt(s){try{if(s==ke&&be)return new Uint8Array(be);if(X)return X(s);throw"both async and sync fetching of the wasm failed"}catch(u){Ht(u)}}function Be(){if(!be&&(S||$)){if(typeof fetch=="function"&&!Fe(ke))return fetch(ke,{credentials:"same-origin"}).then(function(s){if(!s.ok)throw"failed to load wasm binary file at '"+ke+"'";return s.arrayBuffer()}).catch(function(){return Yt(ke)});if(J)return new Promise(function(s,u){J(ke,function(t){s(new Uint8Array(t))},u)})}return Promise.resolve().then(function(){return Yt(ke)})}function Vr(){var s={env:d,wasi_snapshot_preview1:d};function u(_,b){var w=_.exports;r.asm=w,ve=r.asm.memory,rr(ve.buffer),nr=r.asm.__indirect_function_table,Hr(r.asm.__wasm_call_ctors),wt()}Ut();function t(_){u(_.instance)}function n(_){return Be().then(function(b){return WebAssembly.instantiate(b,s)}).then(function(b){return b}).then(_,function(b){ae("failed to asynchronously prepare wasm: "+b),Ht(b)})}function f(){return!be&&typeof WebAssembly.instantiateStreaming=="function"&&!Pt(ke)&&!Fe(ke)&&!k&&typeof fetch=="function"?fetch(ke,{credentials:"same-origin"}).then(function(_){var b=WebAssembly.instantiateStreaming(_,s);return b.then(t,function(w){return ae("wasm streaming compile failed: "+w),ae("falling back to ArrayBuffer instantiation"),n(t)})}):n(t)}if(r.instantiateWasm)try{var v=r.instantiateWasm(s,u);return v}catch(_){ae("Module.instantiateWasm callback failed with error: "+_),T(_)}return f().catch(T),{}}function or(s){this.name="ExitStatus",this.message="Program terminated with exit("+s+")",this.status=s}function br(s){for(;s.length>0;)s.shift()(r)}function Gr(s,u,t,n){Ht("Assertion failed: "+xe(s)+", at: "+[u?xe(u):"unknown filename",t,n?xe(n):"unknown function"])}var ht=[];function sr(s){s.add_ref()}function Tt(s){var u=new ze(s);return u.get_caught()||u.set_caught(!0),u.set_rethrown(!1),ht.push(u),sr(u),u.get_exception_ptr()}var Oe=0,je=[];function Se(s){var u=je[s];return u||(s>=je.length&&(je.length=s+1),je[s]=u=nr.get(s)),u}function kt(s){if(s.release_ref()&&!s.get_rethrown()){var u=s.get_destructor();u&&Se(u)(s.excPtr),A(s.excPtr)}}function vt(){_setThrew(0);var s=ht.pop();kt(s),Oe=0}function ze(s){this.excPtr=s,this.ptr=s-24,this.set_type=function(u){Ae[this.ptr+4>>2]=u},this.get_type=function(){return Ae[this.ptr+4>>2]},this.set_destructor=function(u){Ae[this.ptr+8>>2]=u},this.get_destructor=function(){return Ae[this.ptr+8>>2]},this.set_refcount=function(u){fe[this.ptr>>2]=u},this.set_caught=function(u){u=u?1:0,Ee[this.ptr+12>>0]=u},this.get_caught=function(){return Ee[this.ptr+12>>0]!=0},this.set_rethrown=function(u){u=u?1:0,Ee[this.ptr+13>>0]=u},this.get_rethrown=function(){return Ee[this.ptr+13>>0]!=0},this.init=function(u,t){this.set_adjusted_ptr(0),this.set_type(u),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var u=fe[this.ptr>>2];fe[this.ptr>>2]=u+1},this.release_ref=function(){var u=fe[this.ptr>>2];return fe[this.ptr>>2]=u-1,u===1},this.set_adjusted_ptr=function(u){Ae[this.ptr+16>>2]=u},this.get_adjusted_ptr=function(){return Ae[this.ptr+16>>2]},this.get_exception_ptr=function(){var u=Q(this.get_type());if(u)return Ae[this.excPtr>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.excPtr}}function wr(s){throw Oe||(Oe=s),s}function Pr(){var s=Oe;if(!s)return H(0),0;var u=new ze(s);u.set_adjusted_ptr(s);var t=u.get_type();if(!t)return H(0),s;for(var n=0;n<arguments.length;n++){var f=arguments[n];if(f===0||f===t)break;var v=u.ptr+16;if(z(f,t,v))return H(f),s}return H(t),s}function ar(){var s=Oe;if(!s)return H(0),0;var u=new ze(s);u.set_adjusted_ptr(s);var t=u.get_type();if(!t)return H(0),s;for(var n=0;n<arguments.length;n++){var f=arguments[n];if(f===0||f===t)break;var v=u.ptr+16;if(z(f,t,v))return H(f),s}return H(t),s}function Mt(s,u,t){var n=new ze(s);throw n.init(u,t),Oe=s,s}var Te={};function $t(s){for(;s.length;){var u=s.pop(),t=s.pop();t(u)}}function se(s){return this.fromWireType(fe[s>>2])}var Xe={},Ne={},Qe={},Me=48,Nt=57;function ue(s){if(s===void 0)return"_unknown";s=s.replace(/[^a-zA-Z0-9_]/g,"$");var u=s.charCodeAt(0);return u>=Me&&u<=Nt?"_"+s:s}function _e(s,u){return s=ue(s),new Function("body","return function "+s+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(u)}function Ct(s,u){var t=_e(u,function(n){this.name=u,this.message=n;var f=new Error(n).stack;f!==void 0&&(this.stack=this.toString()+`
`+f.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(s.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},t}var de=void 0;function Ke(s){throw new de(s)}function gt(s,u,t){s.forEach(function(b){Qe[b]=u});function n(b){var w=t(b);w.length!==s.length&&Ke("Mismatched type converter count");for(var C=0;C<s.length;++C)We(s[C],w[C])}var f=new Array(u.length),v=[],_=0;u.forEach((b,w)=>{Ne.hasOwnProperty(b)?f[w]=Ne[b]:(v.push(b),Xe.hasOwnProperty(b)||(Xe[b]=[]),Xe[b].push(()=>{f[w]=Ne[b],++_,_===v.length&&n(f)}))}),v.length===0&&n(f)}function ur(s){var u=Te[s];delete Te[s];var t=u.rawConstructor,n=u.rawDestructor,f=u.fields,v=f.map(_=>_.getterReturnType).concat(f.map(_=>_.setterArgumentType));gt([s],v,_=>{var b={};return f.forEach((w,C)=>{var R=w.fieldName,j=_[C],B=w.getter,Y=w.getterContext,q=_[C+f.length],oe=w.setter,re=w.setterContext;b[R]={read:me=>j.fromWireType(B(Y,me)),write:(me,Ve)=>{var Ye=[];oe(re,me,q.toWireType(Ye,Ve)),$t(Ye)}}}),[{name:u.name,fromWireType:function(w){var C={};for(var R in b)C[R]=b[R].read(w);return n(w),C},toWireType:function(w,C){for(var R in b)if(!(R in C))throw new TypeError('Missing field:  "'+R+'"');var j=t();for(R in b)b[R].write(j,C[R]);return w!==null&&w.push(n,j),j},argPackAdvance:8,readValueFromPointer:se,destructorFunction:n}]})}function Br(s,u,t,n,f){}function Xt(s){switch(s){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+s)}}function cr(){for(var s=new Array(256),u=0;u<256;++u)s[u]=String.fromCharCode(u);Ft=s}var Ft=void 0;function He(s){for(var u="",t=s;we[t];)u+=Ft[we[t++]];return u}var ot=void 0;function pe(s){throw new ot(s)}function We(s,u,t={}){if(!("argPackAdvance"in u))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=u.name;if(s||pe('type "'+n+'" must have a positive integer typeid pointer'),Ne.hasOwnProperty(s)){if(t.ignoreDuplicateRegistrations)return;pe("Cannot register type '"+n+"' twice")}if(Ne[s]=u,delete Qe[s],Xe.hasOwnProperty(s)){var f=Xe[s];delete Xe[s],f.forEach(v=>v())}}function jt(s,u,t,n,f){var v=Xt(t);u=He(u),We(s,{name:u,fromWireType:function(_){return!!_},toWireType:function(_,b){return b?n:f},argPackAdvance:8,readValueFromPointer:function(_){var b;if(t===1)b=Ee;else if(t===2)b=$e;else if(t===4)b=fe;else throw new TypeError("Unknown boolean type size: "+u);return this.fromWireType(b[_>>v])},destructorFunction:null})}function Vt(s){if(!(this instanceof _t)||!(s instanceof _t))return!1;for(var u=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=s.$$.ptrType.registeredClass,f=s.$$.ptr;u.baseClass;)t=u.upcast(t),u=u.baseClass;for(;n.baseClass;)f=n.upcast(f),n=n.baseClass;return u===n&&t===f}function Qt(s){return{count:s.count,deleteScheduled:s.deleteScheduled,preservePointerOnDelete:s.preservePointerOnDelete,ptr:s.ptr,ptrType:s.ptrType,smartPtr:s.smartPtr,smartPtrType:s.smartPtrType}}function Kt(s){function u(t){return t.$$.ptrType.registeredClass.name}pe(u(s)+" instance already deleted")}var st=!1;function zr(s){}function vn(s){s.smartPtr?s.smartPtrType.rawDestructor(s.smartPtr):s.ptrType.registeredClass.rawDestructor(s.ptr)}function at(s){s.count.value-=1;var u=s.count.value===0;u&&vn(s)}function Jr(s,u,t){if(u===t)return s;if(t.baseClass===void 0)return null;var n=Jr(s,u,t.baseClass);return n===null?null:t.downcast(n)}var Gt={};function lr(){return Object.keys(Wt).length}function gn(){var s=[];for(var u in Wt)Wt.hasOwnProperty(u)&&s.push(Wt[u]);return s}var rt=[];function Tr(){for(;rt.length;){var s=rt.pop();s.$$.deleteScheduled=!1,s.delete()}}var Zt=void 0;function ut(s){Zt=s,rt.length&&Zt&&Zt(Tr)}function Cr(){r.getInheritedInstanceCount=lr,r.getLiveInheritedInstances=gn,r.flushPendingDeletes=Tr,r.setDelayFunction=ut}var Wt={};function St(s,u){for(u===void 0&&pe("ptr should not be undefined");s.baseClass;)u=s.upcast(u),s=s.baseClass;return u}function fr(s,u){return u=St(s,u),Wt[u]}function Ze(s,u){(!u.ptrType||!u.ptr)&&Ke("makeClassHandle requires ptr and ptrType");var t=!!u.smartPtrType,n=!!u.smartPtr;return t!==n&&Ke("Both smartPtrType and smartPtr must be specified"),u.count={value:1},It(Object.create(s,{$$:{value:u}}))}function yn(s){var u=this.getPointee(s);if(!u)return this.destructor(s),null;var t=fr(this.registeredClass,u);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=u,t.$$.smartPtr=s,t.clone();var n=t.clone();return this.destructor(s),n}function f(){return this.isSmartPointer?Ze(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:u,smartPtrType:this,smartPtr:s}):Ze(this.registeredClass.instancePrototype,{ptrType:this,ptr:s})}var v=this.registeredClass.getActualType(u),_=Gt[v];if(!_)return f.call(this);var b;this.isConst?b=_.constPointerType:b=_.pointerType;var w=Jr(u,this.registeredClass,b.registeredClass);return w===null?f.call(this):this.isSmartPointer?Ze(b.registeredClass.instancePrototype,{ptrType:b,ptr:w,smartPtrType:this,smartPtr:s}):Ze(b.registeredClass.instancePrototype,{ptrType:b,ptr:w})}function It(s){return typeof FinalizationRegistry>"u"?(It=u=>u,s):(st=new FinalizationRegistry(u=>{at(u.$$)}),It=u=>{var t=u.$$,n=!!t.smartPtr;if(n){var f={$$:t};st.register(u,f,u)}return u},zr=u=>st.unregister(u),It(s))}function qr(){if(this.$$.ptr||Kt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var s=It(Object.create(Object.getPrototypeOf(this),{$$:{value:Qt(this.$$)}}));return s.$$.count.value+=1,s.$$.deleteScheduled=!1,s}function Er(){this.$$.ptr||Kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),zr(this),at(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function _n(){return!this.$$.ptr}function Yr(){return this.$$.ptr||Kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),rt.push(this),rt.length===1&&Zt&&Zt(Tr),this.$$.deleteScheduled=!0,this}function yt(){_t.prototype.isAliasOf=Vt,_t.prototype.clone=qr,_t.prototype.delete=Er,_t.prototype.isDeleted=_n,_t.prototype.deleteLater=Yr}function _t(){}function Xr(s,u,t){if(s[u].overloadTable===void 0){var n=s[u];s[u]=function(){return s[u].overloadTable.hasOwnProperty(arguments.length)||pe("Function '"+t+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+s[u].overloadTable+")!"),s[u].overloadTable[arguments.length].apply(this,arguments)},s[u].overloadTable=[],s[u].overloadTable[n.argCount]=n}}function Je(s,u,t){r.hasOwnProperty(s)?((t===void 0||r[s].overloadTable!==void 0&&r[s].overloadTable[t]!==void 0)&&pe("Cannot register public name '"+s+"' twice"),Xr(r,s,s),r.hasOwnProperty(t)&&pe("Cannot register multiple overloads of a function with the same number of arguments ("+t+")!"),r[s].overloadTable[t]=u):(r[s]=u,t!==void 0&&(r[s].numArguments=t))}function Qr(s,u,t,n,f,v,_,b){this.name=s,this.constructor=u,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=f,this.getActualType=v,this.upcast=_,this.downcast=b,this.pureVirtualFunctions=[]}function Ar(s,u,t){for(;u!==t;)u.upcast||pe("Expected null or instance of "+t.name+", got an instance of "+u.name),s=u.upcast(s),u=u.baseClass;return s}function dr(s,u){if(u===null)return this.isReference&&pe("null is not a valid "+this.name),0;u.$$||pe('Cannot pass "'+$r(u)+'" as a '+this.name),u.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name);var t=u.$$.ptrType.registeredClass,n=Ar(u.$$.ptr,t,this.registeredClass);return n}function Le(s,u){var t;if(u===null)return this.isReference&&pe("null is not a valid "+this.name),this.isSmartPointer?(t=this.rawConstructor(),s!==null&&s.push(this.rawDestructor,t),t):0;u.$$||pe('Cannot pass "'+$r(u)+'" as a '+this.name),u.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&u.$$.ptrType.isConst&&pe("Cannot convert argument of type "+(u.$$.smartPtrType?u.$$.smartPtrType.name:u.$$.ptrType.name)+" to parameter type "+this.name);var n=u.$$.ptrType.registeredClass;if(t=Ar(u.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(u.$$.smartPtr===void 0&&pe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:u.$$.smartPtrType===this?t=u.$$.smartPtr:pe("Cannot convert argument of type "+(u.$$.smartPtrType?u.$$.smartPtrType.name:u.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:t=u.$$.smartPtr;break;case 2:if(u.$$.smartPtrType===this)t=u.$$.smartPtr;else{var f=u.clone();t=this.rawShare(t,_r.toHandle(function(){f.delete()})),s!==null&&s.push(this.rawDestructor,t)}break;default:pe("Unsupporting sharing policy")}return t}function Et(s,u){if(u===null)return this.isReference&&pe("null is not a valid "+this.name),0;u.$$||pe('Cannot pass "'+$r(u)+'" as a '+this.name),u.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),u.$$.ptrType.isConst&&pe("Cannot convert argument of type "+u.$$.ptrType.name+" to parameter type "+this.name);var t=u.$$.ptrType.registeredClass,n=Ar(u.$$.ptr,t,this.registeredClass);return n}function pr(s){return this.rawGetPointee&&(s=this.rawGetPointee(s)),s}function et(s){this.rawDestructor&&this.rawDestructor(s)}function Kr(s){s!==null&&s.delete()}function nt(){ct.prototype.getPointee=pr,ct.prototype.destructor=et,ct.prototype.argPackAdvance=8,ct.prototype.readValueFromPointer=se,ct.prototype.deleteObject=Kr,ct.prototype.fromWireType=yn}function ct(s,u,t,n,f,v,_,b,w,C,R){this.name=s,this.registeredClass=u,this.isReference=t,this.isConst=n,this.isSmartPointer=f,this.pointeeType=v,this.sharingPolicy=_,this.rawGetPointee=b,this.rawConstructor=w,this.rawShare=C,this.rawDestructor=R,!f&&u.baseClass===void 0?n?(this.toWireType=dr,this.destructorFunction=null):(this.toWireType=Et,this.destructorFunction=null):this.toWireType=Le}function hr(s,u,t){r.hasOwnProperty(s)||Ke("Replacing nonexistant public symbol"),r[s].overloadTable!==void 0&&t!==void 0?r[s].overloadTable[t]=u:(r[s]=u,r[s].argCount=t)}function vr(s,u,t){var n=r["dynCall_"+s];return t&&t.length?n.apply(null,[u].concat(t)):n.call(null,u)}function mn(s,u,t){if(s.includes("j"))return vr(s,u,t);var n=Se(u).apply(null,t);return n}function gr(s,u){var t=[];return function(){return t.length=0,Object.assign(t,arguments),mn(s,u,t)}}function Ie(s,u){s=He(s);function t(){return s.includes("j")?gr(s,u):Se(u)}var n=t();return typeof n!="function"&&pe("unknown function pointer with signature "+s+": "+u),n}var Rr=void 0;function yr(s){var u=I(s),t=He(u);return m(u),t}function qe(s,u){var t=[],n={};function f(v){if(!n[v]&&!Ne[v]){if(Qe[v]){Qe[v].forEach(f);return}t.push(v),n[v]=!0}}throw u.forEach(f),new Rr(s+": "+t.map(yr).join([", "]))}function xr(s,u,t,n,f,v,_,b,w,C,R,j,B){R=He(R),v=Ie(f,v),b&&(b=Ie(_,b)),C&&(C=Ie(w,C)),B=Ie(j,B);var Y=ue(R);Je(Y,function(){qe("Cannot construct "+R+" due to unbound types",[n])}),gt([s,u,t],n?[n]:[],function(q){q=q[0];var oe,re;n?(oe=q.registeredClass,re=oe.instancePrototype):re=_t.prototype;var me=_e(Y,function(){if(Object.getPrototypeOf(this)!==Ve)throw new ot("Use 'new' to construct "+R);if(Ye.constructor_body===void 0)throw new ot(R+" has no accessible constructor");var qn=Ye.constructor_body[arguments.length];if(qn===void 0)throw new ot("Tried to invoke ctor of "+R+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ye.constructor_body).toString()+") parameters instead!");return qn.apply(this,arguments)}),Ve=Object.create(re,{constructor:{value:me}});me.prototype=Ve;var Ye=new Qr(R,me,Ve,B,oe,v,b,C),Mn=new ct(R,Ye,!0,!1,!1),qt=new ct(R+"*",Ye,!1,!1,!1),ri=new ct(R+" const*",Ye,!1,!0,!1);return Gt[s]={pointerType:qt,constPointerType:ri},hr(Y,me),[Mn,qt,ri]})}function lt(s,u){for(var t=[],n=0;n<s;n++)t.push(Ae[u+n*4>>2]);return t}function Zr(s,u){if(!(s instanceof Function))throw new TypeError("new_ called with constructor type "+typeof s+" which is not a function");var t=_e(s.name||"unknownFunctionName",function(){});t.prototype=s.prototype;var n=new t,f=s.apply(n,u);return f instanceof Object?f:n}function Bt(s,u,t,n,f){var v=u.length;v<2&&pe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var _=u[1]!==null&&t!==null,b=!1,w=1;w<u.length;++w)if(u[w]!==null&&u[w].destructorFunction===void 0){b=!0;break}for(var C=u[0].name!=="void",R="",j="",w=0;w<v-2;++w)R+=(w!==0?", ":"")+"arg"+w,j+=(w!==0?", ":"")+"arg"+w+"Wired";var B="return function "+ue(s)+"("+R+`) {
if (arguments.length !== `+(v-2)+`) {
throwBindingError('function `+s+" called with ' + arguments.length + ' arguments, expected "+(v-2)+` args!');
}
`;b&&(B+=`var destructors = [];
`);var Y=b?"destructors":"null",q=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],oe=[pe,n,f,$t,u[0],u[1]];_&&(B+="var thisWired = classParam.toWireType("+Y+`, this);
`);for(var w=0;w<v-2;++w)B+="var arg"+w+"Wired = argType"+w+".toWireType("+Y+", arg"+w+"); // "+u[w+2].name+`
`,q.push("argType"+w),oe.push(u[w+2]);if(_&&(j="thisWired"+(j.length>0?", ":"")+j),B+=(C?"var rv = ":"")+"invoker(fn"+(j.length>0?", ":"")+j+`);
`,b)B+=`runDestructors(destructors);
`;else for(var w=_?1:2;w<u.length;++w){var re=w===1?"thisWired":"arg"+(w-2)+"Wired";u[w].destructorFunction!==null&&(B+=re+"_dtor("+re+"); // "+u[w].name+`
`,q.push(re+"_dtor"),oe.push(u[w].destructorFunction))}C&&(B+=`var ret = retType.fromWireType(rv);
return ret;
`),B+=`}
`,q.push(B);var me=Zr(Function,q).apply(null,oe);return me}function At(s,u,t,n,f,v){le(u>0);var _=lt(u,t);f=Ie(n,f),gt([],[s],function(b){b=b[0];var w="constructor "+b.name;if(b.registeredClass.constructor_body===void 0&&(b.registeredClass.constructor_body=[]),b.registeredClass.constructor_body[u-1]!==void 0)throw new ot("Cannot register multiple constructors with identical number of parameters ("+(u-1)+") for class '"+b.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return b.registeredClass.constructor_body[u-1]=()=>{qe("Cannot construct "+b.name+" due to unbound types",_)},gt([],_,function(C){return C.splice(1,0,null),b.registeredClass.constructor_body[u-1]=Bt(w,C,null,f,v),[]}),[]})}function bn(s,u,t,n,f,v,_,b){var w=lt(t,n);u=He(u),v=Ie(f,v),gt([],[s],function(C){C=C[0];var R=C.name+"."+u;u.startsWith("@@")&&(u=Symbol[u.substring(2)]),b&&C.registeredClass.pureVirtualFunctions.push(u);function j(){qe("Cannot call "+R+" due to unbound types",w)}var B=C.registeredClass.instancePrototype,Y=B[u];return Y===void 0||Y.overloadTable===void 0&&Y.className!==C.name&&Y.argCount===t-2?(j.argCount=t-2,j.className=C.name,B[u]=j):(Xr(B,u,R),B[u].overloadTable[t-2]=j),gt([],w,function(q){var oe=Bt(R,q,C,v,_);return B[u].overloadTable===void 0?(oe.argCount=t-2,B[u]=oe):B[u].overloadTable[t-2]=oe,[]}),[]})}var zt=[],ft=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function en(s){s>4&&--ft[s].refcount===0&&(ft[s]=void 0,zt.push(s))}function wn(){for(var s=0,u=5;u<ft.length;++u)ft[u]!==void 0&&++s;return s}function Pn(){for(var s=5;s<ft.length;++s)if(ft[s]!==void 0)return ft[s];return null}function tn(){r.count_emval_handles=wn,r.get_first_emval=Pn}var _r={toValue:s=>(s||pe("Cannot use deleted val. handle = "+s),ft[s].value),toHandle:s=>{switch(s){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var u=zt.length?zt.pop():ft.length;return ft[u]={refcount:1,value:s},u}}}};function rn(s,u){u=He(u),We(s,{name:u,fromWireType:function(t){var n=_r.toValue(t);return en(t),n},toWireType:function(t,n){return _r.toHandle(n)},argPackAdvance:8,readValueFromPointer:se,destructorFunction:null})}function $r(s){if(s===null)return"null";var u=typeof s;return u==="object"||u==="array"||u==="function"?s.toString():""+s}function Tn(s,u){switch(u){case 2:return function(t){return this.fromWireType(Ge[t>>2])};case 3:return function(t){return this.fromWireType(Pe[t>>3])};default:throw new TypeError("Unknown float type: "+s)}}function Cn(s,u,t){var n=Xt(t);u=He(u),We(s,{name:u,fromWireType:function(f){return f},toWireType:function(f,v){return v},argPackAdvance:8,readValueFromPointer:Tn(u,n),destructorFunction:null})}function En(s,u,t,n,f,v){var _=lt(u,t);s=He(s),f=Ie(n,f),Je(s,function(){qe("Cannot call "+s+" due to unbound types",_)},u-1),gt([],_,function(b){var w=[b[0],null].concat(b.slice(1));return hr(s,Bt(s,w,null,f,v),u-1),[]})}function Sr(s,u,t){switch(u){case 0:return t?function(f){return Ee[f]}:function(f){return we[f]};case 1:return t?function(f){return $e[f>>1]}:function(f){return ge[f>>1]};case 2:return t?function(f){return fe[f>>2]}:function(f){return Ae[f>>2]};default:throw new TypeError("Unknown integer type: "+s)}}function An(s,u,t,n,f){u=He(u);var v=Xt(t),_=j=>j;if(n===0){var b=32-8*t;_=j=>j<<b>>>b}var w=u.includes("unsigned"),C=(j,B)=>{},R;w?R=function(j,B){return C(B,this.name),B>>>0}:R=function(j,B){return C(B,this.name),B},We(s,{name:u,fromWireType:_,toWireType:R,argPackAdvance:8,readValueFromPointer:Sr(u,v,n!==0),destructorFunction:null})}function Rn(s,u,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f=n[u];function v(_){_=_>>2;var b=Ae,w=b[_],C=b[_+1];return new f(Ce,C,w)}t=He(t),We(s,{name:t,fromWireType:v,argPackAdvance:8,readValueFromPointer:v},{ignoreDuplicateRegistrations:!0})}function xn(s,u){u=He(u);var t=u==="std::string";We(s,{name:u,fromWireType:function(n){var f=Ae[n>>2],v=n+4,_;if(t)for(var b=v,w=0;w<=f;++w){var C=v+w;if(w==f||we[C]==0){var R=C-b,j=xe(b,R);_===void 0?_=j:(_+="\0",_+=j),b=C+1}}else{for(var B=new Array(f),w=0;w<f;++w)B[w]=String.fromCharCode(we[v+w]);_=B.join("")}return m(n),_},toWireType:function(n,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var v,_=typeof f=="string";_||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||pe("Cannot pass non-string to std::string"),t&&_?v=ie(f):v=f.length;var b=p(4+v+1),w=b+4;if(Ae[b>>2]=v,t&&_)Ue(f,w,v+1);else if(_)for(var C=0;C<v;++C){var R=f.charCodeAt(C);R>255&&(m(w),pe("String has UTF-16 code units that do not fit in 8 bits")),we[w+C]=R}else for(var C=0;C<v;++C)we[w+C]=f[C];return n!==null&&n.push(m,b),b},argPackAdvance:8,readValueFromPointer:se,destructorFunction:function(n){m(n)}})}var Ir=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function $n(s,u){for(var t=s,n=t>>1,f=n+u/2;!(n>=f)&&ge[n];)++n;if(t=n<<1,t-s>32&&Ir)return Ir.decode(we.subarray(s,t));for(var v="",_=0;!(_>=u/2);++_){var b=$e[s+_*2>>1];if(b==0)break;v+=String.fromCharCode(b)}return v}function nn(s,u,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=u,f=t<s.length*2?t/2:s.length,v=0;v<f;++v){var _=s.charCodeAt(v);$e[u>>1]=_,u+=2}return $e[u>>1]=0,u-n}function on(s){return s.length*2}function Sn(s,u){for(var t=0,n="";!(t>=u/4);){var f=fe[s+t*4>>2];if(f==0)break;if(++t,f>=65536){var v=f-65536;n+=String.fromCharCode(55296|v>>10,56320|v&1023)}else n+=String.fromCharCode(f)}return n}function Dr(s,u,t){if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=u,f=n+t-4,v=0;v<s.length;++v){var _=s.charCodeAt(v);if(_>=55296&&_<=57343){var b=s.charCodeAt(++v);_=65536+((_&1023)<<10)|b&1023}if(fe[u>>2]=_,u+=4,u+4>f)break}return fe[u>>2]=0,u-n}function In(s){for(var u=0,t=0;t<s.length;++t){var n=s.charCodeAt(t);n>=55296&&n<=57343&&++t,u+=4}return u}function sn(s,u,t){t=He(t);var n,f,v,_,b;u===2?(n=$n,f=nn,_=on,v=()=>ge,b=1):u===4&&(n=Sn,f=Dr,_=In,v=()=>Ae,b=2),We(s,{name:t,fromWireType:function(w){for(var C=Ae[w>>2],R=v(),j,B=w+4,Y=0;Y<=C;++Y){var q=w+4+Y*u;if(Y==C||R[q>>b]==0){var oe=q-B,re=n(B,oe);j===void 0?j=re:(j+="\0",j+=re),B=q+u}}return m(w),j},toWireType:function(w,C){typeof C!="string"&&pe("Cannot pass non-string to C++ string type "+t);var R=_(C),j=p(4+R+u);return Ae[j>>2]=R>>b,f(C,j+4,R+u),w!==null&&w.push(m,j),j},argPackAdvance:8,readValueFromPointer:se,destructorFunction:function(w){m(w)}})}function an(s,u,t,n,f,v){Te[s]={name:He(u),rawConstructor:Ie(t,n),rawDestructor:Ie(f,v),fields:[]}}function un(s,u,t,n,f,v,_,b,w,C){Te[s].fields.push({fieldName:He(u),getterReturnType:t,getter:Ie(n,f),getterContext:v,setterArgumentType:_,setter:Ie(b,w),setterContext:C})}function cn(s,u){u=He(u),We(s,{isVoid:!0,name:u,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}function Dn(s){s>4&&(ft[s].refcount+=1)}function On(s,u){var t=Ne[s];return t===void 0&&pe(u+" has unknown type "+yr(s)),t}function Ln(s,u){s=On(s,"_emval_take_value");var t=s.readValueFromPointer(u);return _r.toHandle(t)}function Or(){Ht("")}function Un(s,u,t){we.copyWithin(s,u,u+t)}function er(){return 2147483648}function kn(s){try{return ve.grow(s-Ce.byteLength+65535>>>16),rr(ve.buffer),1}catch{}}function Lr(s){var u=we.length;s=s>>>0;var t=er();if(s>t)return!1;let n=(w,C)=>w+(C-w%C)%C;for(var f=1;f<=4;f*=2){var v=u*(1+.2/f);v=Math.min(v,s+100663296);var _=Math.min(t,n(Math.max(s,v),65536)),b=kn(_);if(b)return!0}return!1}function Ur(s){return 52}function Jt(s,u,t,n,f){return 70}var Rt=[null,[],[]];function ln(s,u){var t=Rt[s];u===0||u===10?((s===1?ne:ae)(he(t,0)),t.length=0):t.push(u)}function fn(s,u,t,n){for(var f=0,v=0;v<t;v++){var _=Ae[u>>2],b=Ae[u+4>>2];u+=8;for(var w=0;w<b;w++)ln(s,we[_+w]);f+=b}return Ae[n>>2]=f,0}function kr(s){return s}function dn(s){var u=r["_"+s];return u}function mr(s,u){Ee.set(s,u)}function Mr(s,u,t,n,f){var v={string:q=>{var oe=0;if(q!=null&&q!==0){var re=(q.length<<2)+1;oe=W(re),Ue(q,oe,re)}return oe},array:q=>{var oe=W(q.length);return mr(q,oe),oe}};function _(q){return u==="string"?xe(q):u==="boolean"?!!q:q}var b=dn(s),w=[],C=0;if(n)for(var R=0;R<n.length;R++){var j=v[t[R]];j?(C===0&&(C=L()),w[R]=j(n[R])):w[R]=n[R]}var B=b.apply(null,w);function Y(q){return C!==0&&D(C),_(q)}return B=Y(B),B}de=r.InternalError=Ct(Error,"InternalError"),cr(),ot=r.BindingError=Ct(Error,"BindingError"),yt(),Cr(),nt(),Rr=r.UnboundTypeError=Ct(Error,"UnboundTypeError"),tn();var d={__assert_fail:Gr,__cxa_begin_catch:Tt,__cxa_end_catch:vt,__cxa_find_matching_catch_2:Pr,__cxa_find_matching_catch_3:ar,__cxa_throw:Mt,__resumeException:wr,_embind_finalize_value_object:ur,_embind_register_bigint:Br,_embind_register_bool:jt,_embind_register_class:xr,_embind_register_class_constructor:At,_embind_register_class_function:bn,_embind_register_emval:rn,_embind_register_float:Cn,_embind_register_function:En,_embind_register_integer:An,_embind_register_memory_view:Rn,_embind_register_std_string:xn,_embind_register_std_wstring:sn,_embind_register_value_object:an,_embind_register_value_object_field:un,_embind_register_void:cn,_emval_decref:en,_emval_incref:Dn,_emval_take_value:Ln,abort:Or,emscripten_memcpy_big:Un,emscripten_resize_heap:Lr,fd_close:Ur,fd_seek:Jt,fd_write:fn,invoke_i:x,invoke_ii:ee,invoke_iii:N,invoke_iiii:P,invoke_v:y,invoke_vi:c,invoke_viiii:l,invoke_viiiiii:F,llvm_eh_typeid_for:kr};Vr(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)};var p=r._malloc=function(){return(p=r._malloc=r.asm.malloc).apply(null,arguments)},m=r._free=function(){return(m=r._free=r.asm.free).apply(null,arguments)},A=r.___cxa_free_exception=function(){return(A=r.___cxa_free_exception=r.asm.__cxa_free_exception).apply(null,arguments)},I=r.___getTypeName=function(){return(I=r.___getTypeName=r.asm.__getTypeName).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm._embind_initialize_bindings).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)};var H=r.setTempRet0=function(){return(H=r.setTempRet0=r.asm.setTempRet0).apply(null,arguments)},L=r.stackSave=function(){return(L=r.stackSave=r.asm.stackSave).apply(null,arguments)},D=r.stackRestore=function(){return(D=r.stackRestore=r.asm.stackRestore).apply(null,arguments)},W=r.stackAlloc=function(){return(W=r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},z=r.___cxa_can_catch=function(){return(z=r.___cxa_can_catch=r.asm.__cxa_can_catch).apply(null,arguments)},Q=r.___cxa_is_pointer_type=function(){return(Q=r.___cxa_is_pointer_type=r.asm.__cxa_is_pointer_type).apply(null,arguments)};r.dynCall_ji=function(){return(r.dynCall_ji=r.asm.dynCall_ji).apply(null,arguments)},r.dynCall_iiji=function(){return(r.dynCall_iiji=r.asm.dynCall_iiji).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)};function ee(s,u){var t=L();try{return Se(s)(u)}catch(n){if(D(t),n!==n+0)throw n;_setThrew(1,0)}}function c(s,u){var t=L();try{Se(s)(u)}catch(n){if(D(t),n!==n+0)throw n;_setThrew(1,0)}}function l(s,u,t,n,f){var v=L();try{Se(s)(u,t,n,f)}catch(_){if(D(v),_!==_+0)throw _;_setThrew(1,0)}}function y(s){var u=L();try{Se(s)()}catch(t){if(D(u),t!==t+0)throw t;_setThrew(1,0)}}function P(s,u,t,n){var f=L();try{return Se(s)(u,t,n)}catch(v){if(D(f),v!==v+0)throw v;_setThrew(1,0)}}function x(s){var u=L();try{return Se(s)()}catch(t){if(D(u),t!==t+0)throw t;_setThrew(1,0)}}function F(s,u,t,n,f,v,_){var b=L();try{Se(s)(u,t,n,f,v,_)}catch(w){if(D(b),w!==w+0)throw w;_setThrew(1,0)}}function N(s,u,t){var n=L();try{return Se(s)(u,t)}catch(f){if(D(n),f!==f+0)throw f;_setThrew(1,0)}}r.ccall=Mr;var O;Lt=function s(){O||V(),O||(Lt=s)};function V(s){if(it>0||(Fr(),it>0))return;function u(){O||(O=!0,r.calledRun=!0,!Re&&(jr(),g(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Wr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),u()},1)):u()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return V(),r.ready})})();e.exports=o})(wi)),wi.exports}var _u=yu();const mu=ai(_u),bu=new URL("/radiology-ai-viewer/assets/openjphjs-C-BUUy4a.wasm",import.meta.url),Xn={codec:void 0,decoder:void 0,decodeConfig:{}};function wu(e,i,o){const a={width:i,height:o};for(;e>0;)a.width=Math.ceil(a.width/2),a.height=Math.ceil(a.height/2),e--;return a}function is(e){if(Xn.decodeConfig=e,Xn.codec)return Promise.resolve();const i=mu({locateFile:o=>o.endsWith(".wasm")?bu.toString():o});return new Promise((o,a)=>{i.then(h=>{Xn.codec=h,Xn.decoder=new h.HTJ2KDecoder,o()},a)})}async function os(e,i){await is();const o=new Xn.codec.HTJ2KDecoder,a=o.getEncodedBuffer(e.length);a.set(e);const h=i.decodeLevel||0;o.decodeSubResolution(h);const r=o.getFrameInfo();if(i.decodeLevel>0){const{width:ce,height:he}=wu(i.decodeLevel,r.width,r.height);r.width=ce,r.height=he}const g=o.getDecodedBuffer();new Uint8Array(g.length).set(g);const E=`x: ${o.getImageOffset().x}, y: ${o.getImageOffset().y}`,S=o.getNumDecompositions(),$=o.getNumLayers(),k=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][o.getProgressionOrder()+1],M=o.getIsReversible(),U=`${o.getBlockDimensions().width} x ${o.getBlockDimensions().height}`,G=`${o.getTileSize().width} x ${o.getTileSize().height}`,J=`${o.getTileOffset().x}, ${o.getTileOffset().y}`,X=`${g.length.toLocaleString()} bytes`,Z=`${(g.length/a.length).toFixed(2)}:1`,K={columns:r.width,rows:r.height,bitsPerPixel:r.bitsPerSample,signed:r.isSigned,bytesPerPixel:i.bytesPerPixel,componentsPerPixel:r.componentCount};let ne=Pu(r,g);const{buffer:ae,byteOffset:be,byteLength:ve}=ne,Re=ae.slice(be,be+ve);ne=new ne.constructor(Re);const le={imageOffset:E,numDecompositions:S,numLayers:$,progessionOrder:k,reversible:M,blockDimensions:U,tileSize:G,tileOffset:J,decodedSize:X,compressionRatio:Z};return{...i,pixelData:ne,imageInfo:K,encodeOptions:le,...le,...K}}function Pu(e,i){return e.bitsPerSample>8?e.isSigned?new Int16Array(i.buffer,i.byteOffset,i.byteLength/2):new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2):e.isSigned?new Int8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}function Tu(e,i){const o=e.length,{rescaleSlope:a,rescaleIntercept:h,suvbw:r,doseGridScaling:g}=i;if(i.modality==="PT"&&typeof r=="number"&&!isNaN(r))for(let T=0;T<o;T++)e[T]=r*(e[T]*a+h);else if(i.modality==="RTDOSE"&&typeof g=="number"&&!isNaN(g))for(let T=0;T<o;T++)e[T]=e[T]*g;else for(let T=0;T<o;T++)e[T]=e[T]*a+h;return!0}const Cu={bilinear:qa,replicate:Ya},so={Uint8Array,Uint16Array,Int16Array,Float32Array,Uint32Array};function ss(e,i,o,a){const h=e.pixelRepresentation!==void 0&&e.pixelRepresentation===1,r=h&&e.bitsStored!==void 0?32-e.bitsStored:void 0;if(h&&r!==void 0)for(let K=0;K<e.pixelData.length;K++)e.pixelData[K]=e.pixelData[K]<<r>>r;let g=e.pixelData;e.pixelDataLength=e.pixelData.length;const{min:T,max:E}=fi(e.pixelData),S=typeof i.allowFloatRendering<"u"?i.allowFloatRendering:!0;let $=ki(e.photometricInterpretation)&&i.targetBuffer?.offset===void 0;const M=i.preScale?.enabled&&Object.values(i.preScale.scalingParameters).some(K=>typeof K=="number"&&!Number.isInteger(K)),U=!i.preScale.enabled||!S&&M,G=i.targetBuffer?.type;if(G&&i.preScale.enabled&&!U){const K=i.preScale.scalingParameters,ne=$i(T,E,K);$=!la(ne.min,ne.max,so[G])}G&&!$?g=Au(i,e,so,g):i.preScale.enabled&&!U?g=Ru(i,T,E,e):g=as(T,E,e);let J=T,X=E;if(i.preScale.enabled&&!U){const K=i.preScale.scalingParameters;if(us(K),Eu(K)){Tu(g,K),e.preScale={...i.preScale,scaled:!0};const ae=$i(T,E,K);J=ae.min,X=ae.max}}else U&&(e.preScale={enabled:!0,scaled:!1},J=T,X=E);e.pixelData=g,e.smallestPixelValue=J,e.largestPixelValue=X;const Z=new Date().getTime();return e.decodeTimeInMS=Z-o,e}function Eu(e){const{rescaleSlope:i,rescaleIntercept:o,modality:a,doseGridScaling:h,suvbw:r}=e;return typeof i=="number"&&typeof o=="number"||a==="RTDOSE"&&typeof h=="number"||a==="PT"&&typeof r=="number"}function Au(e,i,o,a){const{arrayBuffer:h,type:r,offset:g=0,length:T,rows:E}=e.targetBuffer,S=o[r];if(!S)throw new Error(`target array ${r} is not supported, or doesn't exist.`);E&&E!=i.rows&&$u(i,e.targetBuffer,S);const $=i.pixelDataLength,k=g,M=T??$-k,U=i.pixelData;if(M!==U.length)throw new Error(`target array for image does not have the same length (${M}) as the decoded image length (${U.length}).`);const G=h?new S(h,k,M):new S(M);return G.set(U,0),a=G,a}function Ru(e,i,o,a){const h=e.preScale.scalingParameters;us(h);const r=$i(i,o,h);return as(r.min,r.max,a)}function as(e,i,o){const a=Mi(e,i),h=new a(o.pixelData.length);return h.set(o.pixelData,0),h}function $i(e,i,o){const{rescaleSlope:a,rescaleIntercept:h,modality:r,doseGridScaling:g,suvbw:T}=o;return r==="PT"&&typeof T=="number"&&!isNaN(T)?{min:T*(e*a+h),max:T*(i*a+h)}:r==="RTDOSE"&&typeof g=="number"&&!isNaN(g)?{min:e*g,max:i*g}:typeof a=="number"&&typeof h=="number"?{min:a*e+h,max:a*i+h}:{min:e,max:i}}function us(e){if(!e)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}function xu(e,i,o){const{samplesPerPixel:a}=e,{rows:h,columns:r}=i,g=h*r*a,T=new o(g),E=T.byteLength/g;return{pixelData:T,rows:h,columns:r,frameInfo:{...e.frameInfo,rows:h,columns:r},imageInfo:{...e.imageInfo,rows:h,columns:r,bytesPerPixel:E}}}function $u(e,i,o){const a=xu(e,i,o),{scalingType:h="replicate"}=i;return Cu[h](e,a),Object.assign(e,a),e.pixelDataLength=e.pixelData.length,e}async function cs(e,i,o,a,h,r){const g=new Date().getTime();let T=null,E;switch(i){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":T=Ei(e,o);break;case"1.2.840.10008.1.2.2":T=Yo(e,o);break;case"1.2.840.10008.1.2.1.99":T=Ei(e,o);break;case"1.2.840.10008.1.2.5":T=Xo(e,o);break;case"1.2.840.10008.1.2.4.50":E={...e},T=Ko(o,E);break;case"1.2.840.10008.1.2.4.51":T=es(e,o);break;case"1.2.840.10008.1.2.4.57":T=Ai(e,o);break;case"1.2.840.10008.1.2.4.70":T=Ai(e,o);break;case"1.2.840.10008.1.2.4.80":E={signed:e.pixelRepresentation===1,bytesPerPixel:e.bitsAllocated<=8?1:2,...e},T=Ri(o,E);break;case"1.2.840.10008.1.2.4.81":E={signed:e.pixelRepresentation===1,bytesPerPixel:e.bitsAllocated<=8?1:2,...e},T=Ri(o,E);break;case"1.2.840.10008.1.2.4.90":E={...e},T=xi(o,E);break;case"1.2.840.10008.1.2.4.91":E={...e},T=xi(o,E);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":E={...e},T=os(o,E);break;default:throw new Error(`no decoder for transfer syntax ${i}`)}if(!T)throw new Error("decodePromise not defined");const S=await T,$=ss(S,h,g);return r?.($),$}const Su={decodeTask({imageFrame:e,transferSyntax:i,decodeConfig:o,options:a,pixelData:h,callbackFn:r}){return cs(e,i,h,o,a,r)}};gs(Su);const Iu={HTJ2K:is,JPEG2000:ns,JPEGLS:rs,JPEGBaseline12Bit:Zo,JPEGLossless:ts,JPEGBaseline8Bit:ou},Du={HTJ2K:os,JPEG2000:xi,JPEGLS:Ri,JPEGBaseline12Bit:es,JPEGLossless:Ai,JPEGBaseline8Bit:Ko,BigEndian:Yo,LittleEndian:Ei,RLE:Xo},Wu={constants:Ja,convertRGBColorByPixel:Si,convertRGBColorByPlane:po,convertYBRFullByPixel:ho,convertYBRFullByPlane:vo,convertPALETTECOLOR:go,wadouri:va,wadors:Wa,init:Va,convertColorSpace:Lo,createImage:di,decodeJPEGBaseline8BitColor:Uo,getImageFrame:ko,getPixelData:Wi,getMinMax:fi,isColorImage:ki,isJPEGBaseline8BitColor:Ba,internal:Ss,decodeImageFrame:cs,postProcessDecodedPixels:ss,initializers:Iu,decoders:Du};export{Ja as constants,Lo as convertColorSpace,go as convertPALETTECOLOR,Si as convertRGBColorByPixel,po as convertRGBColorByPlane,ho as convertYBRFullByPixel,vo as convertYBRFullByPlane,di as createImage,cs as decodeImageFrame,Uo as decodeJPEGBaseline8BitColor,Du as decoders,Wu as default,ko as getImageFrame,fi as getMinMax,Wi as getPixelData,Va as init,Iu as initializers,Ss as internal,ki as isColorImage,Ba as isJPEGBaseline8BitColor,ss as postProcessDecodedPixels,Wa as wadors,va as wadouri};
