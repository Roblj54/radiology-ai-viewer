function wi(l,_){const{rows:m,columns:S,data:E}=l,{rows:a,columns:C,data:U}=_,M=[],q=[],V=[];for(let J=0;J<C;J++){const L=J*(S-1)/(C-1);M[J]=Math.floor(L),q[J]=Math.min(M[J]+1,S-1),V[J]=L-M[J]}for(let J=0;J<a;J++){const L=J*(m-1)/(a-1),re=Math.floor(L)*S,z=Math.min(re+S,(m-1)*S),Y=L-Math.floor(L),se=1-Y,ke=J*C;for(let K=0;K<C;K++){const me=E[re+M[K]],ve=E[re+q[K]],Te=E[z+M[K]],Re=E[z+q[K]],Ue=1-V[K];U[ke+K]=(me*Ue+ve*V[K])*se+(Te*Ue+Re*V[K])*Y}}return U}function Pi(l,_){const{rows:m,columns:S,pixelData:E,samplesPerPixel:a=1}=l,{rows:C,columns:U,pixelData:M}=_,q=[];for(let V=0;V<U;V++){const J=V*(S-1)/(U-1);q[V]=Math.floor(J)*a}for(let V=0;V<C;V++){const J=V*(m-1)/(C-1),L=Math.floor(J)*S*a,re=V*U;for(let z=0;z<U;z++)for(let Y=0;Y<a;Y++)M[re+z+Y]=E[L+q[z]+Y]}return M}const di=Symbol("Comlink.proxy"),Ti=Symbol("Comlink.endpoint"),Ci=Symbol("Comlink.releaseProxy"),Gn=Symbol("Comlink.finalizer"),Mn=Symbol("Comlink.thrown"),pi=l=>typeof l=="object"&&l!==null||typeof l=="function",$i={canHandle:l=>pi(l)&&l[di],serialize(l){const{port1:_,port2:m}=new MessageChannel;return Zn(l,_),[m,[m]]},deserialize(l){return l.start(),Si(l)}},Ai={canHandle:l=>pi(l)&&Mn in l,serialize({value:l}){let _;return l instanceof Error?_={isError:!0,value:{message:l.message,name:l.name,stack:l.stack}}:_={isError:!1,value:l},[_,[]]},deserialize(l){throw l.isError?Object.assign(new Error(l.value.message),l.value):l.value}},vi=new Map([["proxy",$i],["throw",Ai]]);function Ri(l,_){for(const m of l)if(_===m||m==="*"||m instanceof RegExp&&m.test(_))return!0;return!1}function Zn(l,_=globalThis,m=["*"]){_.addEventListener("message",function S(E){if(!E||!E.data)return;if(!Ri(m,E.origin)){console.warn(`Invalid origin '${E.origin}' for comlink proxy`);return}const{id:a,type:C,path:U}=Object.assign({path:[]},E.data),M=(E.data.argumentList||[]).map(Sn);let q;try{const V=U.slice(0,-1).reduce((L,re)=>L[re],l),J=U.reduce((L,re)=>L[re],l);switch(C){case"GET":q=J;break;case"SET":V[U.slice(-1)[0]]=Sn(E.data.value),q=!0;break;case"APPLY":q=J.apply(V,M);break;case"CONSTRUCT":{const L=new J(...M);q=Oi(L)}break;case"ENDPOINT":{const{port1:L,port2:re}=new MessageChannel;Zn(l,re),q=xi(L,[L])}break;case"RELEASE":q=void 0;break;default:return}}catch(V){q={value:V,[Mn]:0}}Promise.resolve(q).catch(V=>({value:V,[Mn]:0})).then(V=>{const[J,L]=Nn(V);_.postMessage(Object.assign(Object.assign({},J),{id:a}),L),C==="RELEASE"&&(_.removeEventListener("message",S),hi(_),Gn in l&&typeof l[Gn]=="function"&&l[Gn]())}).catch(V=>{const[J,L]=Nn({value:new TypeError("Unserializable return value"),[Mn]:0});_.postMessage(Object.assign(Object.assign({},J),{id:a}),L)})}),_.start&&_.start()}function Ei(l){return l.constructor.name==="MessagePort"}function hi(l){Ei(l)&&l.close()}function Si(l,_){const m=new Map;return l.addEventListener("message",function(E){const{data:a}=E;if(!a||!a.id)return;const C=m.get(a.id);if(C)try{C(a)}finally{m.delete(a.id)}}),Kn(l,m,[],_)}function Hn(l){if(l)throw new Error("Proxy has been released and is not useable")}function gi(l){return kn(l,new Map,{type:"RELEASE"}).then(()=>{hi(l)})}const Vn=new WeakMap,Bn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(l=>{const _=(Vn.get(l)||0)-1;Vn.set(l,_),_===0&&gi(l)});function Fi(l,_){const m=(Vn.get(_)||0)+1;Vn.set(_,m),Bn&&Bn.register(l,_,l)}function ki(l){Bn&&Bn.unregister(l)}function Kn(l,_,m=[],S=function(){}){let E=!1;const a=new Proxy(S,{get(C,U){if(Hn(E),U===Ci)return()=>{ki(a),gi(l),_.clear(),E=!0};if(U==="then"){if(m.length===0)return{then:()=>a};const M=kn(l,_,{type:"GET",path:m.map(q=>q.toString())}).then(Sn);return M.then.bind(M)}return Kn(l,_,[...m,U])},set(C,U,M){Hn(E);const[q,V]=Nn(M);return kn(l,_,{type:"SET",path:[...m,U].map(J=>J.toString()),value:q},V).then(Sn)},apply(C,U,M){Hn(E);const q=m[m.length-1];if(q===Ti)return kn(l,_,{type:"ENDPOINT"}).then(Sn);if(q==="bind")return Kn(l,_,m.slice(0,-1));const[V,J]=ti(M);return kn(l,_,{type:"APPLY",path:m.map(L=>L.toString()),argumentList:V},J).then(Sn)},construct(C,U){Hn(E);const[M,q]=ti(U);return kn(l,_,{type:"CONSTRUCT",path:m.map(V=>V.toString()),argumentList:M},q).then(Sn)}});return Fi(a,l),a}function Di(l){return Array.prototype.concat.apply([],l)}function ti(l){const _=l.map(Nn);return[_.map(m=>m[0]),Di(_.map(m=>m[1]))]}const yi=new WeakMap;function xi(l,_){return yi.set(l,_),l}function Oi(l){return Object.assign(l,{[di]:!0})}function Nn(l){for(const[_,m]of vi)if(m.canHandle(l)){const[S,E]=m.serialize(l);return[{type:"HANDLER",name:_,value:S},E]}return[{type:"RAW",value:l},yi.get(l)||[]]}function Sn(l){switch(l.type){case"HANDLER":return vi.get(l.name).deserialize(l.value);case"RAW":return l.value}}function kn(l,_,m,S){return new Promise(E=>{const a=Ui();_.set(a,E),l.start&&l.start(),l.postMessage(Object.assign({id:a},m),S)})}function Ui(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}async function ni(l,_){let m=_.buffer,S=_.byteOffset;const E=_.length;if(l.bitsAllocated===16)S%2&&(m=m.slice(S),S=0),l.pixelRepresentation===0?l.pixelData=new Uint16Array(m,S,E/2):l.pixelData=new Int16Array(m,S,E/2);else if(l.bitsAllocated===8||l.bitsAllocated===1)l.pixelData=_;else if(l.bitsAllocated===32){if(S%2&&(m=m.slice(S),S=0),l.floatPixelData||l.doubleFloatPixelData)throw new Error("Float pixel data is not supported for parsing into ImageFrame");l.pixelRepresentation===0?l.pixelData=new Uint32Array(m,S,E/4):l.pixelRepresentation===1?l.pixelData=new Int32Array(m,S,E/4):l.pixelData=new Float32Array(m,S,E/4)}return l}function ji(l){return(l&255)<<8|l>>8&255}async function Ii(l,_){if(l.bitsAllocated===16){let m=_.buffer,S=_.byteOffset;const E=_.length;S%2&&(m=m.slice(S),S=0),l.pixelRepresentation===0?l.pixelData=new Uint16Array(m,S,E/2):l.pixelData=new Int16Array(m,S,E/2);for(let a=0;a<l.pixelData.length;a++)l.pixelData[a]=ji(l.pixelData[a])}else l.bitsAllocated===8&&(l.pixelData=_);return l}async function Wi(l,_){if(l.bitsAllocated===8)return l.planarConfiguration?Mi(l,_):Hi(l,_);if(l.bitsAllocated===16)return Li(l,_);throw new Error("unsupported pixel format for RLE")}function Hi(l,_){const m=_,S=l.rows*l.columns,E=new ArrayBuffer(S*l.samplesPerPixel),a=new DataView(m.buffer,m.byteOffset),C=new Int8Array(m.buffer,m.byteOffset),U=new Int8Array(E);let M=0;const q=a.getInt32(0,!0);for(let V=0;V<q;++V){M=V;let J=a.getInt32((V+1)*4,!0),L=a.getInt32((V+2)*4,!0);L===0&&(L=m.length);const re=S*q;for(;J<L;){const z=C[J++];if(z>=0&&z<=127)for(let Y=0;Y<z+1&&M<re;++Y)U[M]=C[J++],M+=l.samplesPerPixel;else if(z<=-1&&z>=-127){const Y=C[J++];for(let se=0;se<-z+1&&M<re;++se)U[M]=Y,M+=l.samplesPerPixel}}}return l.pixelData=new Uint8Array(E),l}function Mi(l,_){const m=_,S=l.rows*l.columns,E=new ArrayBuffer(S*l.samplesPerPixel),a=new DataView(m.buffer,m.byteOffset),C=new Int8Array(m.buffer,m.byteOffset),U=new Int8Array(E);let M=0;const q=a.getInt32(0,!0);for(let V=0;V<q;++V){M=V*S;let J=a.getInt32((V+1)*4,!0),L=a.getInt32((V+2)*4,!0);L===0&&(L=m.length);const re=S*q;for(;J<L;){const z=C[J++];if(z>=0&&z<=127)for(let Y=0;Y<z+1&&M<re;++Y)U[M]=C[J++],M++;else if(z<=-1&&z>=-127){const Y=C[J++];for(let se=0;se<-z+1&&M<re;++se)U[M]=Y,M++}}}return l.pixelData=new Uint8Array(E),l}function Li(l,_){const m=_,S=l.rows*l.columns,E=new ArrayBuffer(S*l.samplesPerPixel*2),a=new DataView(m.buffer,m.byteOffset),C=new Int8Array(m.buffer,m.byteOffset),U=new Int8Array(E),M=a.getInt32(0,!0);for(let q=0;q<M;++q){let V=0;const J=q===0?1:0;let L=a.getInt32((q+1)*4,!0),re=a.getInt32((q+2)*4,!0);for(re===0&&(re=m.length);L<re;){const z=C[L++];if(z>=0&&z<=127)for(let Y=0;Y<z+1&&V<S;++Y)U[V*2+J]=C[L++],V++;else if(z<=-1&&z>=-127){const Y=C[L++];for(let se=0;se<-z+1&&V<S;++se)U[V*2+J]=Y,V++}}}return l.pixelRepresentation===0?l.pixelData=new Uint16Array(E):l.pixelData=new Int16Array(E),l}function zn(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Vi(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var _=l.default;if(typeof _=="function"){var m=function S(){var E=!1;try{E=this instanceof S}catch{}return E?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};m.prototype=_.prototype}else m={};return Object.defineProperty(m,"__esModule",{value:!0}),Object.keys(l).forEach(function(S){var E=Object.getOwnPropertyDescriptor(l,S);Object.defineProperty(m,S,E.get?E:{enumerable:!0,get:function(){return l[S]}})}),m}var qn={exports:{}},Bi={},Ni=Object.freeze({__proto__:null,default:Bi}),Fn=Vi(Ni),ii;function zi(){return ii||(ii=1,(function(l,_){var m=(()=>{var S=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(S=S||__filename),(function(E){E=E||{};var a=typeof E<"u"?E:{},C,U;a.ready=new Promise(function(e,r){C=e,U=r});var M=Object.assign({},a),q="./this.program",V=(e,r)=>{throw r},J=typeof window=="object",L=typeof importScripts=="function",re=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",z="";function Y(e){return a.locateFile?a.locateFile(e,z):z+e}var se,ke,K;if(re){var me=Fn,ve=Fn;L?z=ve.dirname(z)+"/":z=__dirname+"/",se=(e,r)=>(e=Vr(e)?new URL(e):ve.normalize(e),me.readFileSync(e,r?void 0:"utf8")),K=e=>{var r=se(e,!0);return r.buffer||(r=new Uint8Array(r)),r},ke=(e,r,s)=>{e=Vr(e)?new URL(e):ve.normalize(e),me.readFile(e,function(c,p){c?s(c):r(p.buffer)})},process.argv.length>1&&(q=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof jt))throw e}),process.on("unhandledRejection",function(e){throw e}),V=(e,r)=>{throw process.exitCode=e,r},a.inspect=function(){return"[Emscripten Module object]"}}else(J||L)&&(L?z=self.location.href:typeof document<"u"&&document.currentScript&&(z=document.currentScript.src),S&&(z=S),z.indexOf("blob:")!==0?z=z.substr(0,z.replace(/[?#].*/,"").lastIndexOf("/")+1):z="",se=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},L&&(K=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),ke=(e,r,s)=>{var c=new XMLHttpRequest;c.open("GET",e,!0),c.responseType="arraybuffer",c.onload=()=>{if(c.status==200||c.status==0&&c.response){r(c.response);return}s()},c.onerror=s,c.send(null)});var Te=a.print||console.log.bind(console),Re=a.printErr||console.warn.bind(console);Object.assign(a,M),M=null,a.arguments&&a.arguments,a.thisProgram&&(q=a.thisProgram),a.quit&&(V=a.quit);var Ue;a.wasmBinary&&(Ue=a.wasmBinary),a.noExitRuntime,typeof WebAssembly!="object"&&hr("no native wasm support detected");var pr,je=!1;function Ce(e,r){e||hr(r)}var ar=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function xr(e,r,s){for(var c=r+s,p=r;e[p]&&!(p>=c);)++p;if(p-r>16&&e.buffer&&ar)return ar.decode(e.subarray(r,p));for(var h="";r<p;){var g=e[r++];if(!(g&128)){h+=String.fromCharCode(g);continue}var b=e[r++]&63;if((g&224)==192){h+=String.fromCharCode((g&31)<<6|b);continue}var P=e[r++]&63;if((g&240)==224?g=(g&15)<<12|b<<6|P:g=(g&7)<<18|b<<12|P<<6|e[r++]&63,g<65536)h+=String.fromCharCode(g);else{var D=g-65536;h+=String.fromCharCode(55296|D>>10,56320|D&1023)}}return h}function Cr(e,r){return e?xr(oe,e,r):""}function ue(e,r,s,c){if(!(c>0))return 0;for(var p=s,h=s+c-1,g=0;g<e.length;++g){var b=e.charCodeAt(g);if(b>=55296&&b<=57343){var P=e.charCodeAt(++g);b=65536+((b&1023)<<10)|P&1023}if(b<=127){if(s>=h)break;r[s++]=b}else if(b<=2047){if(s+1>=h)break;r[s++]=192|b>>6,r[s++]=128|b&63}else if(b<=65535){if(s+2>=h)break;r[s++]=224|b>>12,r[s++]=128|b>>6&63,r[s++]=128|b&63}else{if(s+3>=h)break;r[s++]=240|b>>18,r[s++]=128|b>>12&63,r[s++]=128|b>>6&63,r[s++]=128|b&63}}return r[s]=0,s-p}function Je(e,r,s){return ue(e,oe,r,s)}function ge(e){for(var r=0,s=0;s<e.length;++s){var c=e.charCodeAt(s);c<=127?r++:c<=2047?r+=2:c>=55296&&c<=57343?(r+=4,++s):r+=3}return r}var he,be,oe,ne,pe,Ie,le,Jr,Xr;function Yr(e){he=e,a.HEAP8=be=new Int8Array(e),a.HEAP16=ne=new Int16Array(e),a.HEAP32=Ie=new Int32Array(e),a.HEAPU8=oe=new Uint8Array(e),a.HEAPU16=pe=new Uint16Array(e),a.HEAPU32=le=new Uint32Array(e),a.HEAPF32=Jr=new Float32Array(e),a.HEAPF64=Xr=new Float64Array(e)}a.INITIAL_MEMORY;var or,$r=[],Ft=[],kt=[];function Dt(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)sr(a.preRun.shift());ur($r)}function an(){ur(Ft)}function xt(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Ar(a.postRun.shift());ur(kt)}function sr(e){$r.unshift(e)}function Ke(e){Ft.unshift(e)}function Ar(e){kt.unshift(e)}var Rr=0,vr=null;function Or(e){Rr++,a.monitorRunDependencies&&a.monitorRunDependencies(Rr)}function Ot(e){if(Rr--,a.monitorRunDependencies&&a.monitorRunDependencies(Rr),Rr==0&&vr){var r=vr;vr=null,r()}}function hr(e){a.onAbort&&a.onAbort(e),e="Aborted("+e+")",Re(e),je=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw U(r),r}var Ee="data:application/octet-stream;base64,";function $e(e){return e.startsWith(Ee)}function Vr(e){return e.startsWith("file://")}var We;We="libjpegturbowasm_decode.wasm",$e(We)||(We=Y(We));function Ut(e){try{if(e==We&&Ue)return new Uint8Array(Ue);if(K)return K(e);throw"both async and sync fetching of the wasm failed"}catch(r){hr(r)}}function Kr(){if(!Ue&&(J||L)){if(typeof fetch=="function"&&!Vr(We))return fetch(We,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+We+"'";return e.arrayBuffer()}).catch(function(){return Ut(We)});if(ke)return new Promise(function(e,r){ke(We,function(s){e(new Uint8Array(s))},r)})}return Promise.resolve().then(function(){return Ut(We)})}function dt(){var e={a:A};function r(g,b){var P=g.exports;a.asm=P,pr=a.asm.K,Yr(pr.buffer),or=a.asm.M,Ke(a.asm.L),Ot()}Or();function s(g){r(g.instance)}function c(g){return Kr().then(function(b){return WebAssembly.instantiate(b,e)}).then(function(b){return b}).then(g,function(b){Re("failed to asynchronously prepare wasm: "+b),hr(b)})}function p(){return!Ue&&typeof WebAssembly.instantiateStreaming=="function"&&!$e(We)&&!Vr(We)&&!re&&typeof fetch=="function"?fetch(We,{credentials:"same-origin"}).then(function(g){var b=WebAssembly.instantiateStreaming(g,e);return b.then(s,function(P){return Re("wasm streaming compile failed: "+P),Re("falling back to ArrayBuffer instantiation"),c(s)})}):c(s)}if(a.instantiateWasm)try{var h=a.instantiateWasm(e,r);return h}catch(g){Re("Module.instantiateWasm callback failed with error: "+g),U(g)}return p().catch(U),{}}function jt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ur(e){for(;e.length>0;)e.shift()(a)}function Qr(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(r){le[this.ptr+4>>2]=r},this.get_type=function(){return le[this.ptr+4>>2]},this.set_destructor=function(r){le[this.ptr+8>>2]=r},this.get_destructor=function(){return le[this.ptr+8>>2]},this.set_refcount=function(r){Ie[this.ptr>>2]=r},this.set_caught=function(r){r=r?1:0,be[this.ptr+12>>0]=r},this.get_caught=function(){return be[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,be[this.ptr+13>>0]=r},this.get_rethrown=function(){return be[this.ptr+13>>0]!=0},this.init=function(r,s){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(s),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var r=Ie[this.ptr>>2];Ie[this.ptr>>2]=r+1},this.release_ref=function(){var r=Ie[this.ptr>>2];return Ie[this.ptr>>2]=r-1,r===1},this.set_adjusted_ptr=function(r){le[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return le[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=y(this.get_type());if(r)return le[this.excPtr>>2];var s=this.get_adjusted_ptr();return s!==0?s:this.excPtr}}function gr(e,r,s){var c=new Qr(e);throw c.init(r,s),e}var we={};function Se(e){for(;e.length;){var r=e.pop(),s=e.pop();s(r)}}function ye(e){return this.fromWireType(Ie[e>>2])}var Er={},fr={},He={},pt=48,vt=57;function Zr(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=pt&&r<=vt?"_"+e:e}function Sr(e,r){return e=Zr(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(r)}function de(e,r){var s=Sr(r,function(c){this.name=r,this.message=c;var p=new Error(c).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},s}var wr=void 0;function ee(e){throw new wr(e)}function Be(e,r,s){e.forEach(function(b){He[b]=r});function c(b){var P=s(b);P.length!==e.length&&ee("Mismatched type converter count");for(var D=0;D<e.length;++D)ze(e[D],P[D])}var p=new Array(r.length),h=[],g=0;r.forEach((b,P)=>{fr.hasOwnProperty(b)?p[P]=fr[b]:(h.push(b),Er.hasOwnProperty(b)||(Er[b]=[]),Er[b].push(()=>{p[P]=fr[b],++g,g===h.length&&c(p)}))}),h.length===0&&c(p)}function xe(e){var r=we[e];delete we[e];var s=r.rawConstructor,c=r.rawDestructor,p=r.fields,h=p.map(g=>g.getterReturnType).concat(p.map(g=>g.setterArgumentType));Be([e],h,g=>{var b={};return p.forEach((P,D)=>{var W=P.fieldName,N=g[D],B=P.getter,Z=P.getterContext,Q=g[D+p.length],ce=P.setter,Oe=P.setterContext;b[W]={read:Ve=>N.fromWireType(B(Z,Ve)),write:(Ve,En)=>{var Lr=[];ce(Oe,Ve,Q.toWireType(Lr,En)),Se(Lr)}}}),[{name:r.name,fromWireType:function(P){var D={};for(var W in b)D[W]=b[W].read(P);return c(P),D},toWireType:function(P,D){for(var W in b)if(!(W in D))throw new TypeError('Missing field:  "'+W+'"');var N=s();for(W in b)b[W].write(N,D[W]);return P!==null&&P.push(c,N),N},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:c}]})}function Ne(e,r,s,c,p){}function Ae(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Ur(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);te=e}var te=void 0;function fe(e){for(var r="",s=e;oe[s];)r+=te[oe[s++]];return r}var yr=void 0;function ie(e){throw new yr(e)}function ze(e,r,s={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var c=r.name;if(e||ie('type "'+c+'" must have a positive integer typeid pointer'),fr.hasOwnProperty(e)){if(s.ignoreDuplicateRegistrations)return;ie("Cannot register type '"+c+"' twice")}if(fr[e]=r,delete He[e],Er.hasOwnProperty(e)){var p=Er[e];delete Er[e],p.forEach(h=>h())}}function cr(e,r,s,c,p){var h=Ae(s);r=fe(r),ze(e,{name:r,fromWireType:function(g){return!!g},toWireType:function(g,b){return b?c:p},argPackAdvance:8,readValueFromPointer:function(g){var b;if(s===1)b=be;else if(s===2)b=ne;else if(s===4)b=Ie;else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(b[g>>h])},destructorFunction:null})}function et(e){if(!(this instanceof Pr)||!(e instanceof Pr))return!1;for(var r=this.$$.ptrType.registeredClass,s=this.$$.ptr,c=e.$$.ptrType.registeredClass,p=e.$$.ptr;r.baseClass;)s=r.upcast(s),r=r.baseClass;for(;c.baseClass;)p=c.upcast(p),c=c.baseClass;return r===c&&s===p}function It(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Br(e){function r(s){return s.$$.ptrType.registeredClass.name}ie(r(e)+" instance already deleted")}var rt=!1;function Fr(e){}function De(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Qe(e){e.count.value-=1;var r=e.count.value===0;r&&De(e)}function ae(e,r,s){if(r===s)return e;if(s.baseClass===void 0)return null;var c=ae(e,r,s.baseClass);return c===null?null:s.downcast(c)}var Fe={};function kr(){return Object.keys(er).length}function jr(){var e=[];for(var r in er)er.hasOwnProperty(r)&&e.push(er[r]);return e}var Nr=[];function zr(){for(;Nr.length;){var e=Nr.pop();e.$$.deleteScheduled=!1,e.delete()}}var Ze=void 0;function Wt(e){Ze=e,Nr.length&&Ze&&Ze(zr)}function on(){a.getInheritedInstanceCount=kr,a.getLiveInheritedInstances=jr,a.flushPendingDeletes=zr,a.setDelayFunction=Wt}var er={};function Ht(e,r){for(r===void 0&&ie("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r}function Ir(e,r){return r=Ht(e,r),er[r]}function tt(e,r){(!r.ptrType||!r.ptr)&&ee("makeClassHandle requires ptr and ptrType");var s=!!r.smartPtrType,c=!!r.smartPtr;return s!==c&&ee("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Xe(Object.create(e,{$$:{value:r}}))}function sn(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var s=Ir(this.registeredClass,r);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=r,s.$$.smartPtr=e,s.clone();var c=s.clone();return this.destructor(e),c}function p(){return this.isSmartPointer?tt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):tt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var h=this.registeredClass.getActualType(r),g=Fe[h];if(!g)return p.call(this);var b;this.isConst?b=g.constPointerType:b=g.pointerType;var P=ae(r,this.registeredClass,b.registeredClass);return P===null?p.call(this):this.isSmartPointer?tt(b.registeredClass.instancePrototype,{ptrType:b,ptr:P,smartPtrType:this,smartPtr:e}):tt(b.registeredClass.instancePrototype,{ptrType:b,ptr:P})}function Xe(e){return typeof FinalizationRegistry>"u"?(Xe=r=>r,e):(rt=new FinalizationRegistry(r=>{Qe(r.$$)}),Xe=r=>{var s=r.$$,c=!!s.smartPtr;if(c){var p={$$:s};rt.register(r,p,r)}return r},Fr=r=>rt.unregister(r),Xe(e))}function ht(){if(this.$$.ptr||Br(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Xe(Object.create(Object.getPrototypeOf(this),{$$:{value:It(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Gr(){this.$$.ptr||Br(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),Fr(this),Qe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function rr(){return!this.$$.ptr}function gt(){return this.$$.ptr||Br(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),Nr.push(this),Nr.length===1&&Ze&&Ze(zr),this.$$.deleteScheduled=!0,this}function Dr(){Pr.prototype.isAliasOf=et,Pr.prototype.clone=ht,Pr.prototype.delete=Gr,Pr.prototype.isDeleted=rr,Pr.prototype.deleteLater=gt}function Pr(){}function nt(e,r,s){if(e[r].overloadTable===void 0){var c=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||ie("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[r].overloadTable+")!"),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[c.argCount]=c}}function Ge(e,r,s){a.hasOwnProperty(e)?(ie("Cannot register public name '"+e+"' twice"),nt(a,e,e),a.hasOwnProperty(s)&&ie("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),a[e].overloadTable[s]=r):a[e]=r}function un(e,r,s,c,p,h,g,b){this.name=e,this.constructor=r,this.instancePrototype=s,this.rawDestructor=c,this.baseClass=p,this.getActualType=h,this.upcast=g,this.downcast=b,this.pureVirtualFunctions=[]}function Tr(e,r,s){for(;r!==s;)r.upcast||ie("Expected null or instance of "+s.name+", got an instance of "+r.name),e=r.upcast(e),r=r.baseClass;return e}function Mt(e,r){if(r===null)return this.isReference&&ie("null is not a valid "+this.name),0;r.$$||ie('Cannot pass "'+Hr(r)+'" as a '+this.name),r.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name);var s=r.$$.ptrType.registeredClass,c=Tr(r.$$.ptr,s,this.registeredClass);return c}function yt(e,r){var s;if(r===null)return this.isReference&&ie("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,s),s):0;r.$$||ie('Cannot pass "'+Hr(r)+'" as a '+this.name),r.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&r.$$.ptrType.isConst&&ie("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);var c=r.$$.ptrType.registeredClass;if(s=Tr(r.$$.ptr,c,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&ie("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?s=r.$$.smartPtr:ie("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)s=r.$$.smartPtr;else{var p=r.clone();s=this.rawShare(s,mr.toHandle(function(){p.delete()})),e!==null&&e.push(this.rawDestructor,s)}break;default:ie("Unsupporting sharing policy")}return s}function fn(e,r){if(r===null)return this.isReference&&ie("null is not a valid "+this.name),0;r.$$||ie('Cannot pass "'+Hr(r)+'" as a '+this.name),r.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),r.$$.ptrType.isConst&&ie("Cannot convert argument of type "+r.$$.ptrType.name+" to parameter type "+this.name);var s=r.$$.ptrType.registeredClass,c=Tr(r.$$.ptr,s,this.registeredClass);return c}function Lt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function lr(e){this.rawDestructor&&this.rawDestructor(e)}function dr(e){e!==null&&e.delete()}function Vt(){Me.prototype.getPointee=Lt,Me.prototype.destructor=lr,Me.prototype.argPackAdvance=8,Me.prototype.readValueFromPointer=ye,Me.prototype.deleteObject=dr,Me.prototype.fromWireType=sn}function Me(e,r,s,c,p,h,g,b,P,D,W){this.name=e,this.registeredClass=r,this.isReference=s,this.isConst=c,this.isSmartPointer=p,this.pointeeType=h,this.sharingPolicy=g,this.rawGetPointee=b,this.rawConstructor=P,this.rawShare=D,this.rawDestructor=W,!p&&r.baseClass===void 0?c?(this.toWireType=Mt,this.destructorFunction=null):(this.toWireType=fn,this.destructorFunction=null):this.toWireType=yt}function Bt(e,r,s){a.hasOwnProperty(e)||ee("Replacing nonexistant public symbol"),a[e].overloadTable!==void 0&&s!==void 0||(a[e]=r,a[e].argCount=s)}function _t(e,r,s){var c=a["dynCall_"+e];return s&&s.length?c.apply(null,[r].concat(s)):c.call(null,r)}var it=[];function Pe(e){var r=it[e];return r||(e>=it.length&&(it.length=e+1),it[e]=r=or.get(e)),r}function _r(e,r,s){if(e.includes("j"))return _t(e,r,s);var c=Pe(r).apply(null,s);return c}function at(e,r){var s=[];return function(){return s.length=0,Object.assign(s,arguments),_r(e,r,s)}}function qe(e,r){e=fe(e);function s(){return e.includes("j")?at(e,r):Pe(r)}var c=s();return typeof c!="function"&&ie("unknown function pointer with signature "+e+": "+r),c}var Nt=void 0;function Ye(e){var r=G(e),s=fe(r);return H(r),s}function tr(e,r){var s=[],c={};function p(h){if(!c[h]&&!fr[h]){if(He[h]){He[h].forEach(p);return}s.push(h),c[h]=!0}}throw r.forEach(p),new Nt(e+": "+s.map(Ye).join([", "]))}function ot(e,r,s,c,p,h,g,b,P,D,W,N,B){W=fe(W),h=qe(p,h),b&&(b=qe(g,b)),D&&(D=qe(P,D)),B=qe(N,B);var Z=Zr(W);Ge(Z,function(){tr("Cannot construct "+W+" due to unbound types",[c])}),Be([e,r,s],c?[c]:[],function(Q){Q=Q[0];var ce,Oe;c?(ce=Q.registeredClass,Oe=ce.instancePrototype):Oe=Pr.prototype;var Ve=Sr(Z,function(){if(Object.getPrototypeOf(this)!==En)throw new yr("Use 'new' to construct "+W);if(Lr.constructor_body===void 0)throw new yr(W+" has no accessible constructor");var ri=Lr.constructor_body[arguments.length];if(ri===void 0)throw new yr("Tried to invoke ctor of "+W+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Lr.constructor_body).toString()+") parameters instead!");return ri.apply(this,arguments)}),En=Object.create(Oe,{constructor:{value:Ve}});Ve.prototype=En;var Lr=new un(W,Ve,En,B,ce,h,b,D),Wn=new Me(W,Lr,!0,!1,!1),xn=new Me(W+"*",Lr,!1,!1,!1),ei=new Me(W+" const*",Lr,!1,!0,!1);return Fe[e]={pointerType:xn,constPointerType:ei},Bt(Z,Ve),[Wn,xn,ei]})}function st(e,r){for(var s=[],c=0;c<e;c++)s.push(le[r+c*4>>2]);return s}function cn(e,r){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var s=Sr(e.name||"unknownFunctionName",function(){});s.prototype=e.prototype;var c=new s,p=e.apply(c,r);return p instanceof Object?p:c}function ut(e,r,s,c,p){var h=r.length;h<2&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var g=r[1]!==null&&s!==null,b=!1,P=1;P<r.length;++P)if(r[P]!==null&&r[P].destructorFunction===void 0){b=!0;break}for(var D=r[0].name!=="void",W="",N="",P=0;P<h-2;++P)W+=(P!==0?", ":"")+"arg"+P,N+=(P!==0?", ":"")+"arg"+P+"Wired";var B="return function "+Zr(e)+"("+W+`) {
if (arguments.length !== `+(h-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(h-2)+` args!');
}
`;b&&(B+=`var destructors = [];
`);var Z=b?"destructors":"null",Q=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ce=[ie,c,p,Se,r[0],r[1]];g&&(B+="var thisWired = classParam.toWireType("+Z+`, this);
`);for(var P=0;P<h-2;++P)B+="var arg"+P+"Wired = argType"+P+".toWireType("+Z+", arg"+P+"); // "+r[P+2].name+`
`,Q.push("argType"+P),ce.push(r[P+2]);if(g&&(N="thisWired"+(N.length>0?", ":"")+N),B+=(D?"var rv = ":"")+"invoker(fn"+(N.length>0?", ":"")+N+`);
`,b)B+=`runDestructors(destructors);
`;else for(var P=g?1:2;P<r.length;++P){var Oe=P===1?"thisWired":"arg"+(P-2)+"Wired";r[P].destructorFunction!==null&&(B+=Oe+"_dtor("+Oe+"); // "+r[P].name+`
`,Q.push(Oe+"_dtor"),ce.push(r[P].destructorFunction))}D&&(B+=`var ret = retType.fromWireType(rv);
return ret;
`),B+=`}
`,Q.push(B);var Ve=cn(Function,Q).apply(null,ce);return Ve}function _e(e,r,s,c,p,h){Ce(r>0);var g=st(r,s);p=qe(c,p),Be([],[e],function(b){b=b[0];var P="constructor "+b.name;if(b.registeredClass.constructor_body===void 0&&(b.registeredClass.constructor_body=[]),b.registeredClass.constructor_body[r-1]!==void 0)throw new yr("Cannot register multiple constructors with identical number of parameters ("+(r-1)+") for class '"+b.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return b.registeredClass.constructor_body[r-1]=()=>{tr("Cannot construct "+b.name+" due to unbound types",g)},Be([],g,function(D){return D.splice(1,0,null),b.registeredClass.constructor_body[r-1]=ut(P,D,null,p,h),[]}),[]})}function mt(e,r,s,c,p,h,g,b){var P=st(s,c);r=fe(r),h=qe(p,h),Be([],[e],function(D){D=D[0];var W=D.name+"."+r;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),b&&D.registeredClass.pureVirtualFunctions.push(r);function N(){tr("Cannot call "+W+" due to unbound types",P)}var B=D.registeredClass.instancePrototype,Z=B[r];return Z===void 0||Z.overloadTable===void 0&&Z.className!==D.name&&Z.argCount===s-2?(N.argCount=s-2,N.className=D.name,B[r]=N):(nt(B,r,W),B[r].overloadTable[s-2]=N),Be([],P,function(Q){var ce=ut(W,Q,D,h,g);return B[r].overloadTable===void 0?(ce.argCount=s-2,B[r]=ce):B[r].overloadTable[s-2]=ce,[]}),[]})}var ft=[],Le=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function bt(e){e>4&&--Le[e].refcount===0&&(Le[e]=void 0,ft.push(e))}function nr(){for(var e=0,r=5;r<Le.length;++r)Le[r]!==void 0&&++e;return e}function zt(){for(var e=5;e<Le.length;++e)if(Le[e]!==void 0)return Le[e];return null}function Wr(){a.count_emval_handles=nr,a.get_first_emval=zt}var mr={toValue:e=>(e||ie("Cannot use deleted val. handle = "+e),Le[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var r=ft.length?ft.pop():Le.length;return Le[r]={refcount:1,value:e},r}}}};function ln(e,r){r=fe(r),ze(e,{name:r,fromWireType:function(s){var c=mr.toValue(s);return bt(s),c},toWireType:function(s,c){return mr.toHandle(c)},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:null})}function Hr(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}function ir(e,r){switch(r){case 2:return function(s){return this.fromWireType(Jr[s>>2])};case 3:return function(s){return this.fromWireType(Xr[s>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Gt(e,r,s){var c=Ae(s);r=fe(r),ze(e,{name:r,fromWireType:function(p){return p},toWireType:function(p,h){return h},argPackAdvance:8,readValueFromPointer:ir(r,c),destructorFunction:null})}function dn(e,r,s){switch(r){case 0:return s?function(p){return be[p]}:function(p){return oe[p]};case 1:return s?function(p){return ne[p>>1]}:function(p){return pe[p>>1]};case 2:return s?function(p){return Ie[p>>2]}:function(p){return le[p>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function pn(e,r,s,c,p){r=fe(r);var h=Ae(s),g=N=>N;if(c===0){var b=32-8*s;g=N=>N<<b>>>b}var P=r.includes("unsigned"),D=(N,B)=>{},W;P?W=function(N,B){return D(B,this.name),B>>>0}:W=function(N,B){return D(B,this.name),B},ze(e,{name:r,fromWireType:g,toWireType:W,argPackAdvance:8,readValueFromPointer:dn(r,h,c!==0),destructorFunction:null})}function qt(e,r,s){var c=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=c[r];function h(g){g=g>>2;var b=le,P=b[g],D=b[g+1];return new p(he,D,P)}s=fe(s),ze(e,{name:s,fromWireType:h,argPackAdvance:8,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})}function ct(e,r){r=fe(r);var s=r==="std::string";ze(e,{name:r,fromWireType:function(c){var p=le[c>>2],h=c+4,g;if(s)for(var b=h,P=0;P<=p;++P){var D=h+P;if(P==p||oe[D]==0){var W=D-b,N=Cr(b,W);g===void 0?g=N:(g+="\0",g+=N),b=D+1}}else{for(var B=new Array(p),P=0;P<p;++P)B[P]=String.fromCharCode(oe[h+P]);g=B.join("")}return H(c),g},toWireType:function(c,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var h,g=typeof p=="string";g||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||ie("Cannot pass non-string to std::string"),s&&g?h=ge(p):h=p.length;var b=x(4+h+1),P=b+4;if(le[b>>2]=h,s&&g)Je(p,P,h+1);else if(g)for(var D=0;D<h;++D){var W=p.charCodeAt(D);W>255&&(H(P),ie("String has UTF-16 code units that do not fit in 8 bits")),oe[P+D]=W}else for(var D=0;D<h;++D)oe[P+D]=p[D];return c!==null&&c.push(H,b),b},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(c){H(c)}})}var Jt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function wt(e,r){for(var s=e,c=s>>1,p=c+r/2;!(c>=p)&&pe[c];)++c;if(s=c<<1,s-e>32&&Jt)return Jt.decode(oe.subarray(e,s));for(var h="",g=0;!(g>=r/2);++g){var b=ne[e+g*2>>1];if(b==0)break;h+=String.fromCharCode(b)}return h}function vn(e,r,s){if(s===void 0&&(s=2147483647),s<2)return 0;s-=2;for(var c=r,p=s<e.length*2?s/2:e.length,h=0;h<p;++h){var g=e.charCodeAt(h);ne[r>>1]=g,r+=2}return ne[r>>1]=0,r-c}function hn(e){return e.length*2}function gn(e,r){for(var s=0,c="";!(s>=r/4);){var p=Ie[e+s*4>>2];if(p==0)break;if(++s,p>=65536){var h=p-65536;c+=String.fromCharCode(55296|h>>10,56320|h&1023)}else c+=String.fromCharCode(p)}return c}function Pt(e,r,s){if(s===void 0&&(s=2147483647),s<4)return 0;for(var c=r,p=c+s-4,h=0;h<e.length;++h){var g=e.charCodeAt(h);if(g>=55296&&g<=57343){var b=e.charCodeAt(++h);g=65536+((g&1023)<<10)|b&1023}if(Ie[r>>2]=g,r+=4,r+4>p)break}return Ie[r>>2]=0,r-c}function yn(e){for(var r=0,s=0;s<e.length;++s){var c=e.charCodeAt(s);c>=55296&&c<=57343&&++s,r+=4}return r}function _n(e,r,s){s=fe(s);var c,p,h,g,b;r===2?(c=wt,p=vn,g=hn,h=()=>pe,b=1):r===4&&(c=gn,p=Pt,g=yn,h=()=>le,b=2),ze(e,{name:s,fromWireType:function(P){for(var D=le[P>>2],W=h(),N,B=P+4,Z=0;Z<=D;++Z){var Q=P+4+Z*r;if(Z==D||W[Q>>b]==0){var ce=Q-B,Oe=c(B,ce);N===void 0?N=Oe:(N+="\0",N+=Oe),B=Q+r}}return H(P),N},toWireType:function(P,D){typeof D!="string"&&ie("Cannot pass non-string to C++ string type "+s);var W=g(D),N=x(4+W+r);return le[N>>2]=W>>b,p(D,N+4,W+r),P!==null&&P.push(H,N),N},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(P){H(P)}})}function mn(e,r,s,c,p,h){we[e]={name:fe(r),rawConstructor:qe(s,c),rawDestructor:qe(p,h),fields:[]}}function Tt(e,r,s,c,p,h,g,b,P,D){we[e].fields.push({fieldName:fe(r),getterReturnType:s,getter:qe(c,p),getterContext:h,setterArgumentType:g,setter:qe(b,P),setterContext:D})}function bn(e,r){r=fe(r),ze(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(s,c){}})}function Xt(){throw 1/0}var Yt={};function wn(e){var r=Yt[e];return r===void 0?fe(e):r}function Ct(){return typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")()}function Pn(e){return e===0?mr.toHandle(Ct()):(e=wn(e),mr.toHandle(Ct()[e]))}function Kt(e){e>4&&(Le[e].refcount+=1)}function Qt(e,r){var s=fr[e];return s===void 0&&ie(r+" has unknown type "+Ye(e)),s}function Zt(e){for(var r="",s=0;s<e;++s)r+=(s!==0?", ":"")+"arg"+s;for(var c=()=>le,p="return function emval_allocator_"+e+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,s=0;s<e;++s)p+="var argType"+s+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+s+`');
var arg`+s+" = argType"+s+`.readValueFromPointer(args);
args += argType`+s+`['argPackAdvance'];
argTypes += 4;
`;return p+="var obj = new constructor("+r+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",p)(Qt,a,mr.toHandle,c)}var en={};function Tn(e,r,s,c){e=mr.toValue(e);var p=en[r];return p||(p=Zt(r),en[r]=p),p(e,s,c)}function Cn(e,r){e=Qt(e,"_emval_take_value");var s=e.readValueFromPointer(r);return mr.toHandle(s)}function $n(){hr("")}function $t(e,r,s){oe.copyWithin(e,r,r+s)}function An(){return 2147483648}function qr(e){try{return pr.grow(e-he.byteLength+65535>>>16),Yr(pr.buffer),1}catch{}}function Rn(e){var r=oe.length;e=e>>>0;var s=An();if(e>s)return!1;let c=(P,D)=>P+(D-P%D)%D;for(var p=1;p<=4;p*=2){var h=r*(1+.2/p);h=Math.min(h,e+100663296);var g=Math.min(s,c(Math.max(e,h),65536)),b=qr(g);if(b)return!0}return!1}var At={};function Rt(){return q||"./this.program"}function Mr(){if(!Mr.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Rt()};for(var s in At)At[s]===void 0?delete r[s]:r[s]=At[s];var c=[];for(var s in r)c.push(s+"="+r[s]);Mr.strings=c}return Mr.strings}function br(e,r,s){for(var c=0;c<e.length;++c)be[r++>>0]=e.charCodeAt(c);be[r>>0]=0}function rn(e,r){var s=0;return Mr().forEach(function(c,p){var h=r+s;le[e+p*4>>2]=h,br(c,h),s+=c.length+1}),0}function tn(e,r){var s=Mr();le[e>>2]=s.length;var c=0;return s.forEach(function(p){c+=p.length+1}),le[r>>2]=c,0}function Et(e){V(e,new jt(e))}function nn(e,r){Et(e)}var lt=nn;function St(e){return 52}function u(e,r,s,c,p){return 70}var f=[null,[],[]];function v(e,r){var s=f[e];r===0||r===10?((e===1?Te:Re)(xr(s,0)),s.length=0):s.push(r)}function w(e,r,s,c){for(var p=0,h=0;h<s;h++){var g=le[r>>2],b=le[r+4>>2];r+=8;for(var P=0;P<b;P++)v(e,oe[g+P]);p+=b}return le[c>>2]=p,0}function $(e){var r=a["_"+e];return r}function O(e,r){be.set(e,r)}function F(e,r,s,c,p){var h={string:Q=>{var ce=0;if(Q!=null&&Q!==0){var Oe=(Q.length<<2)+1;ce=d(Oe),Je(Q,ce,Oe)}return ce},array:Q=>{var ce=d(Q.length);return O(Q,ce),ce}};function g(Q){return r==="string"?Cr(Q):r==="boolean"?!!Q:Q}var b=$(e),P=[],D=0;if(c)for(var W=0;W<c.length;W++){var N=h[s[W]];N?(D===0&&(D=i()),P[W]=N(c[W])):P[W]=c[W]}var B=b.apply(null,P);function Z(Q){return D!==0&&o(D),g(Q)}return B=Z(B),B}wr=a.InternalError=de(Error,"InternalError"),Ur(),yr=a.BindingError=de(Error,"BindingError"),Dr(),on(),Vt(),Nt=a.UnboundTypeError=de(Error,"UnboundTypeError"),Wr();var A={g:gr,A:xe,w:Ne,F:cr,u:ot,t:_e,c:mt,E:ln,m:Gt,b:pn,a:qt,l:ct,h:_n,J:mn,d:Tt,G:bn,x:Xt,i:bt,r:Pn,p:Kt,q:Tn,s:Cn,j:$n,D:$t,y:Rn,z:rn,B:tn,I:lt,C:St,v:u,k:w,o:k,n:I,H:R,f:T,e:j};dt(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.L).apply(null,arguments)};var x=a._malloc=function(){return(x=a._malloc=a.asm.N).apply(null,arguments)},H=a._free=function(){return(H=a._free=a.asm.O).apply(null,arguments)},G=a.___getTypeName=function(){return(G=a.___getTypeName=a.asm.P).apply(null,arguments)};a.__embind_initialize_bindings=function(){return(a.__embind_initialize_bindings=a.asm.Q).apply(null,arguments)};var X=a._setThrew=function(){return(X=a._setThrew=a.asm.R).apply(null,arguments)},i=a.stackSave=function(){return(i=a.stackSave=a.asm.S).apply(null,arguments)},o=a.stackRestore=function(){return(o=a.stackRestore=a.asm.T).apply(null,arguments)},d=a.stackAlloc=function(){return(d=a.stackAlloc=a.asm.U).apply(null,arguments)},y=a.___cxa_is_pointer_type=function(){return(y=a.___cxa_is_pointer_type=a.asm.V).apply(null,arguments)};a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.W).apply(null,arguments)};function T(e,r){var s=i();try{Pe(e)(r)}catch(c){if(o(s),c!==c+0)throw c;X(1,0)}}function k(e,r){var s=i();try{return Pe(e)(r)}catch(c){if(o(s),c!==c+0)throw c;X(1,0)}}function j(e,r,s,c){var p=i();try{Pe(e)(r,s,c)}catch(h){if(o(p),h!==h+0)throw h;X(1,0)}}function R(e,r,s,c){var p=i();try{return Pe(e)(r,s,c)}catch(h){if(o(p),h!==h+0)throw h;X(1,0)}}function I(e,r,s){var c=i();try{return Pe(e)(r,s)}catch(p){if(o(c),p!==p+0)throw p;X(1,0)}}a.ccall=F;var t;vr=function e(){t||n(),t||(vr=e)};function n(e){if(Rr>0||(Dt(),Rr>0))return;function r(){t||(t=!0,a.calledRun=!0,!je&&(an(),C(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),xt()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),r()},1)):r()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return n(),E.ready})})();l.exports=m})(qn)),qn.exports}var Gi=zi(),qi=zn(Gi);const Ji=new URL(""+new URL("libjpegturbowasm_decode-daqMmuVl.wasm",import.meta.url).href,import.meta.url),Ln={codec:void 0,decoder:void 0};function Xi(){if(Ln.codec)return Promise.resolve();const l=qi({locateFile:_=>_.endsWith(".wasm")?Ji.toString():_});return new Promise((_,m)=>{l.then(S=>{Ln.codec=S,Ln.decoder=new S.JPEGDecoder,_()},m)})}async function Yi(l,_){await Xi();const m=Ln.decoder;m.getEncodedBuffer(l.length).set(l),m.decode();const E=m.getFrameInfo(),a=m.getDecodedBuffer(),C={columns:E.width,rows:E.height,bitsPerPixel:E.bitsPerSample,signed:_.signed,bytesPerPixel:_.bytesPerPixel,componentsPerPixel:E.componentCount},U=Ki(E,a),M={frameInfo:E};return{..._,pixelData:U,imageInfo:C,encodeOptions:M,...M,...C}}function Ki(l,_){return l.isSigned?new Int8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}const jn={JpegImage:void 0,decodeConfig:{}};function Qi(l){return jn.decodeConfig=l,jn.JpegImage?Promise.resolve():new Promise((_,m)=>{import("./jpeg-B-x1txLf.js").then(S=>{jn.JpegImage=S.default,_()}).catch(m)})}async function Zi(l,_){if(await Qi(),typeof jn.JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");const m=new jn.JpegImage;if(m.parse(_),m.colorTransform=!1,l.bitsAllocated===8)return l.pixelData=m.getData(l.columns,l.rows),l;if(l.bitsAllocated===16)return l.pixelData=m.getData16(l.columns,l.rows),l}const In={DecoderClass:void 0,decodeConfig:{}};function ea(l){return In.decodeConfig=l,In.DecoderClass?Promise.resolve():new Promise((_,m)=>{import("./lossless-CyYqoyFe.js").then(({Decoder:S})=>{In.DecoderClass=S,_()},m)})}async function ai(l,_){if(await ea(),typeof In.DecoderClass>"u")throw new Error("No JPEG Lossless decoder loaded");const m=new In.DecoderClass,S=l.bitsAllocated<=8?1:2,E=_.buffer,a=m.decode(E,_.byteOffset,_.length,S);return l.pixelRepresentation===0?l.bitsAllocated===16?(l.pixelData=new Uint16Array(a.buffer),l):(l.pixelData=new Uint8Array(a.buffer),l):(l.pixelData=new Int16Array(a.buffer),l)}var Jn={exports:{}},oi;function ra(){return oi||(oi=1,(function(l,_){var m=(()=>{var S=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(S=S||__filename),(function(E){E=E||{};var a=typeof E<"u"?E:{},C,U;a.ready=new Promise(function(u,f){C=u,U=f});var M=Object.assign({},a),q=typeof window=="object",V=typeof importScripts=="function",J=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",L="";function re(u){return a.locateFile?a.locateFile(u,L):L+u}var z,Y,se;if(J){var ke=Fn,K=Fn;V?L=K.dirname(L)+"/":L=__dirname+"/",z=(u,f)=>(u=hr(u)?new URL(u):K.normalize(u),ke.readFileSync(u,f?void 0:"utf8")),se=u=>{var f=z(u,!0);return f.buffer||(f=new Uint8Array(f)),f},Y=(u,f,v)=>{u=hr(u)?new URL(u):K.normalize(u),ke.readFile(u,function(w,$){w?v(w):f($.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(u){if(!(u instanceof Ut))throw u}),process.on("unhandledRejection",function(u){throw u}),a.inspect=function(){return"[Emscripten Module object]"}}else(q||V)&&(V?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),S&&(L=S),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",z=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.send(null),f.responseText},V&&(se=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),Y=(u,f,v)=>{var w=new XMLHttpRequest;w.open("GET",u,!0),w.responseType="arraybuffer",w.onload=()=>{if(w.status==200||w.status==0&&w.response){f(w.response);return}v()},w.onerror=v,w.send(null)});a.print||console.log.bind(console);var me=a.printErr||console.warn.bind(console);Object.assign(a,M),M=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit;var ve;a.wasmBinary&&(ve=a.wasmBinary),a.noExitRuntime,typeof WebAssembly!="object"&&vr("no native wasm support detected");var Te,Re=!1;function Ue(u,f){u||vr(f)}var pr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function je(u,f,v){for(var w=f+v,$=f;u[$]&&!($>=w);)++$;if($-f>16&&u.buffer&&pr)return pr.decode(u.subarray(f,$));for(var O="";f<$;){var F=u[f++];if(!(F&128)){O+=String.fromCharCode(F);continue}var A=u[f++]&63;if((F&224)==192){O+=String.fromCharCode((F&31)<<6|A);continue}var x=u[f++]&63;if((F&240)==224?F=(F&15)<<12|A<<6|x:F=(F&7)<<18|A<<12|x<<6|u[f++]&63,F<65536)O+=String.fromCharCode(F);else{var H=F-65536;O+=String.fromCharCode(55296|H>>10,56320|H&1023)}}return O}function Ce(u,f){return u?je(ge,u,f):""}function ar(u,f,v,w){if(!(w>0))return 0;for(var $=v,O=v+w-1,F=0;F<u.length;++F){var A=u.charCodeAt(F);if(A>=55296&&A<=57343){var x=u.charCodeAt(++F);A=65536+((A&1023)<<10)|x&1023}if(A<=127){if(v>=O)break;f[v++]=A}else if(A<=2047){if(v+1>=O)break;f[v++]=192|A>>6,f[v++]=128|A&63}else if(A<=65535){if(v+2>=O)break;f[v++]=224|A>>12,f[v++]=128|A>>6&63,f[v++]=128|A&63}else{if(v+3>=O)break;f[v++]=240|A>>18,f[v++]=128|A>>12&63,f[v++]=128|A>>6&63,f[v++]=128|A&63}}return f[v]=0,v-$}function xr(u,f,v){return ar(u,ge,f,v)}function Cr(u){for(var f=0,v=0;v<u.length;++v){var w=u.charCodeAt(v);w<=127?f++:w<=2047?f+=2:w>=55296&&w<=57343?(f+=4,++v):f+=3}return f}var ue,Je,ge,he,be,oe,ne,pe,Ie;function le(u){ue=u,a.HEAP8=Je=new Int8Array(u),a.HEAP16=he=new Int16Array(u),a.HEAP32=oe=new Int32Array(u),a.HEAPU8=ge=new Uint8Array(u),a.HEAPU16=be=new Uint16Array(u),a.HEAPU32=ne=new Uint32Array(u),a.HEAPF32=pe=new Float32Array(u),a.HEAPF64=Ie=new Float64Array(u)}a.INITIAL_MEMORY;var Jr,Xr=[],Yr=[],or=[];function $r(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Dt(a.preRun.shift());Kr(Xr)}function Ft(){Kr(Yr)}function kt(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)xt(a.postRun.shift());Kr(or)}function Dt(u){Xr.unshift(u)}function an(u){Yr.unshift(u)}function xt(u){or.unshift(u)}var sr=0,Ke=null;function Ar(u){sr++,a.monitorRunDependencies&&a.monitorRunDependencies(sr)}function Rr(u){if(sr--,a.monitorRunDependencies&&a.monitorRunDependencies(sr),sr==0&&Ke){var f=Ke;Ke=null,f()}}function vr(u){a.onAbort&&a.onAbort(u),u="Aborted("+u+")",me(u),Re=!0,u+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(u);throw U(f),f}var Or="data:application/octet-stream;base64,";function Ot(u){return u.startsWith(Or)}function hr(u){return u.startsWith("file://")}var Ee;Ee="charlswasm_decode.wasm",Ot(Ee)||(Ee=re(Ee));function $e(u){try{if(u==Ee&&ve)return new Uint8Array(ve);if(se)return se(u);throw"both async and sync fetching of the wasm failed"}catch(f){vr(f)}}function Vr(){if(!ve&&(q||V)){if(typeof fetch=="function"&&!hr(Ee))return fetch(Ee,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+Ee+"'";return u.arrayBuffer()}).catch(function(){return $e(Ee)});if(Y)return new Promise(function(u,f){Y(Ee,function(v){u(new Uint8Array(v))},f)})}return Promise.resolve().then(function(){return $e(Ee)})}function We(){var u={a:At};function f(F,A){var x=F.exports;a.asm=x,Te=a.asm.z,le(Te.buffer),Jr=a.asm.C,an(a.asm.A),Rr()}Ar();function v(F){f(F.instance)}function w(F){return Vr().then(function(A){return WebAssembly.instantiate(A,u)}).then(function(A){return A}).then(F,function(A){me("failed to asynchronously prepare wasm: "+A),vr(A)})}function $(){return!ve&&typeof WebAssembly.instantiateStreaming=="function"&&!Ot(Ee)&&!hr(Ee)&&!J&&typeof fetch=="function"?fetch(Ee,{credentials:"same-origin"}).then(function(F){var A=WebAssembly.instantiateStreaming(F,u);return A.then(v,function(x){return me("wasm streaming compile failed: "+x),me("falling back to ArrayBuffer instantiation"),w(v)})}):w(v)}if(a.instantiateWasm)try{var O=a.instantiateWasm(u,f);return O}catch(F){me("Module.instantiateWasm callback failed with error: "+F),U(F)}return $().catch(U),{}}function Ut(u){this.name="ExitStatus",this.message="Program terminated with exit("+u+")",this.status=u}function Kr(u){for(;u.length>0;)u.shift()(a)}function dt(u){this.excPtr=u,this.ptr=u-24,this.set_type=function(f){ne[this.ptr+4>>2]=f},this.get_type=function(){return ne[this.ptr+4>>2]},this.set_destructor=function(f){ne[this.ptr+8>>2]=f},this.get_destructor=function(){return ne[this.ptr+8>>2]},this.set_refcount=function(f){oe[this.ptr>>2]=f},this.set_caught=function(f){f=f?1:0,Je[this.ptr+12>>0]=f},this.get_caught=function(){return Je[this.ptr+12>>0]!=0},this.set_rethrown=function(f){f=f?1:0,Je[this.ptr+13>>0]=f},this.get_rethrown=function(){return Je[this.ptr+13>>0]!=0},this.init=function(f,v){this.set_adjusted_ptr(0),this.set_type(f),this.set_destructor(v),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var f=oe[this.ptr>>2];oe[this.ptr>>2]=f+1},this.release_ref=function(){var f=oe[this.ptr>>2];return oe[this.ptr>>2]=f-1,f===1},this.set_adjusted_ptr=function(f){ne[this.ptr+16>>2]=f},this.get_adjusted_ptr=function(){return ne[this.ptr+16>>2]},this.get_exception_ptr=function(){var f=nn(this.get_type());if(f)return ne[this.excPtr>>2];var v=this.get_adjusted_ptr();return v!==0?v:this.excPtr}}function jt(u,f,v){var w=new dt(u);throw w.init(f,v),u}var ur={};function Qr(u){for(;u.length;){var f=u.pop(),v=u.pop();v(f)}}function gr(u){return this.fromWireType(oe[u>>2])}var we={},Se={},ye={},Er=48,fr=57;function He(u){if(u===void 0)return"_unknown";u=u.replace(/[^a-zA-Z0-9_]/g,"$");var f=u.charCodeAt(0);return f>=Er&&f<=fr?"_"+u:u}function pt(u,f){return u=He(u),new Function("body","return function "+u+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(f)}function vt(u,f){var v=pt(f,function(w){this.name=f,this.message=w;var $=new Error(w).stack;$!==void 0&&(this.stack=this.toString()+`
`+$.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var Zr=void 0;function Sr(u){throw new Zr(u)}function de(u,f,v){u.forEach(function(A){ye[A]=f});function w(A){var x=v(A);x.length!==u.length&&Sr("Mismatched type converter count");for(var H=0;H<u.length;++H)fe(u[H],x[H])}var $=new Array(f.length),O=[],F=0;f.forEach((A,x)=>{Se.hasOwnProperty(A)?$[x]=Se[A]:(O.push(A),we.hasOwnProperty(A)||(we[A]=[]),we[A].push(()=>{$[x]=Se[A],++F,F===O.length&&w($)}))}),O.length===0&&w($)}function wr(u){var f=ur[u];delete ur[u];var v=f.rawConstructor,w=f.rawDestructor,$=f.fields,O=$.map(F=>F.getterReturnType).concat($.map(F=>F.setterArgumentType));de([u],O,F=>{var A={};return $.forEach((x,H)=>{var G=x.fieldName,X=F[H],i=x.getter,o=x.getterContext,d=F[H+$.length],y=x.setter,T=x.setterContext;A[G]={read:k=>X.fromWireType(i(o,k)),write:(k,j)=>{var R=[];y(T,k,d.toWireType(R,j)),Qr(R)}}}),[{name:f.name,fromWireType:function(x){var H={};for(var G in A)H[G]=A[G].read(x);return w(x),H},toWireType:function(x,H){for(var G in A)if(!(G in H))throw new TypeError('Missing field:  "'+G+'"');var X=v();for(G in A)A[G].write(X,H[G]);return x!==null&&x.push(w,X),X},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:w}]})}function ee(u,f,v,w,$){}function Be(u){switch(u){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+u)}}function xe(){for(var u=new Array(256),f=0;f<256;++f)u[f]=String.fromCharCode(f);Ne=u}var Ne=void 0;function Ae(u){for(var f="",v=u;ge[v];)f+=Ne[ge[v++]];return f}var Ur=void 0;function te(u){throw new Ur(u)}function fe(u,f,v={}){if(!("argPackAdvance"in f))throw new TypeError("registerType registeredInstance requires argPackAdvance");var w=f.name;if(u||te('type "'+w+'" must have a positive integer typeid pointer'),Se.hasOwnProperty(u)){if(v.ignoreDuplicateRegistrations)return;te("Cannot register type '"+w+"' twice")}if(Se[u]=f,delete ye[u],we.hasOwnProperty(u)){var $=we[u];delete we[u],$.forEach(O=>O())}}function yr(u,f,v,w,$){var O=Be(v);f=Ae(f),fe(u,{name:f,fromWireType:function(F){return!!F},toWireType:function(F,A){return A?w:$},argPackAdvance:8,readValueFromPointer:function(F){var A;if(v===1)A=Je;else if(v===2)A=he;else if(v===4)A=oe;else throw new TypeError("Unknown boolean type size: "+f);return this.fromWireType(A[F>>O])},destructorFunction:null})}function ie(u){if(!(this instanceof rr)||!(u instanceof rr))return!1;for(var f=this.$$.ptrType.registeredClass,v=this.$$.ptr,w=u.$$.ptrType.registeredClass,$=u.$$.ptr;f.baseClass;)v=f.upcast(v),f=f.baseClass;for(;w.baseClass;)$=w.upcast($),w=w.baseClass;return f===w&&v===$}function ze(u){return{count:u.count,deleteScheduled:u.deleteScheduled,preservePointerOnDelete:u.preservePointerOnDelete,ptr:u.ptr,ptrType:u.ptrType,smartPtr:u.smartPtr,smartPtrType:u.smartPtrType}}function cr(u){function f(v){return v.$$.ptrType.registeredClass.name}te(f(u)+" instance already deleted")}var et=!1;function It(u){}function Br(u){u.smartPtr?u.smartPtrType.rawDestructor(u.smartPtr):u.ptrType.registeredClass.rawDestructor(u.ptr)}function rt(u){u.count.value-=1;var f=u.count.value===0;f&&Br(u)}function Fr(u,f,v){if(f===v)return u;if(v.baseClass===void 0)return null;var w=Fr(u,f,v.baseClass);return w===null?null:v.downcast(w)}var De={};function Qe(){return Object.keys(Ze).length}function ae(){var u=[];for(var f in Ze)Ze.hasOwnProperty(f)&&u.push(Ze[f]);return u}var Fe=[];function kr(){for(;Fe.length;){var u=Fe.pop();u.$$.deleteScheduled=!1,u.delete()}}var jr=void 0;function Nr(u){jr=u,Fe.length&&jr&&jr(kr)}function zr(){a.getInheritedInstanceCount=Qe,a.getLiveInheritedInstances=ae,a.flushPendingDeletes=kr,a.setDelayFunction=Nr}var Ze={};function Wt(u,f){for(f===void 0&&te("ptr should not be undefined");u.baseClass;)f=u.upcast(f),u=u.baseClass;return f}function on(u,f){return f=Wt(u,f),Ze[f]}function er(u,f){(!f.ptrType||!f.ptr)&&Sr("makeClassHandle requires ptr and ptrType");var v=!!f.smartPtrType,w=!!f.smartPtr;return v!==w&&Sr("Both smartPtrType and smartPtr must be specified"),f.count={value:1},Ir(Object.create(u,{$$:{value:f}}))}function Ht(u){var f=this.getPointee(u);if(!f)return this.destructor(u),null;var v=on(this.registeredClass,f);if(v!==void 0){if(v.$$.count.value===0)return v.$$.ptr=f,v.$$.smartPtr=u,v.clone();var w=v.clone();return this.destructor(u),w}function $(){return this.isSmartPointer?er(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:f,smartPtrType:this,smartPtr:u}):er(this.registeredClass.instancePrototype,{ptrType:this,ptr:u})}var O=this.registeredClass.getActualType(f),F=De[O];if(!F)return $.call(this);var A;this.isConst?A=F.constPointerType:A=F.pointerType;var x=Fr(f,this.registeredClass,A.registeredClass);return x===null?$.call(this):this.isSmartPointer?er(A.registeredClass.instancePrototype,{ptrType:A,ptr:x,smartPtrType:this,smartPtr:u}):er(A.registeredClass.instancePrototype,{ptrType:A,ptr:x})}function Ir(u){return typeof FinalizationRegistry>"u"?(Ir=f=>f,u):(et=new FinalizationRegistry(f=>{rt(f.$$)}),Ir=f=>{var v=f.$$,w=!!v.smartPtr;if(w){var $={$$:v};et.register(f,$,f)}return f},It=f=>et.unregister(f),Ir(u))}function tt(){if(this.$$.ptr||cr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var u=Ir(Object.create(Object.getPrototypeOf(this),{$$:{value:ze(this.$$)}}));return u.$$.count.value+=1,u.$$.deleteScheduled=!1,u}function sn(){this.$$.ptr||cr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),It(this),rt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Xe(){return!this.$$.ptr}function ht(){return this.$$.ptr||cr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),Fe.push(this),Fe.length===1&&jr&&jr(kr),this.$$.deleteScheduled=!0,this}function Gr(){rr.prototype.isAliasOf=ie,rr.prototype.clone=tt,rr.prototype.delete=sn,rr.prototype.isDeleted=Xe,rr.prototype.deleteLater=ht}function rr(){}function gt(u,f,v){if(u[f].overloadTable===void 0){var w=u[f];u[f]=function(){return u[f].overloadTable.hasOwnProperty(arguments.length)||te("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+u[f].overloadTable+")!"),u[f].overloadTable[arguments.length].apply(this,arguments)},u[f].overloadTable=[],u[f].overloadTable[w.argCount]=w}}function Dr(u,f,v){a.hasOwnProperty(u)?((v===void 0||a[u].overloadTable!==void 0&&a[u].overloadTable[v]!==void 0)&&te("Cannot register public name '"+u+"' twice"),gt(a,u,u),a.hasOwnProperty(v)&&te("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),a[u].overloadTable[v]=f):(a[u]=f,v!==void 0&&(a[u].numArguments=v))}function Pr(u,f,v,w,$,O,F,A){this.name=u,this.constructor=f,this.instancePrototype=v,this.rawDestructor=w,this.baseClass=$,this.getActualType=O,this.upcast=F,this.downcast=A,this.pureVirtualFunctions=[]}function nt(u,f,v){for(;f!==v;)f.upcast||te("Expected null or instance of "+v.name+", got an instance of "+f.name),u=f.upcast(u),f=f.baseClass;return u}function Ge(u,f){if(f===null)return this.isReference&&te("null is not a valid "+this.name),0;f.$$||te('Cannot pass "'+Wr(f)+'" as a '+this.name),f.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name);var v=f.$$.ptrType.registeredClass,w=nt(f.$$.ptr,v,this.registeredClass);return w}function un(u,f){var v;if(f===null)return this.isReference&&te("null is not a valid "+this.name),this.isSmartPointer?(v=this.rawConstructor(),u!==null&&u.push(this.rawDestructor,v),v):0;f.$$||te('Cannot pass "'+Wr(f)+'" as a '+this.name),f.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&f.$$.ptrType.isConst&&te("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);var w=f.$$.ptrType.registeredClass;if(v=nt(f.$$.ptr,w,this.registeredClass),this.isSmartPointer)switch(f.$$.smartPtr===void 0&&te("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:f.$$.smartPtrType===this?v=f.$$.smartPtr:te("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:v=f.$$.smartPtr;break;case 2:if(f.$$.smartPtrType===this)v=f.$$.smartPtr;else{var $=f.clone();v=this.rawShare(v,nr.toHandle(function(){$.delete()})),u!==null&&u.push(this.rawDestructor,v)}break;default:te("Unsupporting sharing policy")}return v}function Tr(u,f){if(f===null)return this.isReference&&te("null is not a valid "+this.name),0;f.$$||te('Cannot pass "'+Wr(f)+'" as a '+this.name),f.$$.ptr||te("Cannot pass deleted object as a pointer of type "+this.name),f.$$.ptrType.isConst&&te("Cannot convert argument of type "+f.$$.ptrType.name+" to parameter type "+this.name);var v=f.$$.ptrType.registeredClass,w=nt(f.$$.ptr,v,this.registeredClass);return w}function Mt(u){return this.rawGetPointee&&(u=this.rawGetPointee(u)),u}function yt(u){this.rawDestructor&&this.rawDestructor(u)}function fn(u){u!==null&&u.delete()}function Lt(){lr.prototype.getPointee=Mt,lr.prototype.destructor=yt,lr.prototype.argPackAdvance=8,lr.prototype.readValueFromPointer=gr,lr.prototype.deleteObject=fn,lr.prototype.fromWireType=Ht}function lr(u,f,v,w,$,O,F,A,x,H,G){this.name=u,this.registeredClass=f,this.isReference=v,this.isConst=w,this.isSmartPointer=$,this.pointeeType=O,this.sharingPolicy=F,this.rawGetPointee=A,this.rawConstructor=x,this.rawShare=H,this.rawDestructor=G,!$&&f.baseClass===void 0?w?(this.toWireType=Ge,this.destructorFunction=null):(this.toWireType=Tr,this.destructorFunction=null):this.toWireType=un}function dr(u,f,v){a.hasOwnProperty(u)||Sr("Replacing nonexistant public symbol"),a[u].overloadTable!==void 0&&v!==void 0?a[u].overloadTable[v]=f:(a[u]=f,a[u].argCount=v)}function Vt(u,f,v){var w=a["dynCall_"+u];return v&&v.length?w.apply(null,[f].concat(v)):w.call(null,f)}var Me=[];function Bt(u){var f=Me[u];return f||(u>=Me.length&&(Me.length=u+1),Me[u]=f=Jr.get(u)),f}function _t(u,f,v){if(u.includes("j"))return Vt(u,f,v);var w=Bt(f).apply(null,v);return w}function it(u,f){var v=[];return function(){return v.length=0,Object.assign(v,arguments),_t(u,f,v)}}function Pe(u,f){u=Ae(u);function v(){return u.includes("j")?it(u,f):Bt(f)}var w=v();return typeof w!="function"&&te("unknown function pointer with signature "+u+": "+f),w}var _r=void 0;function at(u){var f=Mr(u),v=Ae(f);return br(f),v}function qe(u,f){var v=[],w={};function $(O){if(!w[O]&&!Se[O]){if(ye[O]){ye[O].forEach($);return}v.push(O),w[O]=!0}}throw f.forEach($),new _r(u+": "+v.map(at).join([", "]))}function Nt(u,f,v,w,$,O,F,A,x,H,G,X,i){G=Ae(G),O=Pe($,O),A&&(A=Pe(F,A)),H&&(H=Pe(x,H)),i=Pe(X,i);var o=He(G);Dr(o,function(){qe("Cannot construct "+G+" due to unbound types",[w])}),de([u,f,v],w?[w]:[],function(d){d=d[0];var y,T;w?(y=d.registeredClass,T=y.instancePrototype):T=rr.prototype;var k=pt(o,function(){if(Object.getPrototypeOf(this)!==j)throw new Ur("Use 'new' to construct "+G);if(R.constructor_body===void 0)throw new Ur(G+" has no accessible constructor");var e=R.constructor_body[arguments.length];if(e===void 0)throw new Ur("Tried to invoke ctor of "+G+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(R.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),j=Object.create(T,{constructor:{value:k}});k.prototype=j;var R=new Pr(G,k,j,i,y,O,A,H),I=new lr(G,R,!0,!1,!1),t=new lr(G+"*",R,!1,!1,!1),n=new lr(G+" const*",R,!1,!0,!1);return De[u]={pointerType:t,constPointerType:n},dr(o,k),[I,t,n]})}function Ye(u,f){for(var v=[],w=0;w<u;w++)v.push(ne[f+w*4>>2]);return v}function tr(u,f){if(!(u instanceof Function))throw new TypeError("new_ called with constructor type "+typeof u+" which is not a function");var v=pt(u.name||"unknownFunctionName",function(){});v.prototype=u.prototype;var w=new v,$=u.apply(w,f);return $ instanceof Object?$:w}function ot(u,f,v,w,$){var O=f.length;O<2&&te("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var F=f[1]!==null&&v!==null,A=!1,x=1;x<f.length;++x)if(f[x]!==null&&f[x].destructorFunction===void 0){A=!0;break}for(var H=f[0].name!=="void",G="",X="",x=0;x<O-2;++x)G+=(x!==0?", ":"")+"arg"+x,X+=(x!==0?", ":"")+"arg"+x+"Wired";var i="return function "+He(u)+"("+G+`) {
if (arguments.length !== `+(O-2)+`) {
throwBindingError('function `+u+" called with ' + arguments.length + ' arguments, expected "+(O-2)+` args!');
}
`;A&&(i+=`var destructors = [];
`);var o=A?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],y=[te,w,$,Qr,f[0],f[1]];F&&(i+="var thisWired = classParam.toWireType("+o+`, this);
`);for(var x=0;x<O-2;++x)i+="var arg"+x+"Wired = argType"+x+".toWireType("+o+", arg"+x+"); // "+f[x+2].name+`
`,d.push("argType"+x),y.push(f[x+2]);if(F&&(X="thisWired"+(X.length>0?", ":"")+X),i+=(H?"var rv = ":"")+"invoker(fn"+(X.length>0?", ":"")+X+`);
`,A)i+=`runDestructors(destructors);
`;else for(var x=F?1:2;x<f.length;++x){var T=x===1?"thisWired":"arg"+(x-2)+"Wired";f[x].destructorFunction!==null&&(i+=T+"_dtor("+T+"); // "+f[x].name+`
`,d.push(T+"_dtor"),y.push(f[x].destructorFunction))}H&&(i+=`var ret = retType.fromWireType(rv);
return ret;
`),i+=`}
`,d.push(i);var k=tr(Function,d).apply(null,y);return k}function st(u,f,v,w,$,O){Ue(f>0);var F=Ye(f,v);$=Pe(w,$),de([],[u],function(A){A=A[0];var x="constructor "+A.name;if(A.registeredClass.constructor_body===void 0&&(A.registeredClass.constructor_body=[]),A.registeredClass.constructor_body[f-1]!==void 0)throw new Ur("Cannot register multiple constructors with identical number of parameters ("+(f-1)+") for class '"+A.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return A.registeredClass.constructor_body[f-1]=()=>{qe("Cannot construct "+A.name+" due to unbound types",F)},de([],F,function(H){return H.splice(1,0,null),A.registeredClass.constructor_body[f-1]=ot(x,H,null,$,O),[]}),[]})}function cn(u,f,v,w,$,O,F,A){var x=Ye(v,w);f=Ae(f),O=Pe($,O),de([],[u],function(H){H=H[0];var G=H.name+"."+f;f.startsWith("@@")&&(f=Symbol[f.substring(2)]),A&&H.registeredClass.pureVirtualFunctions.push(f);function X(){qe("Cannot call "+G+" due to unbound types",x)}var i=H.registeredClass.instancePrototype,o=i[f];return o===void 0||o.overloadTable===void 0&&o.className!==H.name&&o.argCount===v-2?(X.argCount=v-2,X.className=H.name,i[f]=X):(gt(i,f,G),i[f].overloadTable[v-2]=X),de([],x,function(d){var y=ot(G,d,H,O,F);return i[f].overloadTable===void 0?(y.argCount=v-2,i[f]=y):i[f].overloadTable[v-2]=y,[]}),[]})}var ut=[],_e=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function mt(u){u>4&&--_e[u].refcount===0&&(_e[u]=void 0,ut.push(u))}function ft(){for(var u=0,f=5;f<_e.length;++f)_e[f]!==void 0&&++u;return u}function Le(){for(var u=5;u<_e.length;++u)if(_e[u]!==void 0)return _e[u];return null}function bt(){a.count_emval_handles=ft,a.get_first_emval=Le}var nr={toValue:u=>(u||te("Cannot use deleted val. handle = "+u),_e[u].value),toHandle:u=>{switch(u){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var f=ut.length?ut.pop():_e.length;return _e[f]={refcount:1,value:u},f}}}};function zt(u,f){f=Ae(f),fe(u,{name:f,fromWireType:function(v){var w=nr.toValue(v);return mt(v),w},toWireType:function(v,w){return nr.toHandle(w)},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:null})}function Wr(u){if(u===null)return"null";var f=typeof u;return f==="object"||f==="array"||f==="function"?u.toString():""+u}function mr(u,f){switch(f){case 2:return function(v){return this.fromWireType(pe[v>>2])};case 3:return function(v){return this.fromWireType(Ie[v>>3])};default:throw new TypeError("Unknown float type: "+u)}}function ln(u,f,v){var w=Be(v);f=Ae(f),fe(u,{name:f,fromWireType:function($){return $},toWireType:function($,O){return O},argPackAdvance:8,readValueFromPointer:mr(f,w),destructorFunction:null})}function Hr(u,f,v,w,$,O){var F=Ye(f,v);u=Ae(u),$=Pe(w,$),Dr(u,function(){qe("Cannot call "+u+" due to unbound types",F)},f-1),de([],F,function(A){var x=[A[0],null].concat(A.slice(1));return dr(u,ot(u,x,null,$,O),f-1),[]})}function ir(u,f,v){switch(f){case 0:return v?function($){return Je[$]}:function($){return ge[$]};case 1:return v?function($){return he[$>>1]}:function($){return be[$>>1]};case 2:return v?function($){return oe[$>>2]}:function($){return ne[$>>2]};default:throw new TypeError("Unknown integer type: "+u)}}function Gt(u,f,v,w,$){f=Ae(f);var O=Be(v),F=X=>X;if(w===0){var A=32-8*v;F=X=>X<<A>>>A}var x=f.includes("unsigned"),H=(X,i)=>{},G;x?G=function(X,i){return H(i,this.name),i>>>0}:G=function(X,i){return H(i,this.name),i},fe(u,{name:f,fromWireType:F,toWireType:G,argPackAdvance:8,readValueFromPointer:ir(f,O,w!==0),destructorFunction:null})}function dn(u,f,v){var w=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],$=w[f];function O(F){F=F>>2;var A=ne,x=A[F],H=A[F+1];return new $(ue,H,x)}v=Ae(v),fe(u,{name:v,fromWireType:O,argPackAdvance:8,readValueFromPointer:O},{ignoreDuplicateRegistrations:!0})}function pn(u,f){f=Ae(f);var v=f==="std::string";fe(u,{name:f,fromWireType:function(w){var $=ne[w>>2],O=w+4,F;if(v)for(var A=O,x=0;x<=$;++x){var H=O+x;if(x==$||ge[H]==0){var G=H-A,X=Ce(A,G);F===void 0?F=X:(F+="\0",F+=X),A=H+1}}else{for(var i=new Array($),x=0;x<$;++x)i[x]=String.fromCharCode(ge[O+x]);F=i.join("")}return br(w),F},toWireType:function(w,$){$ instanceof ArrayBuffer&&($=new Uint8Array($));var O,F=typeof $=="string";F||$ instanceof Uint8Array||$ instanceof Uint8ClampedArray||$ instanceof Int8Array||te("Cannot pass non-string to std::string"),v&&F?O=Cr($):O=$.length;var A=Rt(4+O+1),x=A+4;if(ne[A>>2]=O,v&&F)xr($,x,O+1);else if(F)for(var H=0;H<O;++H){var G=$.charCodeAt(H);G>255&&(br(x),te("String has UTF-16 code units that do not fit in 8 bits")),ge[x+H]=G}else for(var H=0;H<O;++H)ge[x+H]=$[H];return w!==null&&w.push(br,A),A},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:function(w){br(w)}})}var qt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function ct(u,f){for(var v=u,w=v>>1,$=w+f/2;!(w>=$)&&be[w];)++w;if(v=w<<1,v-u>32&&qt)return qt.decode(ge.subarray(u,v));for(var O="",F=0;!(F>=f/2);++F){var A=he[u+F*2>>1];if(A==0)break;O+=String.fromCharCode(A)}return O}function Jt(u,f,v){if(v===void 0&&(v=2147483647),v<2)return 0;v-=2;for(var w=f,$=v<u.length*2?v/2:u.length,O=0;O<$;++O){var F=u.charCodeAt(O);he[f>>1]=F,f+=2}return he[f>>1]=0,f-w}function wt(u){return u.length*2}function vn(u,f){for(var v=0,w="";!(v>=f/4);){var $=oe[u+v*4>>2];if($==0)break;if(++v,$>=65536){var O=$-65536;w+=String.fromCharCode(55296|O>>10,56320|O&1023)}else w+=String.fromCharCode($)}return w}function hn(u,f,v){if(v===void 0&&(v=2147483647),v<4)return 0;for(var w=f,$=w+v-4,O=0;O<u.length;++O){var F=u.charCodeAt(O);if(F>=55296&&F<=57343){var A=u.charCodeAt(++O);F=65536+((F&1023)<<10)|A&1023}if(oe[f>>2]=F,f+=4,f+4>$)break}return oe[f>>2]=0,f-w}function gn(u){for(var f=0,v=0;v<u.length;++v){var w=u.charCodeAt(v);w>=55296&&w<=57343&&++v,f+=4}return f}function Pt(u,f,v){v=Ae(v);var w,$,O,F,A;f===2?(w=ct,$=Jt,F=wt,O=()=>be,A=1):f===4&&(w=vn,$=hn,F=gn,O=()=>ne,A=2),fe(u,{name:v,fromWireType:function(x){for(var H=ne[x>>2],G=O(),X,i=x+4,o=0;o<=H;++o){var d=x+4+o*f;if(o==H||G[d>>A]==0){var y=d-i,T=w(i,y);X===void 0?X=T:(X+="\0",X+=T),i=d+f}}return br(x),X},toWireType:function(x,H){typeof H!="string"&&te("Cannot pass non-string to C++ string type "+v);var G=F(H),X=Rt(4+G+f);return ne[X>>2]=G>>A,$(H,X+4,G+f),x!==null&&x.push(br,X),X},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:function(x){br(x)}})}function yn(u,f,v,w,$,O){ur[u]={name:Ae(f),rawConstructor:Pe(v,w),rawDestructor:Pe($,O),fields:[]}}function _n(u,f,v,w,$,O,F,A,x,H){ur[u].fields.push({fieldName:Ae(f),getterReturnType:v,getter:Pe(w,$),getterContext:O,setterArgumentType:F,setter:Pe(A,x),setterContext:H})}function mn(u,f){f=Ae(f),fe(u,{isVoid:!0,name:f,argPackAdvance:0,fromWireType:function(){},toWireType:function(v,w){}})}var Tt={};function bn(u){var f=Tt[u];return f===void 0?Ae(u):f}function Xt(){return typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")()}function Yt(u){return u===0?nr.toHandle(Xt()):(u=bn(u),nr.toHandle(Xt()[u]))}function wn(u){u>4&&(_e[u].refcount+=1)}function Ct(u,f){var v=Se[u];return v===void 0&&te(f+" has unknown type "+at(u)),v}function Pn(u){for(var f="",v=0;v<u;++v)f+=(v!==0?", ":"")+"arg"+v;for(var w=()=>ne,$="return function emval_allocator_"+u+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,v=0;v<u;++v)$+="var argType"+v+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+v+`');
var arg`+v+" = argType"+v+`.readValueFromPointer(args);
args += argType`+v+`['argPackAdvance'];
argTypes += 4;
`;return $+="var obj = new constructor("+f+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",$)(Ct,a,nr.toHandle,w)}var Kt={};function Qt(u,f,v,w){u=nr.toValue(u);var $=Kt[f];return $||($=Pn(f),Kt[f]=$),$(u,v,w)}function Zt(u,f){u=Ct(u,"_emval_take_value");var v=u.readValueFromPointer(f);return nr.toHandle(v)}function en(){vr("")}function Tn(u,f,v){ge.copyWithin(u,f,f+v)}function Cn(){return 2147483648}function $n(u){try{return Te.grow(u-ue.byteLength+65535>>>16),le(Te.buffer),1}catch{}}function $t(u){var f=ge.length;u=u>>>0;var v=Cn();if(u>v)return!1;let w=(x,H)=>x+(H-x%H)%H;for(var $=1;$<=4;$*=2){var O=f*(1+.2/$);O=Math.min(O,u+100663296);var F=Math.min(v,w(Math.max(u,O),65536)),A=$n(F);if(A)return!0}return!1}function An(u){var f=a["_"+u];return f}function qr(u,f){Je.set(u,f)}function Rn(u,f,v,w,$){var O={string:d=>{var y=0;if(d!=null&&d!==0){var T=(d.length<<2)+1;y=Et(T),xr(d,y,T)}return y},array:d=>{var y=Et(d.length);return qr(d,y),y}};function F(d){return f==="string"?Ce(d):f==="boolean"?!!d:d}var A=An(u),x=[],H=0;if(w)for(var G=0;G<w.length;G++){var X=O[v[G]];X?(H===0&&(H=rn()),x[G]=X(w[G])):x[G]=w[G]}var i=A.apply(null,x);function o(d){return H!==0&&tn(H),F(d)}return i=o(i),i}Zr=a.InternalError=vt(Error,"InternalError"),xe(),Ur=a.BindingError=vt(Error,"BindingError"),Gr(),zr(),Lt(),_r=a.UnboundTypeError=vt(Error,"UnboundTypeError"),bt();var At={h:jt,q:wr,r:ee,w:yr,p:Nt,o:st,c:cn,v:zt,k:ln,e:Hr,b:Gt,a:dn,j:pn,g:Pt,u:yn,d:_n,x:mn,i:mt,m:Yt,l:wn,y:Qt,n:Zt,f:en,t:Tn,s:$t};We(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.A).apply(null,arguments)};var Rt=a._malloc=function(){return(Rt=a._malloc=a.asm.B).apply(null,arguments)},Mr=a.___getTypeName=function(){return(Mr=a.___getTypeName=a.asm.D).apply(null,arguments)};a.__embind_initialize_bindings=function(){return(a.__embind_initialize_bindings=a.asm.E).apply(null,arguments)};var br=a._free=function(){return(br=a._free=a.asm.F).apply(null,arguments)},rn=a.stackSave=function(){return(rn=a.stackSave=a.asm.G).apply(null,arguments)},tn=a.stackRestore=function(){return(tn=a.stackRestore=a.asm.H).apply(null,arguments)},Et=a.stackAlloc=function(){return(Et=a.stackAlloc=a.asm.I).apply(null,arguments)},nn=a.___cxa_is_pointer_type=function(){return(nn=a.___cxa_is_pointer_type=a.asm.J).apply(null,arguments)};a.ccall=Rn;var lt;Ke=function u(){lt||St(),lt||(Ke=u)};function St(u){if(sr>0||($r(),sr>0))return;function f(){lt||(lt=!0,a.calledRun=!0,!Re&&(Ft(),C(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),kt()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),f()},1)):f()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return St(),E.ready})})();l.exports=m})(Jn)),Jn.exports}var ta=ra(),na=zn(ta);const ia=new URL(""+new URL("charlswasm_decode-484ovEoR.wasm",import.meta.url).href,import.meta.url),Dn={codec:void 0,decoder:void 0,decodeConfig:{}};function aa(l){return typeof l=="number"?Dn.codec.getExceptionMessage(l):l}function oa(l){if(Dn.decodeConfig=l,Dn.codec)return Promise.resolve();const _=na({locateFile:m=>m.endsWith(".wasm")?ia.toString():m});return new Promise((m,S)=>{_.then(E=>{Dn.codec=E,Dn.decoder=new E.JpegLSDecoder,m()},S)})}async function si(l,_){try{await oa();const m=Dn.decoder;m.getEncodedBuffer(l.length).set(l),m.decode();const E=m.getFrameInfo(),a=m.getInterleaveMode(),C=m.getNearLossless(),U=m.getDecodedBuffer(),M={columns:E.width,rows:E.height,bitsPerPixel:E.bitsPerSample,signed:_.signed,bytesPerPixel:_.bytesPerPixel,componentsPerPixel:E.componentCount},q=sa(E,U,_.signed),V={nearLossless:C,interleaveMode:a,frameInfo:E};return{..._,pixelData:q,imageInfo:M,encodeOptions:V,...V,...M}}catch(m){throw aa(m)}}function sa(l,_,m){return l.bitsPerSample>8?m?new Int16Array(_.buffer,_.byteOffset,_.byteLength/2):new Uint16Array(_.buffer,_.byteOffset,_.byteLength/2):m?new Int8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}var Xn={exports:{}},ui;function ua(){return ui||(ui=1,(function(l,_){var m=(()=>{var S=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(S=S||__filename),(function(E={}){var a,C=E,U,M,q=new Promise((i,o)=>{U=i,M=o}),V=typeof window=="object",J=typeof WorkerGlobalScope<"u",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",re=Object.assign({},C),z="./this.program",Y="";function se(i){return C.locateFile?C.locateFile(i,Y):Y+i}var ke,K;if(L){var me=Fn;Y=__dirname+"/",K=i=>{i=sr(i)?new URL(i):i;var o=me.readFileSync(i);return o},ke=async(i,o=!0)=>{i=sr(i)?new URL(i):i;var d=me.readFileSync(i,o?void 0:"utf8");return d},!C.thisProgram&&process.argv.length>1&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(V||J)&&(J?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),S&&(Y=S),Y.startsWith("blob:")?Y="":Y=Y.substr(0,Y.replace(/[?#].*/,"").lastIndexOf("/")+1),J&&(K=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),ke=async i=>{if(sr(i))return new Promise((d,y)=>{var T=new XMLHttpRequest;T.open("GET",i,!0),T.responseType="arraybuffer",T.onload=()=>{if(T.status==200||T.status==0&&T.response){d(T.response);return}y(T.status)},T.onerror=y,T.send(null)});var o=await fetch(i,{credentials:"same-origin"});if(o.ok)return o.arrayBuffer();throw new Error(o.status+" : "+o.url)});var ve=C.print||console.log.bind(console),Te=C.printErr||console.error.bind(console);Object.assign(C,re),re=null,C.arguments&&C.arguments,C.thisProgram&&(z=C.thisProgram);var Re=C.wasmBinary,Ue,pr=!1,je,Ce,ar,xr,Cr,ue,Je,ge;function he(){var i=Ue.buffer;C.HEAP8=je=new Int8Array(i),C.HEAP16=ar=new Int16Array(i),C.HEAPU8=Ce=new Uint8Array(i),C.HEAPU16=xr=new Uint16Array(i),C.HEAP32=Cr=new Int32Array(i),C.HEAPU32=ue=new Uint32Array(i),C.HEAPF32=Je=new Float32Array(i),C.HEAPF64=ge=new Float64Array(i)}var be=[],oe=[],ne=[];function pe(){if(C.preRun)for(typeof C.preRun=="function"&&(C.preRun=[C.preRun]);C.preRun.length;)Jr(C.preRun.shift());$e(be)}function Ie(){$e(oe)}function le(){if(C.postRun)for(typeof C.postRun=="function"&&(C.postRun=[C.postRun]);C.postRun.length;)Yr(C.postRun.shift());$e(ne)}function Jr(i){be.unshift(i)}function Xr(i){oe.unshift(i)}function Yr(i){ne.unshift(i)}var or=0,$r=null;function Ft(i){or++,C.monitorRunDependencies?.(or)}function kt(i){if(or--,C.monitorRunDependencies?.(or),or==0&&$r){var o=$r;$r=null,o()}}function Dt(i){C.onAbort?.(i),i="Aborted("+i+")",Te(i),pr=!0,i+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(i);throw M(o),o}var an="data:application/octet-stream;base64,",xt=i=>i.startsWith(an),sr=i=>i.startsWith("file://");function Ke(){var i="openjpegwasm_decode.wasm";return xt(i)?i:se(i)}var Ar;function Rr(i){if(i==Ar&&Re)return new Uint8Array(Re);if(K)return K(i);throw"both async and sync fetching of the wasm failed"}async function vr(i){if(!Re)try{var o=await ke(i);return new Uint8Array(o)}catch{}return Rr(i)}async function Or(i,o){try{var d=await vr(i),y=await WebAssembly.instantiate(d,o);return y}catch(T){Te(`failed to asynchronously prepare wasm: ${T}`),Dt(T)}}async function Ot(i,o,d){if(!i&&typeof WebAssembly.instantiateStreaming=="function"&&!xt(o)&&!sr(o)&&!L&&typeof fetch=="function")try{var y=fetch(o,{credentials:"same-origin"}),T=await WebAssembly.instantiateStreaming(y,d);return T}catch(k){Te(`wasm streaming compile failed: ${k}`),Te("falling back to ArrayBuffer instantiation")}return Or(o,d)}function hr(){return{a:v}}async function Ee(){function i(T,k){return w=T.exports,Ue=w.F,he(),gt=w.I,Xr(w.G),kt(),w}Ft();function o(T){i(T.instance)}var d=hr();if(C.instantiateWasm)try{return C.instantiateWasm(d,i)}catch(T){Te(`Module.instantiateWasm callback failed with error: ${T}`),M(T)}Ar??=Ke();try{var y=await Ot(Re,Ar,d);return o(y),y}catch(T){M(T);return}}var $e=i=>{for(;i.length>0;)i.shift()(C)};C.noExitRuntime;var Vr=i=>A(i),We=()=>H();class Ut{constructor(o){this.excPtr=o,this.ptr=o-24}set_type(o){ue[this.ptr+4>>2]=o}get_type(){return ue[this.ptr+4>>2]}set_destructor(o){ue[this.ptr+8>>2]=o}get_destructor(){return ue[this.ptr+8>>2]}set_caught(o){o=o?1:0,je[this.ptr+12]=o}get_caught(){return je[this.ptr+12]!=0}set_rethrown(o){o=o?1:0,je[this.ptr+13]=o}get_rethrown(){return je[this.ptr+13]!=0}init(o,d){this.set_adjusted_ptr(0),this.set_type(o),this.set_destructor(d)}set_adjusted_ptr(o){ue[this.ptr+16>>2]=o}get_adjusted_ptr(){return ue[this.ptr+16>>2]}}var Kr=0,dt=(i,o,d)=>{var y=new Ut(i);throw y.init(o,d),Kr=i,Kr},jt=()=>Dt(""),ur={},Qr=i=>{for(;i.length;){var o=i.pop(),d=i.pop();d(o)}};function gr(i){return this.fromWireType(ue[i>>2])}var we={},Se={},ye={},Er,fr=i=>{throw new Er(i)},He=(i,o,d)=>{i.forEach(R=>ye[R]=o);function y(R){var I=d(R);I.length!==i.length&&fr("Mismatched type converter count");for(var t=0;t<i.length;++t)xe(i[t],I[t])}var T=new Array(o.length),k=[],j=0;o.forEach((R,I)=>{Se.hasOwnProperty(R)?T[I]=Se[R]:(k.push(R),we.hasOwnProperty(R)||(we[R]=[]),we[R].push(()=>{T[I]=Se[R],++j,j===k.length&&y(T)}))}),k.length===0&&y(T)},pt=i=>{var o=ur[i];delete ur[i];var d=o.rawConstructor,y=o.rawDestructor,T=o.fields,k=T.map(j=>j.getterReturnType).concat(T.map(j=>j.setterArgumentType));He([i],k,j=>{var R={};return T.forEach((I,t)=>{var n=I.fieldName,e=j[t],r=I.getter,s=I.getterContext,c=j[t+T.length],p=I.setter,h=I.setterContext;R[n]={read:g=>e.fromWireType(r(s,g)),write:(g,b)=>{var P=[];p(h,g,c.toWireType(P,b)),Qr(P)}}}),[{name:o.name,fromWireType:I=>{var t={};for(var n in R)t[n]=R[n].read(I);return y(I),t},toWireType:(I,t)=>{for(var n in R)if(!(n in t))throw new TypeError(`Missing field: "${n}"`);var e=d();for(n in R)R[n].write(e,t[n]);return I!==null&&I.push(y,e),e},argPackAdvance:Ne,readValueFromPointer:gr,destructorFunction:y}]})},vt=(i,o,d,y,T)=>{},Zr=()=>{for(var i=new Array(256),o=0;o<256;++o)i[o]=String.fromCharCode(o);Sr=i},Sr,de=i=>{for(var o="",d=i;Ce[d];)o+=Sr[Ce[d++]];return o},wr,ee=i=>{throw new wr(i)};function Be(i,o,d={}){var y=o.name;if(i||ee(`type "${y}" must have a positive integer typeid pointer`),Se.hasOwnProperty(i)){if(d.ignoreDuplicateRegistrations)return;ee(`Cannot register type '${y}' twice`)}if(Se[i]=o,delete ye[i],we.hasOwnProperty(i)){var T=we[i];delete we[i],T.forEach(k=>k())}}function xe(i,o,d={}){return Be(i,o,d)}var Ne=8,Ae=(i,o,d,y)=>{o=de(o),xe(i,{name:o,fromWireType:function(T){return!!T},toWireType:function(T,k){return k?d:y},argPackAdvance:Ne,readValueFromPointer:function(T){return this.fromWireType(Ce[T])},destructorFunction:null})},Ur=i=>({count:i.count,deleteScheduled:i.deleteScheduled,preservePointerOnDelete:i.preservePointerOnDelete,ptr:i.ptr,ptrType:i.ptrType,smartPtr:i.smartPtr,smartPtrType:i.smartPtrType}),te=i=>{function o(d){return d.$$.ptrType.registeredClass.name}ee(o(i)+" instance already deleted")},fe=!1,yr=i=>{},ie=i=>{i.smartPtr?i.smartPtrType.rawDestructor(i.smartPtr):i.ptrType.registeredClass.rawDestructor(i.ptr)},ze=i=>{i.count.value-=1;var o=i.count.value===0;o&&ie(i)},cr=(i,o,d)=>{if(o===d)return i;if(d.baseClass===void 0)return null;var y=cr(i,o,d.baseClass);return y===null?null:d.downcast(y)},et={},It={},Br=(i,o)=>{for(o===void 0&&ee("ptr should not be undefined");i.baseClass;)o=i.upcast(o),i=i.baseClass;return o},rt=(i,o)=>(o=Br(i,o),It[o]),Fr=(i,o)=>{(!o.ptrType||!o.ptr)&&fr("makeClassHandle requires ptr and ptrType");var d=!!o.smartPtrType,y=!!o.smartPtr;return d!==y&&fr("Both smartPtrType and smartPtr must be specified"),o.count={value:1},Qe(Object.create(i,{$$:{value:o,writable:!0}}))};function De(i){var o=this.getPointee(i);if(!o)return this.destructor(i),null;var d=rt(this.registeredClass,o);if(d!==void 0){if(d.$$.count.value===0)return d.$$.ptr=o,d.$$.smartPtr=i,d.clone();var y=d.clone();return this.destructor(i),y}function T(){return this.isSmartPointer?Fr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:o,smartPtrType:this,smartPtr:i}):Fr(this.registeredClass.instancePrototype,{ptrType:this,ptr:i})}var k=this.registeredClass.getActualType(o),j=et[k];if(!j)return T.call(this);var R;this.isConst?R=j.constPointerType:R=j.pointerType;var I=cr(o,this.registeredClass,R.registeredClass);return I===null?T.call(this):this.isSmartPointer?Fr(R.registeredClass.instancePrototype,{ptrType:R,ptr:I,smartPtrType:this,smartPtr:i}):Fr(R.registeredClass.instancePrototype,{ptrType:R,ptr:I})}var Qe=i=>typeof FinalizationRegistry>"u"?(Qe=o=>o,i):(fe=new FinalizationRegistry(o=>{ze(o.$$)}),Qe=o=>{var d=o.$$,y=!!d.smartPtr;if(y){var T={$$:d};fe.register(o,T,o)}return o},yr=o=>fe.unregister(o),Qe(i)),ae=()=>{Object.assign(Fe.prototype,{isAliasOf(i){if(!(this instanceof Fe)||!(i instanceof Fe))return!1;var o=this.$$.ptrType.registeredClass,d=this.$$.ptr;i.$$=i.$$;for(var y=i.$$.ptrType.registeredClass,T=i.$$.ptr;o.baseClass;)d=o.upcast(d),o=o.baseClass;for(;y.baseClass;)T=y.upcast(T),y=y.baseClass;return o===y&&d===T},clone(){if(this.$$.ptr||te(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var i=Qe(Object.create(Object.getPrototypeOf(this),{$$:{value:Ur(this.$$)}}));return i.$$.count.value+=1,i.$$.deleteScheduled=!1,i},delete(){this.$$.ptr||te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ee("Object already scheduled for deletion"),yr(this),ze(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ee("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Fe(){}var kr=(i,o)=>Object.defineProperty(o,"name",{value:i}),jr=(i,o,d)=>{if(i[o].overloadTable===void 0){var y=i[o];i[o]=function(...T){return i[o].overloadTable.hasOwnProperty(T.length)||ee(`Function '${d}' called with an invalid number of arguments (${T.length}) - expects one of (${i[o].overloadTable})!`),i[o].overloadTable[T.length].apply(this,T)},i[o].overloadTable=[],i[o].overloadTable[y.argCount]=y}},Nr=(i,o,d)=>{C.hasOwnProperty(i)?(ee(`Cannot register public name '${i}' twice`),jr(C,i,i),C[i].overloadTable.hasOwnProperty(d)&&ee(`Cannot register multiple overloads of a function with the same number of arguments (${d})!`),C[i].overloadTable[d]=o):(C[i]=o,C[i].argCount=d)},zr=48,Ze=57,Wt=i=>{i=i.replace(/[^a-zA-Z0-9_]/g,"$");var o=i.charCodeAt(0);return o>=zr&&o<=Ze?`_${i}`:i};function on(i,o,d,y,T,k,j,R){this.name=i,this.constructor=o,this.instancePrototype=d,this.rawDestructor=y,this.baseClass=T,this.getActualType=k,this.upcast=j,this.downcast=R,this.pureVirtualFunctions=[]}var er=(i,o,d)=>{for(;o!==d;)o.upcast||ee(`Expected null or instance of ${d.name}, got an instance of ${o.name}`),i=o.upcast(i),o=o.baseClass;return i};function Ht(i,o){if(o===null)return this.isReference&&ee(`null is not a valid ${this.name}`),0;o.$$||ee(`Cannot pass "${st(o)}" as a ${this.name}`),o.$$.ptr||ee(`Cannot pass deleted object as a pointer of type ${this.name}`);var d=o.$$.ptrType.registeredClass,y=er(o.$$.ptr,d,this.registeredClass);return y}function Ir(i,o){var d;if(o===null)return this.isReference&&ee(`null is not a valid ${this.name}`),this.isSmartPointer?(d=this.rawConstructor(),i!==null&&i.push(this.rawDestructor,d),d):0;(!o||!o.$$)&&ee(`Cannot pass "${st(o)}" as a ${this.name}`),o.$$.ptr||ee(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&o.$$.ptrType.isConst&&ee(`Cannot convert argument of type ${o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name} to parameter type ${this.name}`);var y=o.$$.ptrType.registeredClass;if(d=er(o.$$.ptr,y,this.registeredClass),this.isSmartPointer)switch(o.$$.smartPtr===void 0&&ee("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:o.$$.smartPtrType===this?d=o.$$.smartPtr:ee(`Cannot convert argument of type ${o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:d=o.$$.smartPtr;break;case 2:if(o.$$.smartPtrType===this)d=o.$$.smartPtr;else{var T=o.clone();d=this.rawShare(d,Ye.toHandle(()=>T.delete())),i!==null&&i.push(this.rawDestructor,d)}break;default:ee("Unsupporting sharing policy")}return d}function tt(i,o){if(o===null)return this.isReference&&ee(`null is not a valid ${this.name}`),0;o.$$||ee(`Cannot pass "${st(o)}" as a ${this.name}`),o.$$.ptr||ee(`Cannot pass deleted object as a pointer of type ${this.name}`),o.$$.ptrType.isConst&&ee(`Cannot convert argument of type ${o.$$.ptrType.name} to parameter type ${this.name}`);var d=o.$$.ptrType.registeredClass,y=er(o.$$.ptr,d,this.registeredClass);return y}var sn=()=>{Object.assign(Xe.prototype,{getPointee(i){return this.rawGetPointee&&(i=this.rawGetPointee(i)),i},destructor(i){this.rawDestructor?.(i)},argPackAdvance:Ne,readValueFromPointer:gr,fromWireType:De})};function Xe(i,o,d,y,T,k,j,R,I,t,n){this.name=i,this.registeredClass=o,this.isReference=d,this.isConst=y,this.isSmartPointer=T,this.pointeeType=k,this.sharingPolicy=j,this.rawGetPointee=R,this.rawConstructor=I,this.rawShare=t,this.rawDestructor=n,!T&&o.baseClass===void 0?y?(this.toWireType=Ht,this.destructorFunction=null):(this.toWireType=tt,this.destructorFunction=null):this.toWireType=Ir}var ht=(i,o,d)=>{C.hasOwnProperty(i)||fr("Replacing nonexistent public symbol"),C[i].overloadTable!==void 0&&d!==void 0||(C[i]=o,C[i].argCount=d)},Gr=(i,o,d)=>{i=i.replace(/p/g,"i");var y=C["dynCall_"+i];return y(o,...d)},rr=[],gt,Dr=i=>{var o=rr[i];return o||(i>=rr.length&&(rr.length=i+1),rr[i]=o=gt.get(i)),o},Pr=(i,o,d=[])=>{if(i.includes("j"))return Gr(i,o,d);var y=Dr(o)(...d);return y},nt=(i,o)=>(...d)=>Pr(i,o,d),Ge=(i,o)=>{i=de(i);function d(){return i.includes("j")?nt(i,o):Dr(o)}var y=d();return typeof y!="function"&&ee(`unknown function pointer with signature ${i}: ${o}`),y},un=(i,o)=>{var d=kr(o,function(y){this.name=o,this.message=y;var T=new Error(y).stack;T!==void 0&&(this.stack=this.toString()+`
`+T.replace(/^Error(:[^\n]*)?\n/,""))});return d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},d},Tr,Mt=i=>{var o=$(i),d=de(o);return F(o),d},yt=(i,o)=>{var d=[],y={};function T(k){if(!y[k]&&!Se[k]){if(ye[k]){ye[k].forEach(T);return}d.push(k),y[k]=!0}}throw o.forEach(T),new Tr(`${i}: `+d.map(Mt).join([", "]))},fn=(i,o,d,y,T,k,j,R,I,t,n,e,r)=>{n=de(n),k=Ge(T,k),R&&=Ge(j,R),t&&=Ge(I,t),r=Ge(e,r);var s=Wt(n);Nr(s,function(){yt(`Cannot construct ${n} due to unbound types`,[y])}),He([i,o,d],y?[y]:[],c=>{c=c[0];var p,h;y?(p=c.registeredClass,h=p.instancePrototype):h=Fe.prototype;var g=kr(n,function(...B){if(Object.getPrototypeOf(this)!==b)throw new wr("Use 'new' to construct "+n);if(P.constructor_body===void 0)throw new wr(n+" has no accessible constructor");var Z=P.constructor_body[B.length];if(Z===void 0)throw new wr(`Tried to invoke ctor of ${n} with invalid number of parameters (${B.length}) - expected (${Object.keys(P.constructor_body).toString()}) parameters instead!`);return Z.apply(this,B)}),b=Object.create(h,{constructor:{value:g}});g.prototype=b;var P=new on(n,g,b,r,p,k,R,t);P.baseClass&&(P.baseClass.__derivedClasses??=[],P.baseClass.__derivedClasses.push(P));var D=new Xe(n,P,!0,!1,!1),W=new Xe(n+"*",P,!1,!1,!1),N=new Xe(n+" const*",P,!1,!0,!1);return et[i]={pointerType:W,constPointerType:N},ht(s,g),[D,W,N]})},Lt=(i,o)=>{for(var d=[],y=0;y<i;y++)d.push(ue[o+y*4>>2]);return d};function lr(i){for(var o=1;o<i.length;++o)if(i[o]!==null&&i[o].destructorFunction===void 0)return!0;return!1}function dr(i,o){if(!(i instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof i} which is not a function`);var d=kr(i.name||"unknownFunctionName",function(){});d.prototype=i.prototype;var y=new d,T=i.apply(y,o);return T instanceof Object?T:y}function Vt(i,o,d,y){var T=lr(i),k=i.length-2,j=[],R=["fn"];o&&R.push("thisWired");for(var I=0;I<k;++I)j.push(`arg${I}`),R.push(`arg${I}Wired`);j=j.join(","),R=R.join(",");var t=`return function (${j}) {
`;T&&(t+=`var destructors = [];
`);var n=T?"destructors":"null",e=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];o&&(t+=`var thisWired = classParam['toWireType'](${n}, this);
`);for(var I=0;I<k;++I)t+=`var arg${I}Wired = argType${I}['toWireType'](${n}, arg${I});
`,e.push(`argType${I}`);if(t+=(d||y?"var rv = ":"")+`invoker(${R});
`,T)t+=`runDestructors(destructors);
`;else for(var I=o?1:2;I<i.length;++I){var r=I===1?"thisWired":"arg"+(I-2)+"Wired";i[I].destructorFunction!==null&&(t+=`${r}_dtor(${r});
`,e.push(`${r}_dtor`))}return d&&(t+=`var ret = retType['fromWireType'](rv);
return ret;
`),t+=`}
`,[e,t]}function Me(i,o,d,y,T,k){var j=o.length;j<2&&ee("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var R=o[1]!==null&&d!==null,I=lr(o),t=o[0].name!=="void",n=[i,ee,y,T,Qr,o[0],o[1]],e=0;e<j-2;++e)n.push(o[e+2]);if(!I)for(var e=R?1:2;e<o.length;++e)o[e].destructorFunction!==null&&n.push(o[e].destructorFunction);let[r,s]=Vt(o,R,t,k);r.push(s);var c=dr(Function,r)(...n);return kr(i,c)}var Bt=(i,o,d,y,T,k)=>{var j=Lt(o,d);T=Ge(y,T),He([],[i],R=>{R=R[0];var I=`constructor ${R.name}`;if(R.registeredClass.constructor_body===void 0&&(R.registeredClass.constructor_body=[]),R.registeredClass.constructor_body[o-1]!==void 0)throw new wr(`Cannot register multiple constructors with identical number of parameters (${o-1}) for class '${R.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return R.registeredClass.constructor_body[o-1]=()=>{yt(`Cannot construct ${R.name} due to unbound types`,j)},He([],j,t=>(t.splice(1,0,null),R.registeredClass.constructor_body[o-1]=Me(I,t,null,T,k),[])),[]})},_t=i=>{i=i.trim();const o=i.indexOf("(");return o!==-1?i.substr(0,o):i},it=(i,o,d,y,T,k,j,R,I,t)=>{var n=Lt(d,y);o=de(o),o=_t(o),k=Ge(T,k),He([],[i],e=>{e=e[0];var r=`${e.name}.${o}`;o.startsWith("@@")&&(o=Symbol[o.substring(2)]),R&&e.registeredClass.pureVirtualFunctions.push(o);function s(){yt(`Cannot call ${r} due to unbound types`,n)}var c=e.registeredClass.instancePrototype,p=c[o];return p===void 0||p.overloadTable===void 0&&p.className!==e.name&&p.argCount===d-2?(s.argCount=d-2,s.className=e.name,c[o]=s):(jr(c,o,r),c[o].overloadTable[d-2]=s),He([],n,h=>{var g=Me(r,h,e,k,j,I);return c[o].overloadTable===void 0?(g.argCount=d-2,c[o]=g):c[o].overloadTable[d-2]=g,[]}),[]})},Pe=[],_r=[],at=i=>{i>9&&--_r[i+1]===0&&(_r[i]=void 0,Pe.push(i))},qe=()=>_r.length/2-5-Pe.length,Nt=()=>{_r.push(0,1,void 0,1,null,1,!0,1,!1,1),C.count_emval_handles=qe},Ye={toValue:i=>(i||ee("Cannot use deleted val. handle = "+i),_r[i]),toHandle:i=>{switch(i){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const o=Pe.pop()||_r.length;return _r[o]=i,_r[o+1]=1,o}}}},tr={name:"emscripten::val",fromWireType:i=>{var o=Ye.toValue(i);return at(i),o},toWireType:(i,o)=>Ye.toHandle(o),argPackAdvance:Ne,readValueFromPointer:gr,destructorFunction:null},ot=i=>xe(i,tr),st=i=>{if(i===null)return"null";var o=typeof i;return o==="object"||o==="array"||o==="function"?i.toString():""+i},cn=(i,o)=>{switch(o){case 4:return function(d){return this.fromWireType(Je[d>>2])};case 8:return function(d){return this.fromWireType(ge[d>>3])};default:throw new TypeError(`invalid float width (${o}): ${i}`)}},ut=(i,o,d)=>{o=de(o),xe(i,{name:o,fromWireType:y=>y,toWireType:(y,T)=>T,argPackAdvance:Ne,readValueFromPointer:cn(o,d),destructorFunction:null})},_e=(i,o,d)=>{switch(o){case 1:return d?y=>je[y]:y=>Ce[y];case 2:return d?y=>ar[y>>1]:y=>xr[y>>1];case 4:return d?y=>Cr[y>>2]:y=>ue[y>>2];default:throw new TypeError(`invalid integer width (${o}): ${i}`)}},mt=(i,o,d,y,T)=>{o=de(o);var k=n=>n;if(y===0){var j=32-8*d;k=n=>n<<j>>>j}var R=o.includes("unsigned"),I=(n,e)=>{},t;R?t=function(n,e){return I(e,this.name),e>>>0}:t=function(n,e){return I(e,this.name),e},xe(i,{name:o,fromWireType:k,toWireType:t,argPackAdvance:Ne,readValueFromPointer:_e(o,d,y!==0),destructorFunction:null})},ft=(i,o,d)=>{var y=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],T=y[o];function k(j){var R=ue[j>>2],I=ue[j+4>>2];return new T(je.buffer,I,R)}d=de(d),xe(i,{name:d,fromWireType:k,argPackAdvance:Ne,readValueFromPointer:k},{ignoreDuplicateRegistrations:!0})},Le=(i,o,d,y)=>{if(!(y>0))return 0;for(var T=d,k=d+y-1,j=0;j<i.length;++j){var R=i.charCodeAt(j);if(R>=55296&&R<=57343){var I=i.charCodeAt(++j);R=65536+((R&1023)<<10)|I&1023}if(R<=127){if(d>=k)break;o[d++]=R}else if(R<=2047){if(d+1>=k)break;o[d++]=192|R>>6,o[d++]=128|R&63}else if(R<=65535){if(d+2>=k)break;o[d++]=224|R>>12,o[d++]=128|R>>6&63,o[d++]=128|R&63}else{if(d+3>=k)break;o[d++]=240|R>>18,o[d++]=128|R>>12&63,o[d++]=128|R>>6&63,o[d++]=128|R&63}}return o[d]=0,d-T},bt=(i,o,d)=>Le(i,Ce,o,d),nr=i=>{for(var o=0,d=0;d<i.length;++d){var y=i.charCodeAt(d);y<=127?o++:y<=2047?o+=2:y>=55296&&y<=57343?(o+=4,++d):o+=3}return o},zt=typeof TextDecoder<"u"?new TextDecoder:void 0,Wr=(i,o=0,d=NaN)=>{for(var y=o+d,T=o;i[T]&&!(T>=y);)++T;if(T-o>16&&i.buffer&&zt)return zt.decode(i.subarray(o,T));for(var k="";o<T;){var j=i[o++];if(!(j&128)){k+=String.fromCharCode(j);continue}var R=i[o++]&63;if((j&224)==192){k+=String.fromCharCode((j&31)<<6|R);continue}var I=i[o++]&63;if((j&240)==224?j=(j&15)<<12|R<<6|I:j=(j&7)<<18|R<<12|I<<6|i[o++]&63,j<65536)k+=String.fromCharCode(j);else{var t=j-65536;k+=String.fromCharCode(55296|t>>10,56320|t&1023)}}return k},mr=(i,o)=>i?Wr(Ce,i,o):"",ln=(i,o)=>{o=de(o),xe(i,{name:o,fromWireType(d){for(var y=ue[d>>2],T=d+4,k,j,R=T,j=0;j<=y;++j){var I=T+j;if(j==y||Ce[I]==0){var t=I-R,n=mr(R,t);k===void 0?k=n:(k+="\0",k+=n),R=I+1}}return F(d),k},toWireType(d,y){y instanceof ArrayBuffer&&(y=new Uint8Array(y));var T,k=typeof y=="string";k||y instanceof Uint8Array||y instanceof Uint8ClampedArray||y instanceof Int8Array||ee("Cannot pass non-string to std::string"),k?T=nr(y):T=y.length;var j=O(4+T+1),R=j+4;if(ue[j>>2]=T,k)bt(y,R,T+1);else if(k)for(var I=0;I<T;++I){var t=y.charCodeAt(I);t>255&&(F(R),ee("String has UTF-16 code units that do not fit in 8 bits")),Ce[R+I]=t}else for(var I=0;I<T;++I)Ce[R+I]=y[I];return d!==null&&d.push(F,j),j},argPackAdvance:Ne,readValueFromPointer:gr,destructorFunction(d){F(d)}})},Hr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ir=(i,o)=>{for(var d=i,y=d>>1,T=y+o/2;!(y>=T)&&xr[y];)++y;if(d=y<<1,d-i>32&&Hr)return Hr.decode(Ce.subarray(i,d));for(var k="",j=0;!(j>=o/2);++j){var R=ar[i+j*2>>1];if(R==0)break;k+=String.fromCharCode(R)}return k},Gt=(i,o,d)=>{if(d??=2147483647,d<2)return 0;d-=2;for(var y=o,T=d<i.length*2?d/2:i.length,k=0;k<T;++k){var j=i.charCodeAt(k);ar[o>>1]=j,o+=2}return ar[o>>1]=0,o-y},dn=i=>i.length*2,pn=(i,o)=>{for(var d=0,y="";!(d>=o/4);){var T=Cr[i+d*4>>2];if(T==0)break;if(++d,T>=65536){var k=T-65536;y+=String.fromCharCode(55296|k>>10,56320|k&1023)}else y+=String.fromCharCode(T)}return y},qt=(i,o,d)=>{if(d??=2147483647,d<4)return 0;for(var y=o,T=y+d-4,k=0;k<i.length;++k){var j=i.charCodeAt(k);if(j>=55296&&j<=57343){var R=i.charCodeAt(++k);j=65536+((j&1023)<<10)|R&1023}if(Cr[o>>2]=j,o+=4,o+4>T)break}return Cr[o>>2]=0,o-y},ct=i=>{for(var o=0,d=0;d<i.length;++d){var y=i.charCodeAt(d);y>=55296&&y<=57343&&++d,o+=4}return o},Jt=(i,o,d)=>{d=de(d);var y,T,k,j;o===2?(y=ir,T=Gt,j=dn,k=R=>xr[R>>1]):o===4&&(y=pn,T=qt,j=ct,k=R=>ue[R>>2]),xe(i,{name:d,fromWireType:R=>{for(var I=ue[R>>2],t,n=R+4,e=0;e<=I;++e){var r=R+4+e*o;if(e==I||k(r)==0){var s=r-n,c=y(n,s);t===void 0?t=c:(t+="\0",t+=c),n=r+o}}return F(R),t},toWireType:(R,I)=>{typeof I!="string"&&ee(`Cannot pass non-string to C++ string type ${d}`);var t=j(I),n=O(4+t+o);return ue[n>>2]=t/o,T(I,n+4,t+o),R!==null&&R.push(F,n),n},argPackAdvance:Ne,readValueFromPointer:gr,destructorFunction(R){F(R)}})},wt=(i,o,d,y,T,k)=>{ur[i]={name:de(o),rawConstructor:Ge(d,y),rawDestructor:Ge(T,k),fields:[]}},vn=(i,o,d,y,T,k,j,R,I,t)=>{ur[i].fields.push({fieldName:de(o),getterReturnType:d,getter:Ge(y,T),getterContext:k,setterArgumentType:j,setter:Ge(R,I),setterContext:t})},hn=(i,o)=>{o=de(o),xe(i,{isVoid:!0,name:o,argPackAdvance:0,fromWireType:()=>{},toWireType:(d,y)=>{}})},gn=(i,o,d)=>Ce.copyWithin(i,o,o+d),Pt=[],yn=(i,o,d,y)=>(i=Pt[i],o=Ye.toValue(o),i(null,o,d,y)),_n={},mn=i=>{var o=_n[i];return o===void 0?de(i):o},Tt=()=>typeof globalThis=="object"?globalThis:(function(){return Function})()("return this")(),bn=i=>i===0?Ye.toHandle(Tt()):(i=mn(i),Ye.toHandle(Tt()[i])),Xt=i=>{var o=Pt.length;return Pt.push(i),o},Yt=(i,o)=>{var d=Se[i];return d===void 0&&ee(`${o} has unknown type ${Mt(i)}`),d},wn=(i,o)=>{for(var d=new Array(i),y=0;y<i;++y)d[y]=Yt(ue[o+y*4>>2],"parameter "+y);return d},Ct=(i,o,d)=>{var y=[],T=i.toWireType(y,d);return y.length&&(ue[o>>2]=Ye.toHandle(y)),T},Pn=(i,o,d)=>{var y=wn(i,o),T=y.shift();i--;var k=`return function (obj, func, destructorsRef, args) {
`,j=0,R=[];d===0&&R.push("obj");for(var I=["retType"],t=[T],n=0;n<i;++n)R.push("arg"+n),I.push("argType"+n),t.push(y[n]),k+=`  var arg${n} = argType${n}.readValueFromPointer(args${j?"+"+j:""});
`,j+=y[n].argPackAdvance;var e=d===1?"new func":"func.call";k+=`  var rv = ${e}(${R.join(", ")});
`,T.isVoid||(I.push("emval_returnValue"),t.push(Ct),k+=`  return emval_returnValue(retType, destructorsRef, rv);
`),k+=`};
`,I.push(k);var r=dr(Function,I)(...t),s=`methodCaller<(${y.map(c=>c.name).join(", ")}) => ${T.name}>`;return Xt(kr(s,r))},Kt=i=>{var o=Ye.toValue(i);Qr(o),at(i)},Qt=(i,o)=>{i=Yt(i,"_emval_take_value");var d=i.readValueFromPointer(o);return Ye.toHandle(d)},Zt=()=>2147483648,en=()=>Zt(),Tn=(i,o)=>Math.ceil(i/o)*o,Cn=i=>{var o=Ue.buffer,d=(i-o.byteLength+65535)/65536|0;try{return Ue.grow(d),he(),1}catch{}},$n=i=>{var o=Ce.length;i>>>=0;var d=Zt();if(i>d)return!1;for(var y=1;y<=4;y*=2){var T=o*(1+.2/y);T=Math.min(T,i+100663296);var k=Math.min(d,Tn(Math.max(i,T),65536)),j=Cn(k);if(j)return!0}return!1},$t={},An=()=>z||"./this.program",qr=()=>{if(!qr.strings){var i=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:i,_:An()};for(var d in $t)$t[d]===void 0?delete o[d]:o[d]=$t[d];var y=[];for(var d in o)y.push(`${d}=${o[d]}`);qr.strings=y}return qr.strings},Rn=(i,o)=>{for(var d=0;d<i.length;++d)je[o++]=i.charCodeAt(d);je[o]=0},At=(i,o)=>{var d=0;return qr().forEach((y,T)=>{var k=o+d;ue[i+T*4>>2]=k,Rn(y,k),d+=y.length+1}),0},Rt=(i,o)=>{var d=qr();ue[i>>2]=d.length;var y=0;return d.forEach(T=>y+=T.length+1),ue[o>>2]=y,0},Mr=i=>52;function br(i,o,d,y,T){return 70}var rn=[null,[],[]],tn=(i,o)=>{var d=rn[i];o===0||o===10?((i===1?ve:Te)(Wr(d)),d.length=0):d.push(o)},Et=(i,o,d,y)=>{for(var T=0,k=0;k<d;k++){var j=ue[o>>2],R=ue[o+4>>2];o+=8;for(var I=0;I<R;I++)tn(i,Ce[j+I]);T+=R}return ue[y>>2]=T,0},nn=i=>{var o=C["_"+i];return o},lt=(i,o)=>{je.set(i,o)},St=i=>x(i),u=i=>{var o=nr(i)+1,d=St(o);return bt(i,d,o),d},f=(i,o,d,y,T)=>{var k={string:c=>{var p=0;return c!=null&&c!==0&&(p=u(c)),p},array:c=>{var p=St(c.length);return lt(c,p),p}};function j(c){return o==="string"?mr(c):o==="boolean"?!!c:c}var R=nn(i),I=[],t=0;if(y)for(var n=0;n<y.length;n++){var e=k[d[n]];e?(t===0&&(t=We()),I[n]=e(y[n])):I[n]=y[n]}var r=R(...I);function s(c){return t!==0&&Vr(t),j(c)}return r=s(r),r};Er=C.InternalError=class extends Error{constructor(o){super(o),this.name="InternalError"}},Zr(),wr=C.BindingError=class extends Error{constructor(o){super(o),this.name="BindingError"}},ae(),sn(),Tr=C.UnboundTypeError=un(Error,"UnboundTypeError"),Nt();var v={A:dt,p:jt,e:pt,o:vt,y:Ae,m:fn,l:Bt,b:it,w:ot,i:ut,d:mt,a:ft,x:ln,g:Jt,f:wt,c:vn,z:hn,v:gn,C:yn,D:at,E:bn,j:Pn,B:Kt,k:Qt,r:en,q:$n,s:At,t:Rt,u:Mr,n:br,h:Et},w;Ee();var $=i=>($=w.H)(i),O=i=>(O=w.J)(i),F=i=>(F=w.K)(i),A=i=>(A=w.L)(i),x=i=>(x=w.M)(i),H=()=>(H=w.N)();C.dynCall_iji=(i,o,d,y)=>(C.dynCall_iji=w.O)(i,o,d,y),C.dynCall_jji=(i,o,d,y)=>(C.dynCall_jji=w.P)(i,o,d,y),C.dynCall_iiji=(i,o,d,y,T)=>(C.dynCall_iiji=w.Q)(i,o,d,y,T),C.dynCall_jiji=(i,o,d,y,T)=>(C.dynCall_jiji=w.R)(i,o,d,y,T),C.ccall=f;var G;$r=function i(){G||X(),G||($r=i)};function X(){if(or>0||(pe(),or>0))return;function i(){G||(G=!0,C.calledRun=!0,!pr&&(Ie(),U(C),C.onRuntimeInitialized?.(),le()))}C.setStatus?(C.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>C.setStatus(""),1),i()},1)):i()}if(C.preInit)for(typeof C.preInit=="function"&&(C.preInit=[C.preInit]);C.preInit.length>0;)C.preInit.pop()();return X(),a=q,a})})();l.exports=m,l.exports.default=m})(Xn)),Xn.exports}var fa=ua(),ca=zn(fa);const la=new URL(""+new URL("openjpegwasm_decode-B3gWTHpv.wasm",import.meta.url).href,import.meta.url),On={codec:void 0,decoder:void 0,decodeConfig:{}};function da(l){if(On.decodeConfig=l,On.codec)return Promise.resolve();const _=ca({locateFile:m=>m.endsWith(".wasm")?la.toString():m});return new Promise((m,S)=>{_.then(E=>{On.codec=E,On.decoder=new E.J2KDecoder,m()},S)})}async function fi(l,_){await da();const m=On.decoder,S=m.getEncodedBuffer(l.length);S.set(l),m.decode();const E=m.getFrameInfo(),a=m.getDecodedBuffer();new Uint8Array(a.length).set(a);const U=`x: ${m.getImageOffset().x}, y: ${m.getImageOffset().y}`,M=m.getNumDecompositions(),q=m.getNumLayers(),V=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][m.getProgressionOrder()+1],J=m.getIsReversible(),L=`${m.getBlockDimensions().width} x ${m.getBlockDimensions().height}`,re=`${m.getTileSize().width} x ${m.getTileSize().height}`,z=`${m.getTileOffset().x}, ${m.getTileOffset().y}`,Y=m.getColorSpace(),se=`${a.length.toLocaleString()} bytes`,ke=`${(a.length/S.length).toFixed(2)}:1`,K={columns:E.width,rows:E.height,bitsPerPixel:E.bitsPerSample,signed:E.isSigned,bytesPerPixel:_.bytesPerPixel,componentsPerPixel:E.componentCount},me=pa(E,a),ve={imageOffset:U,numDecompositions:M,numLayers:q,progessionOrder:V,reversible:J,blockDimensions:L,tileSize:re,tileOffset:z,colorTransform:Y,decodedSize:se,compressionRatio:ke};return{..._,pixelData:me,imageInfo:K,encodeOptions:ve,...ve,...K}}function pa(l,_){return l.bitsPerSample>8?l.isSigned?new Int16Array(_.buffer,_.byteOffset,_.byteLength/2):new Uint16Array(_.buffer,_.byteOffset,_.byteLength/2):l.isSigned?new Int8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}var Yn={exports:{}},ci;function va(){return ci||(ci=1,(function(l,_){var m=(()=>{var S=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(S=S||__filename),(function(a){a=a||{};var a=typeof a<"u"?a:{},C,U;a.ready=new Promise(function(t,n){C=t,U=n});var M=Object.assign({},a),q=typeof window=="object",V=typeof importScripts=="function",J=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",L="";function re(t){return a.locateFile?a.locateFile(t,L):L+t}var z,Y,se;if(J){var ke=Fn,K=Fn;V?L=K.dirname(L)+"/":L=__dirname+"/",z=(t,n)=>(t=Ee(t)?new URL(t):K.normalize(t),ke.readFileSync(t,n?void 0:"utf8")),se=t=>{var n=z(t,!0);return n.buffer||(n=new Uint8Array(n)),n},Y=(t,n,e)=>{t=Ee(t)?new URL(t):K.normalize(t),ke.readFile(t,function(r,s){r?e(r):n(s.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof Kr))throw t}),process.on("unhandledRejection",function(t){throw t}),a.inspect=function(){return"[Emscripten Module object]"}}else(q||V)&&(V?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),S&&(L=S),L.indexOf("blob:")!==0?L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1):L="",z=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(null),n.responseText},V&&(se=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),Y=(t,n,e)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){n(r.response);return}e()},r.onerror=e,r.send(null)});var me=a.print||console.log.bind(console),ve=a.printErr||console.warn.bind(console);Object.assign(a,M),M=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit;var Te;a.wasmBinary&&(Te=a.wasmBinary),a.noExitRuntime,typeof WebAssembly!="object"&&Or("no native wasm support detected");var Re,Ue=!1;function pr(t,n){t||Or(n)}var je=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ce(t,n,e){for(var r=n+e,s=n;t[s]&&!(s>=r);)++s;if(s-n>16&&t.buffer&&je)return je.decode(t.subarray(n,s));for(var c="";n<s;){var p=t[n++];if(!(p&128)){c+=String.fromCharCode(p);continue}var h=t[n++]&63;if((p&224)==192){c+=String.fromCharCode((p&31)<<6|h);continue}var g=t[n++]&63;if((p&240)==224?p=(p&15)<<12|h<<6|g:p=(p&7)<<18|h<<12|g<<6|t[n++]&63,p<65536)c+=String.fromCharCode(p);else{var b=p-65536;c+=String.fromCharCode(55296|b>>10,56320|b&1023)}}return c}function ar(t,n){return t?Ce(he,t,n):""}function xr(t,n,e,r){if(!(r>0))return 0;for(var s=e,c=e+r-1,p=0;p<t.length;++p){var h=t.charCodeAt(p);if(h>=55296&&h<=57343){var g=t.charCodeAt(++p);h=65536+((h&1023)<<10)|g&1023}if(h<=127){if(e>=c)break;n[e++]=h}else if(h<=2047){if(e+1>=c)break;n[e++]=192|h>>6,n[e++]=128|h&63}else if(h<=65535){if(e+2>=c)break;n[e++]=224|h>>12,n[e++]=128|h>>6&63,n[e++]=128|h&63}else{if(e+3>=c)break;n[e++]=240|h>>18,n[e++]=128|h>>12&63,n[e++]=128|h>>6&63,n[e++]=128|h&63}}return n[e]=0,e-s}function Cr(t,n,e){return xr(t,he,n,e)}function ue(t){for(var n=0,e=0;e<t.length;++e){var r=t.charCodeAt(e);r<=127?n++:r<=2047?n+=2:r>=55296&&r<=57343?(n+=4,++e):n+=3}return n}var Je,ge,he,be,oe,ne,pe,Ie,le;function Jr(t){Je=t,a.HEAP8=ge=new Int8Array(t),a.HEAP16=be=new Int16Array(t),a.HEAP32=ne=new Int32Array(t),a.HEAPU8=he=new Uint8Array(t),a.HEAPU16=oe=new Uint16Array(t),a.HEAPU32=pe=new Uint32Array(t),a.HEAPF32=Ie=new Float32Array(t),a.HEAPF64=le=new Float64Array(t)}a.INITIAL_MEMORY;var Xr,Yr=[],or=[],$r=[];function Ft(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)an(a.preRun.shift());dt(Yr)}function kt(){dt(or)}function Dt(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)sr(a.postRun.shift());dt($r)}function an(t){Yr.unshift(t)}function xt(t){or.unshift(t)}function sr(t){$r.unshift(t)}var Ke=0,Ar=null;function Rr(t){Ke++,a.monitorRunDependencies&&a.monitorRunDependencies(Ke)}function vr(t){if(Ke--,a.monitorRunDependencies&&a.monitorRunDependencies(Ke),Ke==0&&Ar){var n=Ar;Ar=null,n()}}function Or(t){a.onAbort&&a.onAbort(t),t="Aborted("+t+")",ve(t),Ue=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw U(n),n}var Ot="data:application/octet-stream;base64,";function hr(t){return t.startsWith(Ot)}function Ee(t){return t.startsWith("file://")}var $e;$e="openjphjs.wasm",hr($e)||($e=re($e));function Vr(t){try{if(t==$e&&Te)return new Uint8Array(Te);if(se)return se(t);throw"both async and sync fetching of the wasm failed"}catch(n){Or(n)}}function We(){if(!Te&&(q||V)){if(typeof fetch=="function"&&!Ee($e))return fetch($e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+$e+"'";return t.arrayBuffer()}).catch(function(){return Vr($e)});if(Y)return new Promise(function(t,n){Y($e,function(e){t(new Uint8Array(e))},n)})}return Promise.resolve().then(function(){return Vr($e)})}function Ut(){var t={env:u,wasi_snapshot_preview1:u};function n(p,h){var g=p.exports;a.asm=g,Re=a.asm.memory,Jr(Re.buffer),Xr=a.asm.__indirect_function_table,xt(a.asm.__wasm_call_ctors),vr()}Rr();function e(p){n(p.instance)}function r(p){return We().then(function(h){return WebAssembly.instantiate(h,t)}).then(function(h){return h}).then(p,function(h){ve("failed to asynchronously prepare wasm: "+h),Or(h)})}function s(){return!Te&&typeof WebAssembly.instantiateStreaming=="function"&&!hr($e)&&!Ee($e)&&!J&&typeof fetch=="function"?fetch($e,{credentials:"same-origin"}).then(function(p){var h=WebAssembly.instantiateStreaming(p,t);return h.then(e,function(g){return ve("wasm streaming compile failed: "+g),ve("falling back to ArrayBuffer instantiation"),r(e)})}):r(e)}if(a.instantiateWasm)try{var c=a.instantiateWasm(t,n);return c}catch(p){ve("Module.instantiateWasm callback failed with error: "+p),U(p)}return s().catch(U),{}}function Kr(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function dt(t){for(;t.length>0;)t.shift()(a)}function jt(t,n,e,r){Or("Assertion failed: "+ar(t)+", at: "+[n?ar(n):"unknown filename",e,r?ar(r):"unknown function"])}var ur=[];function Qr(t){t.add_ref()}function gr(t){var n=new He(t);return n.get_caught()||n.set_caught(!0),n.set_rethrown(!1),ur.push(n),Qr(n),n.get_exception_ptr()}var we=0,Se=[];function ye(t){var n=Se[t];return n||(t>=Se.length&&(Se.length=t+1),Se[t]=n=Xr.get(t)),n}function Er(t){if(t.release_ref()&&!t.get_rethrown()){var n=t.get_destructor();n&&ye(n)(t.excPtr),w(t.excPtr)}}function fr(){_setThrew(0);var t=ur.pop();Er(t),we=0}function He(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(n){pe[this.ptr+4>>2]=n},this.get_type=function(){return pe[this.ptr+4>>2]},this.set_destructor=function(n){pe[this.ptr+8>>2]=n},this.get_destructor=function(){return pe[this.ptr+8>>2]},this.set_refcount=function(n){ne[this.ptr>>2]=n},this.set_caught=function(n){n=n?1:0,ge[this.ptr+12>>0]=n},this.get_caught=function(){return ge[this.ptr+12>>0]!=0},this.set_rethrown=function(n){n=n?1:0,ge[this.ptr+13>>0]=n},this.get_rethrown=function(){return ge[this.ptr+13>>0]!=0},this.init=function(n,e){this.set_adjusted_ptr(0),this.set_type(n),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var n=ne[this.ptr>>2];ne[this.ptr>>2]=n+1},this.release_ref=function(){var n=ne[this.ptr>>2];return ne[this.ptr>>2]=n-1,n===1},this.set_adjusted_ptr=function(n){pe[this.ptr+16>>2]=n},this.get_adjusted_ptr=function(){return pe[this.ptr+16>>2]},this.get_exception_ptr=function(){var n=G(this.get_type());if(n)return pe[this.excPtr>>2];var e=this.get_adjusted_ptr();return e!==0?e:this.excPtr}}function pt(t){throw we||(we=t),t}function vt(){var t=we;if(!t)return O(0),0;var n=new He(t);n.set_adjusted_ptr(t);var e=n.get_type();if(!e)return O(0),t;for(var r=0;r<arguments.length;r++){var s=arguments[r];if(s===0||s===e)break;var c=n.ptr+16;if(H(s,e,c))return O(s),t}return O(e),t}function Zr(){var t=we;if(!t)return O(0),0;var n=new He(t);n.set_adjusted_ptr(t);var e=n.get_type();if(!e)return O(0),t;for(var r=0;r<arguments.length;r++){var s=arguments[r];if(s===0||s===e)break;var c=n.ptr+16;if(H(s,e,c))return O(s),t}return O(e),t}function Sr(t,n,e){var r=new He(t);throw r.init(n,e),we=t,t}var de={};function wr(t){for(;t.length;){var n=t.pop(),e=t.pop();e(n)}}function ee(t){return this.fromWireType(ne[t>>2])}var Be={},xe={},Ne={},Ae=48,Ur=57;function te(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var n=t.charCodeAt(0);return n>=Ae&&n<=Ur?"_"+t:t}function fe(t,n){return t=te(t),new Function("body","return function "+t+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(n)}function yr(t,n){var e=fe(n,function(r){this.name=n,this.message=r;var s=new Error(r).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},e}var ie=void 0;function ze(t){throw new ie(t)}function cr(t,n,e){t.forEach(function(h){Ne[h]=n});function r(h){var g=e(h);g.length!==t.length&&ze("Mismatched type converter count");for(var b=0;b<t.length;++b)Fe(t[b],g[b])}var s=new Array(n.length),c=[],p=0;n.forEach((h,g)=>{xe.hasOwnProperty(h)?s[g]=xe[h]:(c.push(h),Be.hasOwnProperty(h)||(Be[h]=[]),Be[h].push(()=>{s[g]=xe[h],++p,p===c.length&&r(s)}))}),c.length===0&&r(s)}function et(t){var n=de[t];delete de[t];var e=n.rawConstructor,r=n.rawDestructor,s=n.fields,c=s.map(p=>p.getterReturnType).concat(s.map(p=>p.setterArgumentType));cr([t],c,p=>{var h={};return s.forEach((g,b)=>{var P=g.fieldName,D=p[b],W=g.getter,N=g.getterContext,B=p[b+s.length],Z=g.setter,Q=g.setterContext;h[P]={read:ce=>D.fromWireType(W(N,ce)),write:(ce,Oe)=>{var Ve=[];Z(Q,ce,B.toWireType(Ve,Oe)),wr(Ve)}}}),[{name:n.name,fromWireType:function(g){var b={};for(var P in h)b[P]=h[P].read(g);return r(g),b},toWireType:function(g,b){for(var P in h)if(!(P in b))throw new TypeError('Missing field:  "'+P+'"');var D=e();for(P in h)h[P].write(D,b[P]);return g!==null&&g.push(r,D),D},argPackAdvance:8,readValueFromPointer:ee,destructorFunction:r}]})}function It(t,n,e,r,s){}function Br(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function rt(){for(var t=new Array(256),n=0;n<256;++n)t[n]=String.fromCharCode(n);Fr=t}var Fr=void 0;function De(t){for(var n="",e=t;he[e];)n+=Fr[he[e++]];return n}var Qe=void 0;function ae(t){throw new Qe(t)}function Fe(t,n,e={}){if(!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=n.name;if(t||ae('type "'+r+'" must have a positive integer typeid pointer'),xe.hasOwnProperty(t)){if(e.ignoreDuplicateRegistrations)return;ae("Cannot register type '"+r+"' twice")}if(xe[t]=n,delete Ne[t],Be.hasOwnProperty(t)){var s=Be[t];delete Be[t],s.forEach(c=>c())}}function kr(t,n,e,r,s){var c=Br(e);n=De(n),Fe(t,{name:n,fromWireType:function(p){return!!p},toWireType:function(p,h){return h?r:s},argPackAdvance:8,readValueFromPointer:function(p){var h;if(e===1)h=ge;else if(e===2)h=be;else if(e===4)h=ne;else throw new TypeError("Unknown boolean type size: "+n);return this.fromWireType(h[p>>c])},destructorFunction:null})}function jr(t){if(!(this instanceof dr)||!(t instanceof dr))return!1;for(var n=this.$$.ptrType.registeredClass,e=this.$$.ptr,r=t.$$.ptrType.registeredClass,s=t.$$.ptr;n.baseClass;)e=n.upcast(e),n=n.baseClass;for(;r.baseClass;)s=r.upcast(s),r=r.baseClass;return n===r&&e===s}function Nr(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function zr(t){function n(e){return e.$$.ptrType.registeredClass.name}ae(n(t)+" instance already deleted")}var Ze=!1;function Wt(t){}function on(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function er(t){t.count.value-=1;var n=t.count.value===0;n&&on(t)}function Ht(t,n,e){if(n===e)return t;if(e.baseClass===void 0)return null;var r=Ht(t,n,e.baseClass);return r===null?null:e.downcast(r)}var Ir={};function tt(){return Object.keys(Dr).length}function sn(){var t=[];for(var n in Dr)Dr.hasOwnProperty(n)&&t.push(Dr[n]);return t}var Xe=[];function ht(){for(;Xe.length;){var t=Xe.pop();t.$$.deleteScheduled=!1,t.delete()}}var Gr=void 0;function rr(t){Gr=t,Xe.length&&Gr&&Gr(ht)}function gt(){a.getInheritedInstanceCount=tt,a.getLiveInheritedInstances=sn,a.flushPendingDeletes=ht,a.setDelayFunction=rr}var Dr={};function Pr(t,n){for(n===void 0&&ae("ptr should not be undefined");t.baseClass;)n=t.upcast(n),t=t.baseClass;return n}function nt(t,n){return n=Pr(t,n),Dr[n]}function Ge(t,n){(!n.ptrType||!n.ptr)&&ze("makeClassHandle requires ptr and ptrType");var e=!!n.smartPtrType,r=!!n.smartPtr;return e!==r&&ze("Both smartPtrType and smartPtr must be specified"),n.count={value:1},Tr(Object.create(t,{$$:{value:n}}))}function un(t){var n=this.getPointee(t);if(!n)return this.destructor(t),null;var e=nt(this.registeredClass,n);if(e!==void 0){if(e.$$.count.value===0)return e.$$.ptr=n,e.$$.smartPtr=t,e.clone();var r=e.clone();return this.destructor(t),r}function s(){return this.isSmartPointer?Ge(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:n,smartPtrType:this,smartPtr:t}):Ge(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var c=this.registeredClass.getActualType(n),p=Ir[c];if(!p)return s.call(this);var h;this.isConst?h=p.constPointerType:h=p.pointerType;var g=Ht(n,this.registeredClass,h.registeredClass);return g===null?s.call(this):this.isSmartPointer?Ge(h.registeredClass.instancePrototype,{ptrType:h,ptr:g,smartPtrType:this,smartPtr:t}):Ge(h.registeredClass.instancePrototype,{ptrType:h,ptr:g})}function Tr(t){return typeof FinalizationRegistry>"u"?(Tr=n=>n,t):(Ze=new FinalizationRegistry(n=>{er(n.$$)}),Tr=n=>{var e=n.$$,r=!!e.smartPtr;if(r){var s={$$:e};Ze.register(n,s,n)}return n},Wt=n=>Ze.unregister(n),Tr(t))}function Mt(){if(this.$$.ptr||zr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Tr(Object.create(Object.getPrototypeOf(this),{$$:{value:Nr(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function yt(){this.$$.ptr||zr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),Wt(this),er(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function fn(){return!this.$$.ptr}function Lt(){return this.$$.ptr||zr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),Xe.push(this),Xe.length===1&&Gr&&Gr(ht),this.$$.deleteScheduled=!0,this}function lr(){dr.prototype.isAliasOf=jr,dr.prototype.clone=Mt,dr.prototype.delete=yt,dr.prototype.isDeleted=fn,dr.prototype.deleteLater=Lt}function dr(){}function Vt(t,n,e){if(t[n].overloadTable===void 0){var r=t[n];t[n]=function(){return t[n].overloadTable.hasOwnProperty(arguments.length)||ae("Function '"+e+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[n].overloadTable+")!"),t[n].overloadTable[arguments.length].apply(this,arguments)},t[n].overloadTable=[],t[n].overloadTable[r.argCount]=r}}function Me(t,n,e){a.hasOwnProperty(t)?((e===void 0||a[t].overloadTable!==void 0&&a[t].overloadTable[e]!==void 0)&&ae("Cannot register public name '"+t+"' twice"),Vt(a,t,t),a.hasOwnProperty(e)&&ae("Cannot register multiple overloads of a function with the same number of arguments ("+e+")!"),a[t].overloadTable[e]=n):(a[t]=n,e!==void 0&&(a[t].numArguments=e))}function Bt(t,n,e,r,s,c,p,h){this.name=t,this.constructor=n,this.instancePrototype=e,this.rawDestructor=r,this.baseClass=s,this.getActualType=c,this.upcast=p,this.downcast=h,this.pureVirtualFunctions=[]}function _t(t,n,e){for(;n!==e;)n.upcast||ae("Expected null or instance of "+e.name+", got an instance of "+n.name),t=n.upcast(t),n=n.baseClass;return t}function it(t,n){if(n===null)return this.isReference&&ae("null is not a valid "+this.name),0;n.$$||ae('Cannot pass "'+wt(n)+'" as a '+this.name),n.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name);var e=n.$$.ptrType.registeredClass,r=_t(n.$$.ptr,e,this.registeredClass);return r}function Pe(t,n){var e;if(n===null)return this.isReference&&ae("null is not a valid "+this.name),this.isSmartPointer?(e=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,e),e):0;n.$$||ae('Cannot pass "'+wt(n)+'" as a '+this.name),n.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&n.$$.ptrType.isConst&&ae("Cannot convert argument of type "+(n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name)+" to parameter type "+this.name);var r=n.$$.ptrType.registeredClass;if(e=_t(n.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(n.$$.smartPtr===void 0&&ae("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:n.$$.smartPtrType===this?e=n.$$.smartPtr:ae("Cannot convert argument of type "+(n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:e=n.$$.smartPtr;break;case 2:if(n.$$.smartPtrType===this)e=n.$$.smartPtr;else{var s=n.clone();e=this.rawShare(e,ct.toHandle(function(){s.delete()})),t!==null&&t.push(this.rawDestructor,e)}break;default:ae("Unsupporting sharing policy")}return e}function _r(t,n){if(n===null)return this.isReference&&ae("null is not a valid "+this.name),0;n.$$||ae('Cannot pass "'+wt(n)+'" as a '+this.name),n.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),n.$$.ptrType.isConst&&ae("Cannot convert argument of type "+n.$$.ptrType.name+" to parameter type "+this.name);var e=n.$$.ptrType.registeredClass,r=_t(n.$$.ptr,e,this.registeredClass);return r}function at(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function qe(t){this.rawDestructor&&this.rawDestructor(t)}function Nt(t){t!==null&&t.delete()}function Ye(){tr.prototype.getPointee=at,tr.prototype.destructor=qe,tr.prototype.argPackAdvance=8,tr.prototype.readValueFromPointer=ee,tr.prototype.deleteObject=Nt,tr.prototype.fromWireType=un}function tr(t,n,e,r,s,c,p,h,g,b,P){this.name=t,this.registeredClass=n,this.isReference=e,this.isConst=r,this.isSmartPointer=s,this.pointeeType=c,this.sharingPolicy=p,this.rawGetPointee=h,this.rawConstructor=g,this.rawShare=b,this.rawDestructor=P,!s&&n.baseClass===void 0?r?(this.toWireType=it,this.destructorFunction=null):(this.toWireType=_r,this.destructorFunction=null):this.toWireType=Pe}function ot(t,n,e){a.hasOwnProperty(t)||ze("Replacing nonexistant public symbol"),a[t].overloadTable!==void 0&&e!==void 0?a[t].overloadTable[e]=n:(a[t]=n,a[t].argCount=e)}function st(t,n,e){var r=a["dynCall_"+t];return e&&e.length?r.apply(null,[n].concat(e)):r.call(null,n)}function cn(t,n,e){if(t.includes("j"))return st(t,n,e);var r=ye(n).apply(null,e);return r}function ut(t,n){var e=[];return function(){return e.length=0,Object.assign(e,arguments),cn(t,n,e)}}function _e(t,n){t=De(t);function e(){return t.includes("j")?ut(t,n):ye(n)}var r=e();return typeof r!="function"&&ae("unknown function pointer with signature "+t+": "+n),r}var mt=void 0;function ft(t){var n=$(t),e=De(n);return v(n),e}function Le(t,n){var e=[],r={};function s(c){if(!r[c]&&!xe[c]){if(Ne[c]){Ne[c].forEach(s);return}e.push(c),r[c]=!0}}throw n.forEach(s),new mt(t+": "+e.map(ft).join([", "]))}function bt(t,n,e,r,s,c,p,h,g,b,P,D,W){P=De(P),c=_e(s,c),h&&(h=_e(p,h)),b&&(b=_e(g,b)),W=_e(D,W);var N=te(P);Me(N,function(){Le("Cannot construct "+P+" due to unbound types",[r])}),cr([t,n,e],r?[r]:[],function(B){B=B[0];var Z,Q;r?(Z=B.registeredClass,Q=Z.instancePrototype):Q=dr.prototype;var ce=fe(N,function(){if(Object.getPrototypeOf(this)!==Oe)throw new Qe("Use 'new' to construct "+P);if(Ve.constructor_body===void 0)throw new Qe(P+" has no accessible constructor");var xn=Ve.constructor_body[arguments.length];if(xn===void 0)throw new Qe("Tried to invoke ctor of "+P+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ve.constructor_body).toString()+") parameters instead!");return xn.apply(this,arguments)}),Oe=Object.create(Q,{constructor:{value:ce}});ce.prototype=Oe;var Ve=new Bt(P,ce,Oe,W,Z,c,h,b),En=new tr(P,Ve,!0,!1,!1),Lr=new tr(P+"*",Ve,!1,!1,!1),Wn=new tr(P+" const*",Ve,!1,!0,!1);return Ir[t]={pointerType:Lr,constPointerType:Wn},ot(N,ce),[En,Lr,Wn]})}function nr(t,n){for(var e=[],r=0;r<t;r++)e.push(pe[n+r*4>>2]);return e}function zt(t,n){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var e=fe(t.name||"unknownFunctionName",function(){});e.prototype=t.prototype;var r=new e,s=t.apply(r,n);return s instanceof Object?s:r}function Wr(t,n,e,r,s){var c=n.length;c<2&&ae("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var p=n[1]!==null&&e!==null,h=!1,g=1;g<n.length;++g)if(n[g]!==null&&n[g].destructorFunction===void 0){h=!0;break}for(var b=n[0].name!=="void",P="",D="",g=0;g<c-2;++g)P+=(g!==0?", ":"")+"arg"+g,D+=(g!==0?", ":"")+"arg"+g+"Wired";var W="return function "+te(t)+"("+P+`) {
if (arguments.length !== `+(c-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(c-2)+` args!');
}
`;h&&(W+=`var destructors = [];
`);var N=h?"destructors":"null",B=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Z=[ae,r,s,wr,n[0],n[1]];p&&(W+="var thisWired = classParam.toWireType("+N+`, this);
`);for(var g=0;g<c-2;++g)W+="var arg"+g+"Wired = argType"+g+".toWireType("+N+", arg"+g+"); // "+n[g+2].name+`
`,B.push("argType"+g),Z.push(n[g+2]);if(p&&(D="thisWired"+(D.length>0?", ":"")+D),W+=(b?"var rv = ":"")+"invoker(fn"+(D.length>0?", ":"")+D+`);
`,h)W+=`runDestructors(destructors);
`;else for(var g=p?1:2;g<n.length;++g){var Q=g===1?"thisWired":"arg"+(g-2)+"Wired";n[g].destructorFunction!==null&&(W+=Q+"_dtor("+Q+"); // "+n[g].name+`
`,B.push(Q+"_dtor"),Z.push(n[g].destructorFunction))}b&&(W+=`var ret = retType.fromWireType(rv);
return ret;
`),W+=`}
`,B.push(W);var ce=zt(Function,B).apply(null,Z);return ce}function mr(t,n,e,r,s,c){pr(n>0);var p=nr(n,e);s=_e(r,s),cr([],[t],function(h){h=h[0];var g="constructor "+h.name;if(h.registeredClass.constructor_body===void 0&&(h.registeredClass.constructor_body=[]),h.registeredClass.constructor_body[n-1]!==void 0)throw new Qe("Cannot register multiple constructors with identical number of parameters ("+(n-1)+") for class '"+h.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return h.registeredClass.constructor_body[n-1]=()=>{Le("Cannot construct "+h.name+" due to unbound types",p)},cr([],p,function(b){return b.splice(1,0,null),h.registeredClass.constructor_body[n-1]=Wr(g,b,null,s,c),[]}),[]})}function ln(t,n,e,r,s,c,p,h){var g=nr(e,r);n=De(n),c=_e(s,c),cr([],[t],function(b){b=b[0];var P=b.name+"."+n;n.startsWith("@@")&&(n=Symbol[n.substring(2)]),h&&b.registeredClass.pureVirtualFunctions.push(n);function D(){Le("Cannot call "+P+" due to unbound types",g)}var W=b.registeredClass.instancePrototype,N=W[n];return N===void 0||N.overloadTable===void 0&&N.className!==b.name&&N.argCount===e-2?(D.argCount=e-2,D.className=b.name,W[n]=D):(Vt(W,n,P),W[n].overloadTable[e-2]=D),cr([],g,function(B){var Z=Wr(P,B,b,c,p);return W[n].overloadTable===void 0?(Z.argCount=e-2,W[n]=Z):W[n].overloadTable[e-2]=Z,[]}),[]})}var Hr=[],ir=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Gt(t){t>4&&--ir[t].refcount===0&&(ir[t]=void 0,Hr.push(t))}function dn(){for(var t=0,n=5;n<ir.length;++n)ir[n]!==void 0&&++t;return t}function pn(){for(var t=5;t<ir.length;++t)if(ir[t]!==void 0)return ir[t];return null}function qt(){a.count_emval_handles=dn,a.get_first_emval=pn}var ct={toValue:t=>(t||ae("Cannot use deleted val. handle = "+t),ir[t].value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var n=Hr.length?Hr.pop():ir.length;return ir[n]={refcount:1,value:t},n}}}};function Jt(t,n){n=De(n),Fe(t,{name:n,fromWireType:function(e){var r=ct.toValue(e);return Gt(e),r},toWireType:function(e,r){return ct.toHandle(r)},argPackAdvance:8,readValueFromPointer:ee,destructorFunction:null})}function wt(t){if(t===null)return"null";var n=typeof t;return n==="object"||n==="array"||n==="function"?t.toString():""+t}function vn(t,n){switch(n){case 2:return function(e){return this.fromWireType(Ie[e>>2])};case 3:return function(e){return this.fromWireType(le[e>>3])};default:throw new TypeError("Unknown float type: "+t)}}function hn(t,n,e){var r=Br(e);n=De(n),Fe(t,{name:n,fromWireType:function(s){return s},toWireType:function(s,c){return c},argPackAdvance:8,readValueFromPointer:vn(n,r),destructorFunction:null})}function gn(t,n,e,r,s,c){var p=nr(n,e);t=De(t),s=_e(r,s),Me(t,function(){Le("Cannot call "+t+" due to unbound types",p)},n-1),cr([],p,function(h){var g=[h[0],null].concat(h.slice(1));return ot(t,Wr(t,g,null,s,c),n-1),[]})}function Pt(t,n,e){switch(n){case 0:return e?function(s){return ge[s]}:function(s){return he[s]};case 1:return e?function(s){return be[s>>1]}:function(s){return oe[s>>1]};case 2:return e?function(s){return ne[s>>2]}:function(s){return pe[s>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function yn(t,n,e,r,s){n=De(n);var c=Br(e),p=D=>D;if(r===0){var h=32-8*e;p=D=>D<<h>>>h}var g=n.includes("unsigned"),b=(D,W)=>{},P;g?P=function(D,W){return b(W,this.name),W>>>0}:P=function(D,W){return b(W,this.name),W},Fe(t,{name:n,fromWireType:p,toWireType:P,argPackAdvance:8,readValueFromPointer:Pt(n,c,r!==0),destructorFunction:null})}function _n(t,n,e){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=r[n];function c(p){p=p>>2;var h=pe,g=h[p],b=h[p+1];return new s(Je,b,g)}e=De(e),Fe(t,{name:e,fromWireType:c,argPackAdvance:8,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})}function mn(t,n){n=De(n);var e=n==="std::string";Fe(t,{name:n,fromWireType:function(r){var s=pe[r>>2],c=r+4,p;if(e)for(var h=c,g=0;g<=s;++g){var b=c+g;if(g==s||he[b]==0){var P=b-h,D=ar(h,P);p===void 0?p=D:(p+="\0",p+=D),h=b+1}}else{for(var W=new Array(s),g=0;g<s;++g)W[g]=String.fromCharCode(he[c+g]);p=W.join("")}return v(r),p},toWireType:function(r,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var c,p=typeof s=="string";p||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||ae("Cannot pass non-string to std::string"),e&&p?c=ue(s):c=s.length;var h=f(4+c+1),g=h+4;if(pe[h>>2]=c,e&&p)Cr(s,g,c+1);else if(p)for(var b=0;b<c;++b){var P=s.charCodeAt(b);P>255&&(v(g),ae("String has UTF-16 code units that do not fit in 8 bits")),he[g+b]=P}else for(var b=0;b<c;++b)he[g+b]=s[b];return r!==null&&r.push(v,h),h},argPackAdvance:8,readValueFromPointer:ee,destructorFunction:function(r){v(r)}})}var Tt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function bn(t,n){for(var e=t,r=e>>1,s=r+n/2;!(r>=s)&&oe[r];)++r;if(e=r<<1,e-t>32&&Tt)return Tt.decode(he.subarray(t,e));for(var c="",p=0;!(p>=n/2);++p){var h=be[t+p*2>>1];if(h==0)break;c+=String.fromCharCode(h)}return c}function Xt(t,n,e){if(e===void 0&&(e=2147483647),e<2)return 0;e-=2;for(var r=n,s=e<t.length*2?e/2:t.length,c=0;c<s;++c){var p=t.charCodeAt(c);be[n>>1]=p,n+=2}return be[n>>1]=0,n-r}function Yt(t){return t.length*2}function wn(t,n){for(var e=0,r="";!(e>=n/4);){var s=ne[t+e*4>>2];if(s==0)break;if(++e,s>=65536){var c=s-65536;r+=String.fromCharCode(55296|c>>10,56320|c&1023)}else r+=String.fromCharCode(s)}return r}function Ct(t,n,e){if(e===void 0&&(e=2147483647),e<4)return 0;for(var r=n,s=r+e-4,c=0;c<t.length;++c){var p=t.charCodeAt(c);if(p>=55296&&p<=57343){var h=t.charCodeAt(++c);p=65536+((p&1023)<<10)|h&1023}if(ne[n>>2]=p,n+=4,n+4>s)break}return ne[n>>2]=0,n-r}function Pn(t){for(var n=0,e=0;e<t.length;++e){var r=t.charCodeAt(e);r>=55296&&r<=57343&&++e,n+=4}return n}function Kt(t,n,e){e=De(e);var r,s,c,p,h;n===2?(r=bn,s=Xt,p=Yt,c=()=>oe,h=1):n===4&&(r=wn,s=Ct,p=Pn,c=()=>pe,h=2),Fe(t,{name:e,fromWireType:function(g){for(var b=pe[g>>2],P=c(),D,W=g+4,N=0;N<=b;++N){var B=g+4+N*n;if(N==b||P[B>>h]==0){var Z=B-W,Q=r(W,Z);D===void 0?D=Q:(D+="\0",D+=Q),W=B+n}}return v(g),D},toWireType:function(g,b){typeof b!="string"&&ae("Cannot pass non-string to C++ string type "+e);var P=p(b),D=f(4+P+n);return pe[D>>2]=P>>h,s(b,D+4,P+n),g!==null&&g.push(v,D),D},argPackAdvance:8,readValueFromPointer:ee,destructorFunction:function(g){v(g)}})}function Qt(t,n,e,r,s,c){de[t]={name:De(n),rawConstructor:_e(e,r),rawDestructor:_e(s,c),fields:[]}}function Zt(t,n,e,r,s,c,p,h,g,b){de[t].fields.push({fieldName:De(n),getterReturnType:e,getter:_e(r,s),getterContext:c,setterArgumentType:p,setter:_e(h,g),setterContext:b})}function en(t,n){n=De(n),Fe(t,{isVoid:!0,name:n,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,r){}})}function Tn(t){t>4&&(ir[t].refcount+=1)}function Cn(t,n){var e=xe[t];return e===void 0&&ae(n+" has unknown type "+ft(t)),e}function $n(t,n){t=Cn(t,"_emval_take_value");var e=t.readValueFromPointer(n);return ct.toHandle(e)}function $t(){Or("")}function An(t,n,e){he.copyWithin(t,n,n+e)}function qr(){return 2147483648}function Rn(t){try{return Re.grow(t-Je.byteLength+65535>>>16),Jr(Re.buffer),1}catch{}}function At(t){var n=he.length;t=t>>>0;var e=qr();if(t>e)return!1;let r=(g,b)=>g+(b-g%b)%b;for(var s=1;s<=4;s*=2){var c=n*(1+.2/s);c=Math.min(c,t+100663296);var p=Math.min(e,r(Math.max(t,c),65536)),h=Rn(p);if(h)return!0}return!1}function Rt(t){return 52}function Mr(t,n,e,r,s){return 70}var br=[null,[],[]];function rn(t,n){var e=br[t];n===0||n===10?((t===1?me:ve)(Ce(e,0)),e.length=0):e.push(n)}function tn(t,n,e,r){for(var s=0,c=0;c<e;c++){var p=pe[n>>2],h=pe[n+4>>2];n+=8;for(var g=0;g<h;g++)rn(t,he[p+g]);s+=h}return pe[r>>2]=s,0}function Et(t){return t}function nn(t){var n=a["_"+t];return n}function lt(t,n){ge.set(t,n)}function St(t,n,e,r,s){var c={string:B=>{var Z=0;if(B!=null&&B!==0){var Q=(B.length<<2)+1;Z=x(Q),Cr(B,Z,Q)}return Z},array:B=>{var Z=x(B.length);return lt(B,Z),Z}};function p(B){return n==="string"?ar(B):n==="boolean"?!!B:B}var h=nn(t),g=[],b=0;if(r)for(var P=0;P<r.length;P++){var D=c[e[P]];D?(b===0&&(b=F()),g[P]=D(r[P])):g[P]=r[P]}var W=h.apply(null,g);function N(B){return b!==0&&A(b),p(B)}return W=N(W),W}ie=a.InternalError=yr(Error,"InternalError"),rt(),Qe=a.BindingError=yr(Error,"BindingError"),lr(),gt(),Ye(),mt=a.UnboundTypeError=yr(Error,"UnboundTypeError"),qt();var u={__assert_fail:jt,__cxa_begin_catch:gr,__cxa_end_catch:fr,__cxa_find_matching_catch_2:vt,__cxa_find_matching_catch_3:Zr,__cxa_throw:Sr,__resumeException:pt,_embind_finalize_value_object:et,_embind_register_bigint:It,_embind_register_bool:kr,_embind_register_class:bt,_embind_register_class_constructor:mr,_embind_register_class_function:ln,_embind_register_emval:Jt,_embind_register_float:hn,_embind_register_function:gn,_embind_register_integer:yn,_embind_register_memory_view:_n,_embind_register_std_string:mn,_embind_register_std_wstring:Kt,_embind_register_value_object:Qt,_embind_register_value_object_field:Zt,_embind_register_void:en,_emval_decref:Gt,_emval_incref:Tn,_emval_take_value:$n,abort:$t,emscripten_memcpy_big:An,emscripten_resize_heap:At,fd_close:Rt,fd_seek:Mr,fd_write:tn,invoke_i:T,invoke_ii:X,invoke_iii:j,invoke_iiii:y,invoke_v:d,invoke_vi:i,invoke_viiii:o,invoke_viiiiii:k,llvm_eh_typeid_for:Et};Ut(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)};var f=a._malloc=function(){return(f=a._malloc=a.asm.malloc).apply(null,arguments)},v=a._free=function(){return(v=a._free=a.asm.free).apply(null,arguments)},w=a.___cxa_free_exception=function(){return(w=a.___cxa_free_exception=a.asm.__cxa_free_exception).apply(null,arguments)},$=a.___getTypeName=function(){return($=a.___getTypeName=a.asm.__getTypeName).apply(null,arguments)};a.__embind_initialize_bindings=function(){return(a.__embind_initialize_bindings=a.asm._embind_initialize_bindings).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)};var O=a.setTempRet0=function(){return(O=a.setTempRet0=a.asm.setTempRet0).apply(null,arguments)},F=a.stackSave=function(){return(F=a.stackSave=a.asm.stackSave).apply(null,arguments)},A=a.stackRestore=function(){return(A=a.stackRestore=a.asm.stackRestore).apply(null,arguments)},x=a.stackAlloc=function(){return(x=a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)},H=a.___cxa_can_catch=function(){return(H=a.___cxa_can_catch=a.asm.__cxa_can_catch).apply(null,arguments)},G=a.___cxa_is_pointer_type=function(){return(G=a.___cxa_is_pointer_type=a.asm.__cxa_is_pointer_type).apply(null,arguments)};a.dynCall_ji=function(){return(a.dynCall_ji=a.asm.dynCall_ji).apply(null,arguments)},a.dynCall_iiji=function(){return(a.dynCall_iiji=a.asm.dynCall_iiji).apply(null,arguments)},a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.dynCall_jiji).apply(null,arguments)};function X(t,n){var e=F();try{return ye(t)(n)}catch(r){if(A(e),r!==r+0)throw r;_setThrew(1,0)}}function i(t,n){var e=F();try{ye(t)(n)}catch(r){if(A(e),r!==r+0)throw r;_setThrew(1,0)}}function o(t,n,e,r,s){var c=F();try{ye(t)(n,e,r,s)}catch(p){if(A(c),p!==p+0)throw p;_setThrew(1,0)}}function d(t){var n=F();try{ye(t)()}catch(e){if(A(n),e!==e+0)throw e;_setThrew(1,0)}}function y(t,n,e,r){var s=F();try{return ye(t)(n,e,r)}catch(c){if(A(s),c!==c+0)throw c;_setThrew(1,0)}}function T(t){var n=F();try{return ye(t)()}catch(e){if(A(n),e!==e+0)throw e;_setThrew(1,0)}}function k(t,n,e,r,s,c,p){var h=F();try{ye(t)(n,e,r,s,c,p)}catch(g){if(A(h),g!==g+0)throw g;_setThrew(1,0)}}function j(t,n,e){var r=F();try{return ye(t)(n,e)}catch(s){if(A(r),s!==s+0)throw s;_setThrew(1,0)}}a.ccall=St;var R;Ar=function t(){R||I(),R||(Ar=t)};function I(t){if(Ke>0||(Ft(),Ke>0))return;function n(){R||(R=!0,a.calledRun=!0,!Ue&&(kt(),C(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),Dt()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),n()},1)):n()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return I(),a.ready})})();l.exports=m})(Yn)),Yn.exports}var ha=va(),ga=zn(ha);const ya=new URL(""+new URL("openjphjs-C-BUUy4a.wasm",import.meta.url).href,import.meta.url),Un={codec:void 0,decoder:void 0,decodeConfig:{}};function _a(l,_,m){const S={width:_,height:m};for(;l>0;)S.width=Math.ceil(S.width/2),S.height=Math.ceil(S.height/2),l--;return S}function ma(l){if(Un.decodeConfig=l,Un.codec)return Promise.resolve();const _=ga({locateFile:m=>m.endsWith(".wasm")?ya.toString():m});return new Promise((m,S)=>{_.then(E=>{Un.codec=E,Un.decoder=new E.HTJ2KDecoder,m()},S)})}async function ba(l,_){await ma();const m=new Un.codec.HTJ2KDecoder,S=m.getEncodedBuffer(l.length);S.set(l);const E=_.decodeLevel||0;m.decodeSubResolution(E);const a=m.getFrameInfo();if(_.decodeLevel>0){const{width:je,height:Ce}=_a(_.decodeLevel,a.width,a.height);a.width=je,a.height=Ce}const C=m.getDecodedBuffer();new Uint8Array(C.length).set(C);const M=`x: ${m.getImageOffset().x}, y: ${m.getImageOffset().y}`,q=m.getNumDecompositions(),V=m.getNumLayers(),J=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][m.getProgressionOrder()+1],L=m.getIsReversible(),re=`${m.getBlockDimensions().width} x ${m.getBlockDimensions().height}`,z=`${m.getTileSize().width} x ${m.getTileSize().height}`,Y=`${m.getTileOffset().x}, ${m.getTileOffset().y}`,se=`${C.length.toLocaleString()} bytes`,ke=`${(C.length/S.length).toFixed(2)}:1`,K={columns:a.width,rows:a.height,bitsPerPixel:a.bitsPerSample,signed:a.isSigned,bytesPerPixel:_.bytesPerPixel,componentsPerPixel:a.componentCount};let me=wa(a,C);const{buffer:ve,byteOffset:Te,byteLength:Re}=me,Ue=ve.slice(Te,Te+Re);me=new me.constructor(Ue);const pr={imageOffset:M,numDecompositions:q,numLayers:V,progessionOrder:J,reversible:L,blockDimensions:re,tileSize:z,tileOffset:Y,decodedSize:se,compressionRatio:ke};return{..._,pixelData:me,imageInfo:K,encodeOptions:pr,...pr,...K}}function wa(l,_){return l.bitsPerSample>8?l.isSigned?new Int16Array(_.buffer,_.byteOffset,_.byteLength/2):new Uint16Array(_.buffer,_.byteOffset,_.byteLength/2):l.isSigned?new Int8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}function Pa(l,_){const m=l.length,{rescaleSlope:S,rescaleIntercept:E,suvbw:a,doseGridScaling:C}=_;if(_.modality==="PT"&&typeof a=="number"&&!isNaN(a))for(let U=0;U<m;U++)l[U]=a*(l[U]*S+E);else if(_.modality==="RTDOSE"&&typeof C=="number"&&!isNaN(C))for(let U=0;U<m;U++)l[U]=l[U]*C;else for(let U=0;U<m;U++)l[U]=l[U]*S+E;return!0}function Ta(l){let _=l[0],m=l[0],S;const E=l.length;for(let a=1;a<E;a++)S=l[a],_=Math.min(_,S),m=Math.max(m,S);return{min:_,max:m}}function _i(l,_){let m;return Number.isInteger(l)&&Number.isInteger(_)&&(l>=0?_<=255?m=Uint8Array:_<=65535?m=Uint16Array:_<=4294967295&&(m=Uint32Array):l>=-128&&_<=127?m=Int8Array:l>=-32768&&_<=32767&&(m=Int16Array)),m||Float32Array}function Ca(l,_,m){return _i(l,_)===m}function $a(l){return l==="RGB"||l==="PALETTE COLOR"||l==="YBR_FULL"||l==="YBR_FULL_422"||l==="YBR_PARTIAL_422"||l==="YBR_PARTIAL_420"||l==="YBR_RCT"||l==="YBR_ICT"}const Aa={bilinear:wi,replicate:Pi},li={Uint8Array,Uint16Array,Int16Array,Float32Array,Uint32Array};function Ra(l,_,m,S){const E=l.pixelRepresentation!==void 0&&l.pixelRepresentation===1,a=E&&l.bitsStored!==void 0?32-l.bitsStored:void 0;if(E&&a!==void 0)for(let K=0;K<l.pixelData.length;K++)l.pixelData[K]=l.pixelData[K]<<a>>a;let C=l.pixelData;l.pixelDataLength=l.pixelData.length;const{min:U,max:M}=Ta(l.pixelData),q=typeof _.allowFloatRendering<"u"?_.allowFloatRendering:!0;let V=$a(l.photometricInterpretation)&&_.targetBuffer?.offset===void 0;const L=_.preScale?.enabled&&Object.values(_.preScale.scalingParameters).some(K=>typeof K=="number"&&!Number.isInteger(K)),re=!_.preScale.enabled||!q&&L,z=_.targetBuffer?.type;if(z&&_.preScale.enabled&&!re){const K=_.preScale.scalingParameters,me=Qn(U,M,K);V=!Ca(me.min,me.max,li[z])}z&&!V?C=Sa(_,l,li,C):_.preScale.enabled&&!re?C=Fa(_,U,M,l):C=mi(U,M,l);let Y=U,se=M;if(_.preScale.enabled&&!re){const K=_.preScale.scalingParameters;if(bi(K),Ea(K)){Pa(C,K),l.preScale={..._.preScale,scaled:!0};const ve=Qn(U,M,K);Y=ve.min,se=ve.max}}else re&&(l.preScale={enabled:!0,scaled:!1},Y=U,se=M);l.pixelData=C,l.smallestPixelValue=Y,l.largestPixelValue=se;const ke=new Date().getTime();return l.decodeTimeInMS=ke-m,l}function Ea(l){const{rescaleSlope:_,rescaleIntercept:m,modality:S,doseGridScaling:E,suvbw:a}=l;return typeof _=="number"&&typeof m=="number"||S==="RTDOSE"&&typeof E=="number"||S==="PT"&&typeof a=="number"}function Sa(l,_,m,S){const{arrayBuffer:E,type:a,offset:C=0,length:U,rows:M}=l.targetBuffer,q=m[a];if(!q)throw new Error(`target array ${a} is not supported, or doesn't exist.`);M&&M!=_.rows&&Da(_,l.targetBuffer,q);const V=_.pixelDataLength,J=C,L=U??V-J,re=_.pixelData;if(L!==re.length)throw new Error(`target array for image does not have the same length (${L}) as the decoded image length (${re.length}).`);const z=E?new q(E,J,L):new q(L);return z.set(re,0),S=z,S}function Fa(l,_,m,S){const E=l.preScale.scalingParameters;bi(E);const a=Qn(_,m,E);return mi(a.min,a.max,S)}function mi(l,_,m){const S=_i(l,_),E=new S(m.pixelData.length);return E.set(m.pixelData,0),E}function Qn(l,_,m){const{rescaleSlope:S,rescaleIntercept:E,modality:a,doseGridScaling:C,suvbw:U}=m;return a==="PT"&&typeof U=="number"&&!isNaN(U)?{min:U*(l*S+E),max:U*(_*S+E)}:a==="RTDOSE"&&typeof C=="number"&&!isNaN(C)?{min:l*C,max:_*C}:typeof S=="number"&&typeof E=="number"?{min:S*l+E,max:S*_+E}:{min:l,max:_}}function bi(l){if(!l)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}function ka(l,_,m){const{samplesPerPixel:S}=l,{rows:E,columns:a}=_,C=E*a*S,U=new m(C),M=U.byteLength/C;return{pixelData:U,rows:E,columns:a,frameInfo:{...l.frameInfo,rows:E,columns:a},imageInfo:{...l.imageInfo,rows:E,columns:a,bytesPerPixel:M}}}function Da(l,_,m){const S=ka(l,_,m),{scalingType:E="replicate"}=_;return Aa[E](l,S),Object.assign(l,S),l.pixelDataLength=l.pixelData.length,l}async function xa(l,_,m,S,E,a){const C=new Date().getTime();let U=null,M;switch(_){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":U=ni(l,m);break;case"1.2.840.10008.1.2.2":U=Ii(l,m);break;case"1.2.840.10008.1.2.1.99":U=ni(l,m);break;case"1.2.840.10008.1.2.5":U=Wi(l,m);break;case"1.2.840.10008.1.2.4.50":M={...l},U=Yi(m,M);break;case"1.2.840.10008.1.2.4.51":U=Zi(l,m);break;case"1.2.840.10008.1.2.4.57":U=ai(l,m);break;case"1.2.840.10008.1.2.4.70":U=ai(l,m);break;case"1.2.840.10008.1.2.4.80":M={signed:l.pixelRepresentation===1,bytesPerPixel:l.bitsAllocated<=8?1:2,...l},U=si(m,M);break;case"1.2.840.10008.1.2.4.81":M={signed:l.pixelRepresentation===1,bytesPerPixel:l.bitsAllocated<=8?1:2,...l},U=si(m,M);break;case"1.2.840.10008.1.2.4.90":M={...l},U=fi(m,M);break;case"1.2.840.10008.1.2.4.91":M={...l},U=fi(m,M);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":M={...l},U=ba(m,M);break;default:throw new Error(`no decoder for transfer syntax ${_}`)}if(!U)throw new Error("decodePromise not defined");const q=await U,V=Ra(q,E,C);return a?.(V),V}const Oa={decodeTask({imageFrame:l,transferSyntax:_,decodeConfig:m,options:S,pixelData:E,callbackFn:a}){return xa(l,_,E,m,S,a)}};Zn(Oa);
