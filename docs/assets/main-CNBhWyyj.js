const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DdKylV0O.js","assets/index-Cp4iUYqv.js","assets/Texture-C9D3AFRO.js","assets/imageRetrievalPoolManager-DiP2nqZv.js","assets/index-BFl08faP.js","assets/index-2o3I7u8g.js","assets/index-_7L80XoB.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./index-_7L80XoB.js";const w=document.getElementById("dicomViewport"),_=document.getElementById("status"),A=document.getElementById("dicomFiles");let v,s,p;function i(e){_&&(_.textContent=e)}function N(e){return e?.stack||e?.message||String(e)}i("main.js running. Loading Cornerstone modules...");async function L(){try{const e=await f(()=>import("./index-DdKylV0O.js"),__vite__mapDeps([0,1,2,3])),a=await f(()=>import("./index-BFl08faP.js"),__vite__mapDeps([4,1,2])),t=await f(()=>import("./index-2o3I7u8g.js"),__vite__mapDeps([5,1,3,6]));if(i("Initializing Cornerstone..."),await e.init(),await a.init(),t.init({maxWebWorkers:navigator.hardwareConcurrency||1}),p=t.wadouri,!p?.fileManager?.add)throw new Error("wadouri.fileManager.add is missing. DICOM image loader did not initialize.");const{addTool:n,ToolGroupManager:g,PanTool:d,ZoomTool:m,WindowLevelTool:c,StackScrollTool:u,LengthTool:r,Enums:y}=a;n(d),n(m),n(c),n(u),n(r);const E="re1",T="vp1";v=new e.RenderingEngine(E),v.enableElement({viewportId:T,type:e.Enums.ViewportType.STACK,element:w}),s=v.getViewport(T);const o=g.createToolGroup("tg1");o.addTool(u.toolName),o.addTool(c.toolName),o.addTool(d.toolName),o.addTool(m.toolName),o.addTool(r.toolName),o.addViewport(T,E);const l=y?.MouseBindings??null,I=y?.KeyboardBindings??null;l?(o.setToolActive(c.toolName,{bindings:[{mouseButton:l.Primary}]}),o.setToolActive(d.toolName,{bindings:[{mouseButton:l.Auxiliary}]}),o.setToolActive(m.toolName,{bindings:[{mouseButton:l.Secondary}]}),o.setToolActive(u.toolName,{bindings:[{mouseButton:l.Wheel}]}),I?.Shift!=null?o.setToolActive(r.toolName,{bindings:[{mouseButton:l.Primary,modifierKey:I.Shift}]}):o.setToolPassive(r.toolName)):(o.setToolActive(u.toolName),o.setToolActive(c.toolName),o.setToolPassive(d.toolName),o.setToolPassive(m.toolName),o.setToolPassive(r.toolName)),s.render(),i("Ready. Choose DICOM files (one series) to load.")}catch(e){console.error(e),i("Initialization failed:\\n"+N(e))}}async function h(e){const a=Array.from(e||[]).filter(t=>t&&t.size>0);if(a.length!==0){if(!s){i("Viewer not initialized yet. See error above.");return}try{a.sort((n,g)=>n.name.localeCompare(g.name,void 0,{numeric:!0,sensitivity:"base"})),i("Indexing files...");const t=a.map(n=>p.fileManager.add(n));i("Loading stack..."),await s.setStack(t),s.render(),i("Loaded "+t.length+" slices. Wheel scroll, left drag window/level, middle pan, right zoom.")}catch(t){console.error(t),i("Load failed:\\n"+N(t)+"\\nTry selecting only one series.")}}}A?.addEventListener("change",e=>h(e.target.files));w?.addEventListener("dragover",e=>{e.preventDefault()});w?.addEventListener("drop",e=>{e.preventDefault(),h(e.dataTransfer.files)});L();
