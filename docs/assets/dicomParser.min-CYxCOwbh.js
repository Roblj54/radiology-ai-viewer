import{r as Pe,g as xe}from"./___vite-browser-external_commonjs-proxy-Buz2L0e0.js";function we(D,M){for(var S=0;S<M.length;S++){const m=M[S];if(typeof m!="string"&&!Array.isArray(m)){for(const b in m)if(b!=="default"&&!(b in D)){const v=Object.getOwnPropertyDescriptor(m,b);v&&Object.defineProperty(D,b,v.get?v:{enumerable:!0,get:()=>m[b]})}}}return Object.freeze(Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}))}var J={exports:{}};var Ee=J.exports,fe;function Ae(){return fe||(fe=1,(function(D,M){(function(S,m){D.exports=m(Pe)})(Ee,function(S){return b=[function(l,s){l.exports=S},function(l,s,f){f.r(s),f.d(s,"isStringVr",function(){return O}),f.d(s,"isPrivateTag",function(){return F}),f.d(s,"parsePN",function(){return K}),f.d(s,"parseTM",function(){return X}),f.d(s,"parseDA",function(){return Y}),f.d(s,"explicitElementToString",function(){return G}),f.d(s,"explicitDataSetToJS",function(){return V}),f.d(s,"createJPEGBasicOffsetTable",function(){return ee}),f.d(s,"parseDicomDataSetExplicit",function(){return j}),f.d(s,"parseDicomDataSetImplicit",function(){return _}),f.d(s,"readFixedString",function(){return E}),f.d(s,"alloc",function(){return B}),f.d(s,"version",function(){return ne}),f.d(s,"bigEndianByteArrayParser",function(){return R}),f.d(s,"ByteStream",function(){return P}),f.d(s,"sharedCopy",function(){return q}),f.d(s,"DataSet",function(){return y}),f.d(s,"findAndSetUNElementLength",function(){return te}),f.d(s,"findEndOfEncapsulatedElement",function(){return $}),f.d(s,"findItemDelimitationItemAndSetElementLength",function(){return k}),f.d(s,"littleEndianByteArrayParser",function(){return x}),f.d(s,"parseDicom",function(){return ie}),f.d(s,"readDicomElementExplicit",function(){return U}),f.d(s,"readDicomElementImplicit",function(){return L}),f.d(s,"readEncapsulatedImageFrame",function(){return Q}),f.d(s,"readEncapsulatedPixelData",function(){return se}),f.d(s,"readEncapsulatedPixelDataFromFragments",function(){return C}),f.d(s,"readPart10Header",function(){return H}),f.d(s,"readSequenceItemsExplicit",function(){return z}),f.d(s,"readSequenceItemsImplicit",function(){return N}),f.d(s,"readSequenceItem",function(){return I}),f.d(s,"readTag",function(){return g});var T={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},O=function(e){return T[e]},F=function(e){if(e=parseInt(e[4],16),isNaN(e))throw"dicomParser.isPrivateTag: cannot parse last character of group";return e%2==1},K=function(e){if(e!==void 0)return e=e.split("^"),{familyName:e[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}};function X(e,r){if(2<=e.length){var a=parseInt(e.substring(0,2),10),t=4<=e.length?parseInt(e.substring(2,4),10):void 0,n=6<=e.length?parseInt(e.substring(4,6),10):void 0,i=8<=e.length?e.substring(7,13):void 0,i=i?parseInt(i,10)*Math.pow(10,6-i.length):void 0;if(r&&(isNaN(a)||t!==void 0&&isNaN(t)||n!==void 0&&isNaN(n)||i!==void 0&&isNaN(i)||a<0||23<a||t&&(t<0||59<t)||n&&(n<0||59<n)||i&&(i<0||999999<i)))throw"invalid TM '".concat(e,"'");return{hours:a,minutes:t,seconds:n,fractionalSeconds:i}}if(r)throw"invalid TM '".concat(e,"'")}function le(e,r,a){return!isNaN(a)&&0<r&&r<=12&&0<e&&e<=(function(t,n){switch(t){case 2:return n%4==0&&n%100||n%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}})(r,a)}function Y(e,r){if(e&&e.length===8){var a=parseInt(e.substring(0,4),10),t=parseInt(e.substring(4,6),10),n=parseInt(e.substring(6,8),10);if(r&&le(n,t,a)!==!0)throw"invalid DA '".concat(e,"'");return{year:a,month:t,day:n}}if(r)throw"invalid DA '".concat(e,"'")}function G(e,r){if(e===void 0||r===void 0)throw"dicomParser.explicitElementToString: missing required parameters";if(r.vr===void 0)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var a,t=r.vr,n=r.tag;function i(d,u){for(var p="",c=0;c<d;c++)c!==0&&(p+="/"),p+=u.call(e,n,c).toString();return p}if(O(t)===!0)a=e.string(n);else{if(t==="AT"){var o=e.uint32(n);return o===void 0?void 0:"x".concat((o=o<0?4294967295+o+1:o).toString(16).toUpperCase())}t==="US"?a=i(r.length/2,e.uint16):t==="SS"?a=i(r.length/2,e.int16):t==="UL"?a=i(r.length/4,e.uint32):t==="SL"?a=i(r.length/4,e.int32):t==="FD"?a=i(r.length/8,e.double):t==="FL"&&(a=i(r.length/4,e.float))}return a}function V(e,r){if(e===void 0)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";r=r||{omitPrivateAttibutes:!0,maxElementLength:128};var a,t={};for(a in e.elements){var n=e.elements[a];if(r.omitPrivateAttibutes!==!0||!F(a))if(n.items){for(var i=[],o=0;o<n.items.length;o++)i.push(V(n.items[o].dataSet,r));t[a]=i}else{var d=void 0;n.length<r.maxElementLength&&(d=G(e,n)),t[a]=d!==void 0?d:{dataOffset:n.dataOffset,length:n.length}}}return t}function Z(e,r){return e.byteArray[r]===255&&e.byteArray[r+1]===217}function ue(e,r,a){for(var t,n,i=a;i<r.fragments.length;i++)if(t=e,n=i,n=r.fragments[n],!(!Z(t,n.position+n.length-2)&&!Z(t,n.position+n.length-3)))return i}function ee(e,r,a){if(e===void 0)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(r===void 0)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if(r.tag!=="x7fe00010")throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(r.encapsulatedPixelData!==!0||r.hadUndefinedLength!==!0||r.basicOffsetTable===void 0||r.fragments===void 0||r.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(a&&a.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";a=a||r.fragments;for(var t=[],n=0;;){t.push(r.fragments[n].offset);var i=ue(e,r,n);if(i===void 0||i===r.fragments.length-1)return t;n=i+1}}function g(a){if(a===void 0)throw"dicomParser.readTag: missing required parameter 'byteStream'";var r=256*a.readUint16()*256,a=a.readUint16();return"x".concat("00000000".concat((r+a).toString(16)).substr(-8))}function $(e,r,a){if(e===void 0)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(r===void 0)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(r.encapsulatedPixelData=!0,r.basicOffsetTable=[],r.fragments=[],g(e)!=="xfffee000")throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var t=e.readUint32()/4,n=0;n<t;n++){var i=e.readUint32();r.basicOffsetTable.push(i)}for(var o=e.position;e.position<e.byteArray.length;){var d=g(e),u=e.readUint32();if(d==="xfffee0dd")return e.seek(u),void(r.length=e.position-r.dataOffset);if(d!=="xfffee000")return a&&a.push("unexpected tag ".concat(d," while searching for end of pixel data element with undefined length")),u>e.byteArray.length-e.position&&(u=e.byteArray.length-e.position),r.fragments.push({offset:e.position-o-8,position:e.position,length:u}),e.seek(u),void(r.length=e.position-r.dataOffset);r.fragments.push({offset:e.position-o-8,position:e.position,length:u}),e.seek(u)}a&&a.push("pixel data element ".concat(r.tag," missing sequence delimiter tag xfffee0dd"))}function te(e,r){if(e===void 0)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var a=e.byteArray.length-8;e.position<=a;)if(e.readUint16()===65534){var t=e.readUint16();if(t===57565)return e.readUint32()!==0&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(r.tag)),void(r.length=e.position-r.dataOffset)}r.length=e.byteArray.length-r.dataOffset,e.seek(e.byteArray.length-e.position)}function E(e,r,a){if(a<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(r+a>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var t,n="",i=0;i<a;i++){if((t=e[r+i])===0)return r+=a,n;n+=String.fromCharCode(t)}return n}function me(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function A(e,r){return e.parser!==void 0?e.parser:r}var y=(function(){function e(t,n,i){(function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")})(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=i}var r,a;return r=e,(a=[{key:"uint16",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readUint16(this.byteArray,t.dataOffset+2*n)}},{key:"int16",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readInt16(this.byteArray,t.dataOffset+2*n)}},{key:"uint32",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readUint32(this.byteArray,t.dataOffset+4*n)}},{key:"int32",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readInt32(this.byteArray,t.dataOffset+4*n)}},{key:"float",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readFloat(this.byteArray,t.dataOffset+4*n)}},{key:"double",value:function(t,n){if(t=this.elements[t],n=n!==void 0?n:0,t&&t.length!==0)return A(t,this.byteArrayParser).readDouble(this.byteArray,t.dataOffset+8*n)}},{key:"numStringValues",value:function(t){if(t=this.elements[t],t&&0<t.length)return t=E(this.byteArray,t.dataOffset,t.length).match(/\\/g),t===null?1:t.length+1}},{key:"string",value:function(t,n){if(t=this.elements[t],t&&t.Value)return t.Value;if(t&&0<t.length)return t=E(this.byteArray,t.dataOffset,t.length),0<=n?t.split("\\")[n].trim():t.trim()}},{key:"text",value:function(t,n){if(t=this.elements[t],t&&0<t.length)return t=E(this.byteArray,t.dataOffset,t.length),0<=n?t.split("\\")[n].replace(/ +$/,""):t.replace(/ +$/,"")}},{key:"floatString",value:function(t,n){var i=this.elements[t];if(i&&0<i.length&&(n=this.string(t,n=n!==void 0?n:0),n!==void 0))return parseFloat(n)}},{key:"intString",value:function(t,n){var i=this.elements[t];if(i&&0<i.length&&(n=this.string(t,n=n!==void 0?n:0),n!==void 0))return parseInt(n)}},{key:"attributeTag",value:function(t){var n=this.elements[t];if(n&&n.length===4){var i=A(n,this.byteArrayParser).readUint16,t=this.byteArray,n=n.dataOffset;return"x".concat("00000000".concat((256*i(t,n)*256+i(t,n+2)).toString(16)).substr(-8))}}}])&&me(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),e})();function k(e,r){if(e===void 0)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var a=e.byteArray.length-8;e.position<=a;)if(e.readUint16()===65534){var t=e.readUint16();if(t===57357)return e.readUint32()!==0&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(r.tag)),void(r.length=e.position-r.dataOffset)}r.length=e.byteArray.length-r.dataOffset,e.seek(e.byteArray.length-e.position)}var ce=function(e,r){return e.vr!==void 0?e.vr==="SQ":r.position+4<=r.byteArray.length?(e=g(r),r.seek(-4),e==="xfffee000"||e==="xfffee0dd"):(r.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1)};function L(e,r,a){if(e===void 0)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var t=g(e),t={tag:t,vr:a!==void 0?a(t):void 0,length:e.readUint32(),dataOffset:e.position};return t.length===4294967295&&(t.hadUndefinedLength=!0),t.tag===r||(!ce(t,e)||F(t.tag)&&!t.hadUndefinedLength?t.hadUndefinedLength?k(e,t):e.seek(t.length):(N(e,t,a),F(t.tag)&&(t.items=void 0))),t}function I(e){if(e===void 0)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var r={tag:g(e),length:e.readUint32(),dataOffset:e.position};if(r.tag!=="xfffee000")throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset ".concat(e.position);return r}function re(e,r){var a=I(e);return a.length===4294967295?(a.hadUndefinedLength=!0,a.dataSet=(function(t,n){for(var i={};t.position<t.byteArray.length;){var o=L(t,void 0,n);if((i[o.tag]=o).tag==="xfffee00d")return new y(t.byteArrayParser,t.byteArray,i)}return t.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new y(t.byteArrayParser,t.byteArray,i)})(e,r),a.length=e.position-a.dataOffset):(a.dataSet=new y(e.byteArrayParser,e.byteArray,{}),_(a.dataSet,e,e.position+a.length,{vrCallback:r})),a}function N(e,r,a){if(e===void 0)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(r===void 0)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";r.items=[],(r.length===4294967295?function(t,n,i){for(;t.position+4<=t.byteArray.length;){var o=g(t);if(t.seek(-4),o==="xfffee0dd")return n.length=t.position-n.dataOffset,t.seek(8);o=re(t,i),n.items.push(o)}t.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),n.length=t.byteArray.length-n.dataOffset}:function(t,n,i){for(var o=n.dataOffset+n.length;t.position<o;){var d=re(t,i);n.items.push(d)}})(e,r,a)}function ae(e,r){var a=I(e);return a.length===4294967295?(a.hadUndefinedLength=!0,a.dataSet=(function(t,n){for(var i={};t.position<t.byteArray.length;){var o=U(t,n);if((i[o.tag]=o).tag==="xfffee00d")return new y(t.byteArrayParser,t.byteArray,i)}return n.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new y(t.byteArrayParser,t.byteArray,i)})(e,r),a.length=e.position-a.dataOffset):(a.dataSet=new y(e.byteArrayParser,e.byteArray,{}),j(a.dataSet,e,e.position+a.length)),a}function z(e,r,a){if(e===void 0)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(r===void 0)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";r.items=[],(r.length===4294967295?function(t,n,i){for(;t.position+4<=t.byteArray.length;){var o=g(t);if(t.seek(-4),o==="xfffee0dd")return n.length=t.position-n.dataOffset,t.seek(8);o=ae(t,i),n.items.push(o)}i.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),n.length=t.position-n.dataOffset}:function(t,n,i){for(var o=n.dataOffset+n.length;t.position<o;){var d=ae(t,i);n.items.push(d)}})(e,r,a)}var pe=function(e){return e==="OB"||e==="OD"||e==="OL"||e==="OW"||e==="SQ"||e==="OF"||e==="UC"||e==="UR"||e==="UT"||e==="UN"?4:2};function U(e,r,a){if(e===void 0)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var t={tag:g(e),vr:e.readFixedString(2)};return pe(t.vr)===2?t.length=e.readUint16():(e.seek(2),t.length=e.readUint32()),t.dataOffset=e.position,t.length===4294967295&&(t.hadUndefinedLength=!0),t.tag===a||(t.vr==="SQ"?z(e,t,r):t.length===4294967295?t.tag==="x7fe00010"?$(e,t,r):(t.vr==="UN"?N:k)(e,t):e.seek(t.length)),t}function j(e,r,a){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};if(a=a===void 0?r.byteArray.length:a,r===void 0)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(a<r.position||a>r.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var n=e.elements;r.position<a;){var i=U(r,e.warnings,t.untilTag);if((n[i.tag]=i).tag===t.untilTag)return}if(r.position>a)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function _(e,r,a){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};if(a=a===void 0?e.byteArray.length:a,r===void 0)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(a<r.position||a>r.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var n=e.elements;r.position<a;){var i=L(r,t.untilTag,t.vrCallback);if((n[i.tag]=i).tag===t.untilTag)return}}function B(e,r){if(typeof Buffer<"u"&&e instanceof Buffer)return Buffer.alloc(r);if(e instanceof Uint8Array)return new Uint8Array(r);throw"dicomParser.alloc: unknown type for byteArray"}var ne="1.8.12",R={readUint16:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(r+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[r]<<8)+e[r+1]},readInt16:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(r+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";return r=(e[r]<<8)+e[r+1],r=32768&r?r-65535-1:r},readUint32:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(r+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[r]+e[r+1])+e[r+2])+e[r+3]},readInt32:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(r+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]},readFloat:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(r+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var a=new Uint8Array(4);return a[3]=e[r],a[2]=e[r+1],a[1]=e[r+2],a[0]=e[r+3],new Float32Array(a.buffer)[0]},readDouble:function(e,r){if(r<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(r+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var a=new Uint8Array(8);return a[7]=e[r],a[6]=e[r+1],a[5]=e[r+2],a[4]=e[r+3],a[3]=e[r+4],a[2]=e[r+5],a[1]=e[r+6],a[0]=e[r+7],new Float64Array(a.buffer)[0]}};function q(e,r,a){if(typeof Buffer<"u"&&e instanceof Buffer)return e.slice(r,r+a);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+r,a);throw"dicomParser.from: unknown type for byteArray"}function he(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var P=(function(){function e(t,n,i){if((function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")})(this,e),t===void 0)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(n===void 0)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(!(n instanceof Uint8Array)&&(typeof Buffer>"u"||!(n instanceof Buffer)))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(i<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(i>=n.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=t,this.byteArray=n,this.position=i||0,this.warnings=[]}var r,a;return r=e,(a=[{key:"seek",value:function(t){if(this.position+t<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=t}},{key:"readByteStream",value:function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=q(this.byteArray,this.position,t);return this.position+=t,new e(this.byteArrayParser,n)}},{key:"getSize",value:function(){return this.byteArray.length}},{key:"readUint16",value:function(){var t=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,t}},{key:"readUint32",value:function(){var t=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,t}},{key:"readFixedString",value:function(t){var n=E(this.byteArray,this.position,t);return this.position+=t,n}}])&&he(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),e})(),x={readUint16:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(r+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[r]+256*e[r+1]},readInt16:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(r+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";return r=e[r]+(e[r+1]<<8),r=32768&r?r-65535-1:r},readUint32:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(r+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[r]+256*e[r+1]+256*e[r+2]*256+256*e[r+3]*256*256},readInt32:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(r+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24)},readFloat:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(r+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var a=new Uint8Array(4);return a[0]=e[r],a[1]=e[r+1],a[2]=e[r+2],a[3]=e[r+3],new Float32Array(a.buffer)[0]},readDouble:function(e,r){if(r<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(r+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var a=new Uint8Array(8);return a[0]=e[r],a[1]=e[r+1],a[2]=e[r+2],a[3]=e[r+3],a[4]=e[r+4],a[5]=e[r+5],a[6]=e[r+6],a[7]=e[r+7],new Float64Array(a.buffer)[0]}};function H(e){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(e===void 0)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var a=r.TransferSyntaxUID,t=new P(x,e);return(function(){var n=(function(){if(t.getSize()<=132&&a)return!1;if(t.seek(128),t.readFixedString(4)==="DICM")return!0;if(!(r||{}).TransferSyntaxUID)throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file.";return t.seek(0),!1})(),i=[],o={};if(!n)return t.position=0,{elements:{x00020010:{tag:"x00020010",vr:"UI",Value:a}},warnings:i};for(;t.position<t.byteArray.length;){var d=t.position,u=U(t,i);if("x0002ffff"<u.tag){t.position=d;break}u.parser=x,o[u.tag]=u}return(n=new y(t.byteArrayParser,t.byteArray,o)).warnings=t.warnings,n.position=t.position,n})()}var ge="1.2.840.10008.1.2.2";function ie(e){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(e===void 0)throw new Error("dicomParser.parseDicom: missing required parameter 'byteArray'");var a,t=function(i){if(i.elements.x00020010===void 0)throw new Error("dicomParser.parseDicom: missing required meta header attribute 0002,0010");return i=i.elements.x00020010,i&&i.Value||E(e,i.dataOffset,i.length)};function n(u){var d=t(u),o=d!=="1.2.840.10008.1.2",d=(function(p,c){var W=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";if(p!=="1.2.840.10008.1.2.1.99")return new P(p===ge?R:x,e,c);if(r&&r.inflater)return p=r.inflater(e,c),new P(x,p,0);if(W==!0){var h=f(0),w=q(e,c,e.length-c),h=h.inflateRawSync(w),w=B(e,h.length+c);return e.copy(w,0,0,c),h.copy(w,c),new P(x,w,0)}if(typeof pako>"u")throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax";return h=e.slice(c),w=pako.inflateRaw(h),(h=B(e,w.length+c)).set(e.slice(0,c),0),h.set(w,c),new P(x,h,0)})(d,u.position),u=new y(d.byteArrayParser,d.byteArray,{});u.warnings=d.warnings;try{(o?j:_)(u,d,d.byteArray.length,r)}catch(p){throw{exception:p,dataSet:u}}return u}return(function(i,o){for(var d in i.elements)i.elements.hasOwnProperty(d)&&(o.elements[d]=i.elements[d]);return i.warnings!==void 0&&(o.warnings=i.warnings.concat(o.warnings)),o})(a=H(e,r),n(a))}var ye=function(e,r,a){for(var t=0,n=r;n<r+a;n++)t+=e[n].length;return t};function C(e,o,a,t,n){if(n=n||o.fragments,e===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(o===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(a===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if((t=t||1)===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if(o.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(o.encapsulatedPixelData!==!0||o.hadUndefinedLength!==!0||o.basicOffsetTable===void 0||o.fragments===void 0||o.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(a<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(a>=o.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(t<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(a+t>o.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var i=new P(e.byteArrayParser,e.byteArray,o.dataOffset),o=I(i);if(o.tag!=="xfffee000")throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";i.seek(o.length);var d=i.position;if(t===1)return q(i.byteArray,d+n[a].offset+8,n[a].length);for(var o=ye(n,a,t),u=B(i.byteArray,o),p=0,c=a;c<a+t;c++)for(var W=d+n[c].offset+8,h=0;h<n[c].length;h++)u[p++]=i.byteArray[W++];return u}var be=function(e,r){for(var a=0;a<e.length;a++)if(e[a].offset===r)return a},ve=function(e,r,a,t){if(e===r.length-1)return a.length-t;for(var n=r[e+1],i=t+1;i<a.length;i++)if(a[i].offset===n)return i-t;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"};function Q(e,r,a,t,n){if(t=t||r.basicOffsetTable,n=n||r.fragments,e===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(r===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(a===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(t===void 0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if(r.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(r.encapsulatedPixelData!==!0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(r.hadUndefinedLength!==!0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(r.fragments===void 0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(t.length===0)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(a<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(a>=t.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var i=t[a],i=be(n,i);if(i===void 0)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";return C(e,r,i,ve(a,t,n,i),n)}var oe=!1;function se(e,r,a){if(oe||(oe=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),e===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(r===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(a===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if(r.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(r.encapsulatedPixelData!==!0||r.hadUndefinedLength!==!0||r.basicOffsetTable===void 0||r.fragments===void 0)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(a<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return r.basicOffsetTable.length!==0?Q(e,r,a):C(e,r,0,r.fragments.length)}s.default={isStringVr:O,isPrivateTag:F,parsePN:K,parseTM:X,parseDA:Y,explicitElementToString:G,explicitDataSetToJS:V,createJPEGBasicOffsetTable:ee,parseDicomDataSetExplicit:j,parseDicomDataSetImplicit:_,readFixedString:E,alloc:B,version:ne,bigEndianByteArrayParser:R,ByteStream:P,sharedCopy:q,DataSet:y,findAndSetUNElementLength:te,findEndOfEncapsulatedElement:$,findItemDelimitationItemAndSetElementLength:k,littleEndianByteArrayParser:x,parseDicom:ie,readDicomElementExplicit:U,readDicomElementImplicit:L,readEncapsulatedImageFrame:Q,readEncapsulatedPixelData:se,readEncapsulatedPixelDataFromFragments:C,readPart10Header:H,readSequenceItemsExplicit:z,readSequenceItemsImplicit:N,readSequenceItem:I,readTag:g,LEI:"1.2.840.10008.1.2",LEE:"1.2.840.10008.1.2.1"}}],v={},m.m=b,m.c=v,m.d=function(l,s,f){m.o(l,s)||Object.defineProperty(l,s,{enumerable:!0,get:f})},m.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},m.t=function(l,s){if(1&s&&(l=m(l)),8&s||4&s&&typeof l=="object"&&l&&l.__esModule)return l;var f=Object.create(null);if(m.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:l}),2&s&&typeof l!="string")for(var T in l)m.d(f,T,(function(O){return l[O]}).bind(null,T));return f},m.n=function(l){var s=l&&l.__esModule?function(){return l.default}:function(){return l};return m.d(s,"a",s),s},m.o=function(l,s){return Object.prototype.hasOwnProperty.call(l,s)},m.p="",m(m.s=1);function m(l){if(v[l])return v[l].exports;var s=v[l]={i:l,l:!1,exports:{}};return b[l].call(s.exports,s,s.exports,m),s.l=!0,s.exports}var b,v})})(J)),J.exports}var de=Ae();const Se=xe(de),Oe=we({__proto__:null,default:Se},[de]);export{de as a,Oe as d};
