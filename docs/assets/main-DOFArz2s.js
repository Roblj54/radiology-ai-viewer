const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BDOhAIHw.js","assets/index-B-nbFw5B.js","assets/___vite-browser-external_commonjs-proxy-Buz2L0e0.js","assets/Texture--lNMEbwv.js","assets/imageRetrievalPoolManager-CQ2_YfAr.js","assets/index-BEztR0eJ.js","assets/index-CDIqXBhi.js","assets/dicomParser.min-CYxCOwbh.js","assets/index-D9ZbK86l.js"])))=>i.map(i=>d[i]);
import{_ as v}from"./index-D9ZbK86l.js";const _=document.getElementById("dicomViewport"),L=document.getElementById("status"),B=document.getElementById("dicomFiles");let y,d,c;function n(e){L&&(L.textContent=e)}function N(e){return e?.stack||e?.message||String(e)}n("main.js running. Loading Cornerstone modules...");async function b(){try{const e=await v(()=>import("./index-BDOhAIHw.js"),__vite__mapDeps([0,1,2,3,4])),a=await v(()=>import("./index-BEztR0eJ.js"),__vite__mapDeps([5,1,2,3]));c=await v(()=>import("./index-CDIqXBhi.js"),__vite__mapDeps([6,1,2,7,4,8]));const l=await v(()=>import("./dicomParser.min-CYxCOwbh.js").then(h=>h.d),__vite__mapDeps([7,2])),t=l.default??l,m=c.default??c;n("Initializing Cornerstone..."),await e.init(),await a.init(),typeof m.init=="function"&&m.init({dicomParser:t});const{addTool:s,ToolGroupManager:P,PanTool:u,ZoomTool:g,WindowLevelTool:f,StackScrollTool:T,LengthTool:r,Enums:E}=a;s(u),s(g),s(f),s(T),s(r);const w="re1",p="vp1";y=new e.RenderingEngine(w),y.enableElement({viewportId:p,type:e.Enums.ViewportType.STACK,element:_}),d=y.getViewport(p);const o=P.createToolGroup("tg1");o.addTool(T.toolName),o.addTool(f.toolName),o.addTool(u.toolName),o.addTool(g.toolName),o.addTool(r.toolName),o.addViewport(p,w);const i=E?.MouseBindings??null,I=E?.KeyboardBindings??null;i?(o.setToolActive(f.toolName,{bindings:[{mouseButton:i.Primary}]}),o.setToolActive(u.toolName,{bindings:[{mouseButton:i.Auxiliary}]}),o.setToolActive(g.toolName,{bindings:[{mouseButton:i.Secondary}]}),o.setToolActive(T.toolName,{bindings:[{mouseButton:i.Wheel}]}),I?.Shift!=null?o.setToolActive(r.toolName,{bindings:[{mouseButton:i.Primary,modifierKey:I.Shift}]}):o.setToolPassive(r.toolName)):(o.setToolActive(T.toolName),o.setToolActive(f.toolName),o.setToolPassive(u.toolName),o.setToolPassive(g.toolName),o.setToolPassive(r.toolName)),d.render(),n("Ready. Choose DICOM files (one series) to load.")}catch(e){console.error(e),n(`Initialization failed:
`+N(e))}}async function A(e){const a=Array.from(e||[]).filter(t=>t&&t.size>0);if(a.length===0)return;if(!d){n("Viewer not initialized yet. See error above.");return}const l=c?.default??c;if(!l?.wadouri?.fileManager?.add){n("DICOM loader not ready (wadouri.fileManager.add missing).");return}try{n("Indexing files...");const t=a.map(m=>l.wadouri.fileManager.add(m));n("Loading stack..."),await d.setStack(t),d.render(),n("Loaded "+t.length+" slices. Wheel scroll, left drag window/level, middle pan, right zoom.")}catch(t){console.error(t),n(`Load failed:
`+N(t)+`
Try selecting only one series.`)}}B?.addEventListener("change",e=>A(e.target.files));_?.addEventListener("dragover",e=>{e.preventDefault()});_?.addEventListener("drop",e=>{e.preventDefault(),A(e.dataTransfer.files)});b();
